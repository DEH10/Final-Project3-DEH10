(()=>{var Wn={82940:(B,L,t)=>{"use strict";t.d(L,{Ph:()=>i,rm:()=>l});var d=t(35608),y=t.n(d);const b=d.gzip,h=d.ungzip,i=w=>b(new TextEncoder().encode(w)),l=w=>new TextDecoder().decode(h(new Uint8Array(w)))},10404:(B,L,t)=>{"use strict";t.d(L,{lQ:()=>In,Qb:()=>jn,od:()=>Ln});var d=t(87587),y=t(71114),b=t(17200),h=t(4978),i=t(35433),l=t(71101);const w={};function m(g,R){typeof g=="object"&&(R=g,g=void 0),R=R||{};const U=(0,b.H)(g,R.path||"/socket.io"),ne=U.source,ee=U.id,be=U.path,De=w[ee]&&be in w[ee].nsps,he=R.forceNew||R["force new connection"]||R.multiplex===!1||De;let ge;return he?ge=new h.d(ne,R):(w[ee]||(w[ee]=new h.d(ne,R)),ge=w[ee]),U.query&&!R.query&&(R.query=U.queryKey),ge.socket(U.path,R)}Object.assign(m,{Manager:h.d,Socket:i.s,io:m,connect:m});var E=t(63828),c=t(81697),o=t(60074),_=t(71090);const r=2*1e3,s=16*1e3,M=32*1e3,v=()=>{},F=g=>{(0,o.Q)("SKT-QUE",g)},I=()=>({destroy:v,reset:v,emitAsync:a,emitLossy:v,reqRoomAsync:()=>Promise.resolve(),getIsConnected:()=>!0,getSocketId:()=>"",getReadyPromise:()=>Promise.resolve(),getOffsetMsec:()=>0,DUMMY:!0}),a=async(g,R)=>({type:g,payload:R,isDummy:!0}),C=g=>{let{query:{uId:R,fURL:U=globalThis.location.href.slice(0,128),uTag:ne=c.ck,vTag:ee=_.i},lossyListenerMap:be={},queueListenerMap:De={},socketUrl:he=globalThis.location.origin,socketPath:ge=c.z3,usePolling:ke=!1}=g;const te=(0,E.hF)();let me,G=(0,d.vH)(),H=0,Z=D,ue=null;const Te=()=>{me!==void 0&&(me.close(),me=void 0,G=(0,d.vH)(),Ze=!1,ue&&clearTimeout(ue),ue=null)},He=()=>{Te();const Pe=new h.d(he,{path:ge,query:{uId:R,fURL:U,uTag:ne,vTag:ee},transports:ke?["polling","websocket"]:["websocket"],reconnectionDelay:Math.round((r+s)/2),reconnectionDelayMax:M,randomizationFactor:(s-r)/(s+r),closeOnBeforeunload:!1}).socket(c.Or);Pe.on("connect_error",Be=>{console.log("[socket] connect_error",Be),Be.message.includes(c.Jc)&&(Te(),te.dispatchEvent({type:c.E$,payload:{error:Be}})),te.dispatchEvent({type:c.Rm,payload:{error:Be}})}),Pe.on("connect",async()=>{console.log("[socket] connect");{const Be=Date.now(),ze=await Ae(c.hD),Fe=Date.now();H=ze-(Be+Fe)*.5}Z!==D&&await Ae(c.Cu,Z),ue=(0,y.Q3)(()=>{!me||!me.connected||Ze||He()},(10+Math.random()*10)*60*1e3),console.log("[socket] ready"),te.dispatchEvent({type:c.FC}),G.resolve()});{let Be=Promise.resolve();const ze=Fe=>{const nt=Be.then(Fe);return Be=nt.then(v,F),nt};te.clear();for(const[Fe,nt]of Object.entries(be))Pe.on(Fe,Qe=>nt({type:Fe,payload:Qe})),te.addEventListener(Fe,Qe=>{let{payload:V}=Qe;return nt({type:Fe,payload:V})});for(const[Fe,nt]of Object.entries(De))Pe.on(Fe,Qe=>ze(()=>nt({type:Fe,payload:Qe}))),te.addEventListener(Fe,Qe=>{let{payload:V}=Qe;return ze(()=>nt({type:Fe,payload:V}))})}me=Pe};let Ze=!1;const Ae=(et,Pe)=>new Promise(Be=>{me.emit(et,Pe,Be),Ze=!0}).then(Be=>{Ze=!1;const{error:ze,result:Fe}=Be;if(ze!==void 0)throw Object.assign(new Error(typeof ze=="object"&&ze.message||"SKT-USR error"),ze);return Fe}),je=(et,Pe)=>{me.volatile.emit(et,Pe)},Ye=async et=>{await Ae(c.Cu,et),Z=et};return He(),{destroy:Te,reset:He,emitAsync:Ae,emitLossy:je,reqRoomAsync:Ye,getIsConnected:()=>me?me.connected:!1,getSocketId:()=>me?me.id:"",getReadyPromise:()=>G.promise,getOffsetMsec:()=>H}},D=[[],[],[]];var O=t(4423),A=t(6515),X=t(77101),le=t(3892),_e=t(91320),oe=t(66234),J=t(76336),Ee=t(21630);const de=0,Ue={cDebugMin:de,cCmtPack:de+1,cCmtThread:de+2,cCmtContent:de+3,cDebugMax:35},W=(0,Ee.$)("cmt-type",Ue),Y=W.pack("cCmtPack"),re=W.pack("cCmtThread"),Le=W.pack("cCmtContent"),Me=new Set(["cCmtPack","cCmtThread","cCmtContent"]),Ge=new Set([Y,re,Le]);var $=t(80693);const xe={unstyled:0,"header-one":1,"header-two":2,"header-three":3,"ordered-list-item":4,"unordered-list-item":5,atomic:6},Xe=(0,Ee.$)("DraftBlockType",xe),Ne={left:0,center:1,right:2,justify:3},k=(0,Ee.$)("DraftAlignment",Ne),Q={LINK:0,IMAGE:1},ie=(0,Ee.$)("DraftEntityMapType",Q),ae={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2},Oe=(0,Ee.$)("DraftEntityMapMutability",ae),se={_blank:0,_self:1},tt=(0,Ee.$)("DraftLinkTargetOption",se),$e=g=>{const R={};return Object.keys(g).forEach(U=>{const{type:ne,mutability:ee,data:be}=g[U],De=[ie.pack(ne),Oe.pack(ee)],he=[];ne==="LINK"?(De.push(tt.pack(be.targetOption)),he.push(be.url||"")):ne==="IMAGE"&&(De.push((0,oe.xd)(be.width),k.pack(be.alignment)),he.push(be.src||"",be.alt||"")),R["e/"+U]=[De.join(J.Kt),...he]}),R},we=g=>{const R={};for(const U of Object.keys(g)){if(!U.startsWith("e/"))continue;const ne=U.split("e/")[1],[ee,...be]=g[U],[De,he,ge,ke]=ee.split(J.Kt),te=ie.parse(De),me=Oe.parse(he);R[ne]=te==="LINK"?{type:te,mutability:me,data:{url:be[0],targetOption:tt.parse(ge)}}:{type:te,mutability:me,data:{src:be[0],alt:be[1],width:(0,oe.nZ)(ge),alignment:k.parse(ke)}}}return R},ye=g=>{const R={};return Object.keys(g).forEach(U=>{const{text:ne,type:ee,depth:be,inlineStyleRanges:De,entityRanges:he,data:{textAlign:ge,textIndent:ke,paraSpacing:te}}=g[U],me=[Xe.packDef(ee,"unstyled"),(0,oe.xd)(be),ge?k.pack(ge):"",ke!==void 0?(0,oe.xd)(ke):"",te!==void 0?(0,_e.DF)(te):""];R["b/"+U]=[me.join(J.Kt),ne,De.map(G=>{let{offset:H,length:Z,style:ue}=G;return N(H,Z,ue)}),he.map(G=>{let{offset:H,length:Z,key:ue}=G;return q(H,Z,ue)})]}),R},q=(g,R,U)=>""+(0,oe.xd)(g)+J.Kt+(0,oe.xd)(R)+J.Kt+(0,oe.xd)(U),Je=g=>{const R=g.indexOf(J.Kt),U=g.indexOf(J.Kt,R+1);return[(0,oe.nZ)(g.slice(0,R)),(0,oe.nZ)(g.slice(R+1,U)),(0,oe.nZ)(g.slice(U+1))]},N=(g,R,U)=>""+(0,oe.xd)(g)+J.Kt+(0,oe.xd)(R)+J.Kt+U,z=g=>{const R=g.indexOf(J.Kt),U=g.indexOf(J.Kt,R+1);return[(0,oe.nZ)(g.slice(0,R)),(0,oe.nZ)(g.slice(R+1,U)),g.slice(U+1)]},ce=g=>{const R={};for(const U of Object.keys(g)){if(!U.startsWith("b/"))continue;const ne=U.split("b/")[1],[ee,be,De,he]=g[U],[ge,ke,te,me,G]=ee.split(J.Kt),H={};te!==""&&(H.textAlign=k.parse(te)),me!==""&&(H.textIndent=(0,oe.nZ)(me)),G!==""&&G!==void 0&&(H.paraSpacing=(0,_e.Ci)(G)),R[ne]={text:be,type:Xe.parse(ge),depth:(0,oe.nZ)(ke),inlineStyleRanges:De.map(Z=>{const[ue,Te,He]=z(Z);return{offset:ue,length:Te,style:He}}),entityRanges:he.map(Z=>{const[ue,Te,He]=Je(Z);return{offset:ue,length:Te,key:He}}),data:H}}return R},Se=g=>{let{message:R}=g;const{blocks:U={},entityMap:ne={}}=R;return{...ye(U),...$e(ne)}},Ke=g=>({message:{blocks:ce(g),entityMap:we(g)}}),st=g=>({T:W.pack(g.type),IC:[(0,oe.xd)(g.index),(0,oe.hc)(g.ctime)].join(J.Kt)}),ot=g=>{const[R,U]=g.IC.split(J.Kt);return{type:W.parse(g.T),index:(0,oe.nZ)(R),ctime:(0,oe.sO)(U)}},qe=g=>({...st(g),R:g.refKey}),ct=g=>({...ot(g),refKey:g.R}),at=g=>({...st(g),...Se(g),xy:(0,_e.jq)(g.x,g.y),wh:(0,_e.jq)(g.w,g.h),z:(0,_e.DF)(g.z),userInfo:g.userInfo,userId:(0,_e.DF)(g.userId),mtime:(0,oe.hc)(g.mtime),isCompleted:(0,$.aY)(g.isCompleted),canvasVec2:g.canvasVec2?{x:(0,_e.DF)(g.canvasVec2.x),y:(0,_e.DF)(g.canvasVec2.y)}:g.canvasVec2,canvasCid:g.canvasCid,threadType:g.threadType}),_t=g=>{const[R,U]=(0,_e.dn)(g.xy),[ne,ee]=(0,_e.dn)(g.wh),be=g.canvasVec2?(0,_e.Ci)(g.canvasVec2.x):void 0,De=g.canvasVec2?(0,_e.Ci)(g.canvasVec2.y):void 0,he=(0,_e.Ci)(g.z);return{...ot(g),...Ke(g),x:R,y:U,w:ne,h:ee,z:he,mtime:(0,oe.sO)(g.mtime),userInfo:g.userInfo,userId:(0,_e.Ci)(g.userId),isCompleted:(0,$.YI)(g.isCompleted),canvasCid:g.canvasCid,threadType:g.threadType,canvasVec2:be&&De?{x:be,y:De}:void 0}},rt=g=>({...st(g),...Se(g),mtime:(0,oe.hc)(g.mtime),userInfo:g.userInfo}),pt=g=>({...ot(g),...Ke(g),mtime:(0,oe.sO)(g.mtime),userInfo:g.userInfo}),Et=g=>{try{switch(g.T){case void 0:return g;case Y:return ct(g);case re:return _t(g);case Le:return pt(g);default:throw new Error("invalid attr: "+g.T+" -> "+W.parse(g.T))}}catch(R){throw(0,o.Q)("toP2CHA badDat",R,g),R}},yt=g=>{try{switch(g.type){case void 0:return g;case"cCmtPack":return qe(g);case"cCmtThread":return at(g);case"cCmtContent":return rt(g);default:throw new Error("invalid attr: "+g.type)}}catch(R){throw(0,o.Q)("toP2CCA badDat",R,g),R}};var Pt=t(9390);const Ot=(g,R)=>{const U=he=>{const ge=g(he);return ge===void 0?[]:ge.sub.map(ke=>g(ke))},ne=(0,Pt.Ir)(he=>he.sub.map(ge=>g(ge))),ee=(he,ge)=>{const ke=g(he);ke!==void 0&&(ge(ke)||ke.sub.length!==0&&ne(ke,ge))};return{getHotItem:g,getSubHotItemList:U,walkHotItemSubtree:ee,isTrashed:he=>(0,A.z4)(he,R.getFlatTree()),__devHotTree:function(he){he===void 0&&(he=A.$3);const ge=new Map,ke=te=>{let me=ge.get(te);return me===void 0&&ge.set(te,me={}),me};return ee(he,te=>{ke(te.sup)[te.key]=te.hotAttr,te.sub.length!==0&&(ke(te.sup)[te.key+" SUB"]=ke(te.key))}),ke(g(he).sup)}}};var At=t(53705),It=t(93834),ln=t(96293),ut=t(2150),_n=t(60264);const an=(g,R,U)=>{const ne=G=>{if(G===void 0||G.length===0)return;const H=new Set;for(const ue of G)H.add(ue.key),ue.type==="I"&&H.add(ue.keySup);const Z=(0,A.O2)([...H].filter(A.w3),U.getFlatTree());g({type:_n.K,payload:Z})},ee=G=>{const H=[],Z=G(H);return ne(U.applyDiff(H)),Z},be=G=>ee(H=>{const Z=[],ue=G(Z);for(const Te of Z)Te.type==="update"?ke(Te.hotItem,H):Te.type==="delete"&&te(Te.key,H);return ue}),De=function(){const G=[],H=[];let Z,ue=!1;for(var Te=arguments.length,He=new Array(Te),Ze=0;Ze<Te;Ze++)He[Ze]=arguments[Ze];for(const Ae of He){Z=Ae(G);const je=U.applyDiff(G);je!==void 0&&(H.push(...je),ue?U.combineLastUndo():ue=!0)}return ne(H),Z},he=function(){for(var G=arguments.length,H=new Array(G),Z=0;Z<G;Z++)H[Z]=arguments[Z];const ue=H.map(Te=>He=>{const Ze=[],Ae=Te(Ze);for(const je of Ze)je.type==="update"?ke(je.hotItem,He):je.type==="delete"&&te(je.key,He);return Ae});return De(...ue)},ge=(G,H)=>{for(const Z of Object.keys(G)){const ue=G[Z],Te=H[Z];ue!==Te&&(0,At.$N)(ue)&&(0,At.$N)(Te)&&JSON.stringify(ue)===JSON.stringify(Te)&&(G[Z]=Te)}},ke=(G,H)=>{const Z=(0,A.c6)(G.key,U.getFlatTree());if(Z===void 0)H.push({type:ut.P6,key:G.key,keySup:G.sup}),H.push({type:ut.q$,key:G.key,attrDiff:yt(G.hotAttr)});else{Z.sup!==G.sup&&H.push({type:ut.P6,key:G.key,keySup:G.sup});const ue=yt(G.hotAttr);ge(ue,Z.attr);const Te=(0,ln.O)(ue,Z.attr);Te!==void 0&&H.push({type:ut.q$,key:G.key,attrDiff:Te})}},te=(G,H)=>{U.getFlatItem(G)&&H.push({type:ut.P6,key:G,keySup:A.bx})},me=(G,H,Z)=>{U.getFlatItem(G)&&U.getFlatItem(H)&&Z.push({type:ut.P6,key:G,keySup:H})};return{_edit:ee,_editAction:be,_editBatch:De,_editActionBatch:he,onRemotePatchList:G=>{const H=[];for(const Z of G){const ue=U.applyDiffNoUndo(Z.diffList,Z.clock);ue!==void 0&&H.push(...ue)}ne(H)},updateHotItem:G=>ee(H=>{ke(G,H)}),updateHotItemBatch:G=>ee(H=>{for(const Z of G)ke(Z,H)}),deleteHotItem:G=>ee(H=>{te(G,H)}),deleteHotItemBatch:G=>ee(H=>{for(const Z of G)te(Z,H)}),moveHotItem:(G,H)=>ee(Z=>{me(G,H,Z)}),moveHotItemBatch:G=>ee(H=>{for(const[Z,ue]of G)me(Z,ue,H)}),editHotItemBatch:G=>ee(H=>{for(const Z of G)Z.type==="update"?ke(Z.hotItem,H):Z.type==="delete"&&te(Z.key,H)}),updateHotAttrMerge:(G,H)=>ee(Z=>{const ue=R(G);if(ue===void 0)throw new Error("no item: "+G);ke((0,It.iA)(ue,"hotAttr",{...ue.hotAttr,...H}),Z)}),updateHotAttrKV:(G,H,Z)=>ee(ue=>{const Te=R(G);if(Te===void 0)throw new Error("no item: "+G);ke((0,It.iA)(Te,"hotAttr",(0,It.iA)(Te.hotAttr,H,Z)),ue)}),canUndo:U.canUndo,canRedo:U.canRedo,combineMergeMark:U.combineMergeMark,combineMerge:U.combineMerge,undo:()=>{ne(U.undo())},redo:()=>{ne(U.redo())}}},un=g=>{const R=(0,E.Dt)(),U=R.subscribe,ne=R.unsubscribe,ee=Kt(g),be=Ot(ee,g),De=()=>mn(g.getFlatTree),he=an(R.send,ee,g),{_edit:ge,_editAction:ke,_editBatch:te,_editActionBatch:me,...G}=he;return{subscribe:U,unsubscribe:ne,...be,createRoCmtStore:De,...G}},Kt=g=>R=>{const U=g.getFlatTree().get(R);if(U===void 0)return;const ne=g.getOCache(U);return ne.hotItem===void 0&&(ne.hotItem={key:U.key,sup:U.sup,sub:U.sub,hotAttr:Et(U.attr)}),ne.hotItem},mn=g=>{const R=(0,le.A)(g(),(0,O.LQ)({})),U=()=>R.getFlatTree()!==g(),ne=()=>R.sync(g()),ee=Kt(R),be=Ot(ee,R);return{hasUpdate:U,syncUpdate:ne,...be}};var pn=t(70177),dn=t(31810),Bt=t(2022),hn=t(3233);const fn=g=>g.join(Bt.ox),gn=g=>g.split(Bt.ox),Vn=g=>[...g,""].join(SEP_LINE),Ht=g=>g.split(Bt.ox).filter(Boolean),yn=g=>{const R=[],U=new Set;for(let ne=g.length-1;ne>=0;ne--){const ee=g[ne],{clock:be,diffList:De}=(0,ut.G8)(ee),he=[];for(const ge of De.reverse()){if(ge.type===ut.q$){const ke=Object.keys(ge.attrDiff);if(ke.length<=4){const te=ge.key+"|"+ke.join("\0");if(U.has(te))continue;U.add(te)}}he.unshift(ge)}he.length!==0&&R.unshift((0,ut.ZC)({clock:be,diffList:he}))}return R},En=4*1024*1024,bn=g=>{let R=0,U=[];const ne=[U];for(const ee of g)R+=ee.length,U.push(ee),R>=En&&(R=0,U=[],ne.push(U));return ne},Rt=(g,R)=>{const{diffList:U,clock:ne}=(0,ut.G8)(R);return(0,hn.IV)(g,U,ne,void 0)};var wt=t(82940);const Vt=async function(g,R){return R===void 0&&(R={}),Jt("/flpak/w-pakget/"+g+"?"+new URLSearchParams(Zt(R)),g)},Jn=async function(g,R){return R===void 0&&(R={}),Jt("/local/flpak/w-pakget/"+g+"?"+new URLSearchParams(Zt(R)),g)},Jt=async(g,R)=>{const U=await fetch(g);if(U.status!==200){const He=await U.text();throw Object.assign(new Error("error fetch flpak: "+g+" ["+U.status+"] "+He),{status:U.status})}const ne=await U.arrayBuffer(),[ee,be]=(0,pn.qV)(ne),De=(0,dn.CZ)(ee),he=ne.slice(be),[ge,ke,te,me,G]=JSON.parse(De),H=Mn(he,G),Z=ge===null?void 0:{t10s:ge[0],size:ge[1],tre:H.shift()},ue=[];for(const[He,Ze]of ke)ue.push({t10s:He,size:Ze,pbx:H.shift()});const Te=[];for(const He of te)Te.push({t10s:He,pch:new TextDecoder().decode(H.shift())});return console.log("Flpak: "+R+"@"+new Date(me).toISOString()+", tre: "+((Z==null?void 0:Z.size)||0)+"B, pbx: #"+ue.length+"/"+ue.reduce((He,Ze)=>{let{size:Ae}=Ze;return He+Ae},0)+"B, pch: #"+Te.length+"/"+Te.reduce((He,Ze)=>{let{pch:Ae}=Ze;return He+Ae.length},0)+"B"),[Z,ue,Te,new Date(me)]},Zt=g=>(0,It.lw)(g,R=>!!R),Mn=function(g,R,U){return U===void 0&&(U=0),R.map(ne=>{const ee=g.slice(U,U+ne);return U+=ne,ee})},Cn=g=>{let[R,U,ne]=g;const ee=(0,A.Z0)((0,wt.rm)(R.tre));for(const{pbx:be}of U){const De=(0,wt.rm)(be);for(const he of Ht(De))Rt(ee,he)}for(const{pch:be}of ne)Rt(ee,be);return ee};var kn=t(30388);const Pn=g=>{const[R,U,ne]=g,ee=()=>(0,A.Z0)((0,wt.rm)(R.tre)),be=function(te){te===void 0&&(te=-1);const me=[];for(const{pbx:G,t10s:H}of U){if(H<te)continue;const Z=(0,wt.rm)(G);for(const ue of Ht(Z))me.push(ue)}for(const{pch:G,t10s:H}of ne)H<te||me.push(G);return me},De=function(te){te===void 0&&(te=-1);const me=[];for(const G of be(te))me.push((0,ut.G8)(G));return me},he=function(te){te===void 0&&(te=-1);const me=[];for(const G of be(te)){const{clock:H,diffList:Z}=(0,ut.G8)(G);me.push([(0,O.I_)(H).slice(5),Z,G])}return me};return{getParsedTre:ee,getPchList:be,getPatchList:De,getReadablePatchList:he,filterReadablePatchList:function(te,me){return me===void 0&&(me=-1),he(me).filter(G=>{let[,H,Z]=G;return Z.includes(te)})},getMergedReadablePatchList:function(te,me){te===void 0&&(te=-1),me===void 0&&(me=16);const G=[];let H={timePrefix:"",countDI:0,countDA:0,userIdSet:new Set};const Z=ue=>{H.timePrefix!==ue&&(H.timePrefix!==""&&G.push(H.timePrefix.slice(5)+"..Z I*"+(H.countDI||"-")+" A*"+(H.countDA||"-")+" ["+[...H.userIdSet].join(",")+"]"),H={timePrefix:ue,countDI:0,countDA:0,userIdSet:new Set})};for(const{clock:[ue,Te],diffList:He}of De(te)){const Ze=new Date(ue).toISOString().slice(0,me);Z(Ze),H.userIdSet.add(Te);for(const{type:Ae}of He)Ae===ut.P6?H.countDI++:H.countDA++}return Z(""),G},flpak:g}},Yt=g=>Math.floor(g/10/1e3),wn=g=>{const[R]=(0,ut.$i)(g);return Yt(R)},Tn=g=>{let[R,U,ne]=g;return ne.length!==0?ne[ne.length-1].t10s:U.length!==0?U[U.length-1].t10s:R.t10s};var Lt=t(50781);const jt=(g,R)=>{let U=!1,ne=0,ee=0;const be=new Map;let De=[],he,ge,ke,te;const me=()=>{ge===void 0&&console.log("sync|onSocketConnect")},G=Pe=>{let[Be,,ze]=Pe;if(Be!==g)return!1;const Fe=gn(ze);for(const nt of Fe)De.push([nt,wn(nt),!1]);return ke!==void 0&&ke(Fe.map(nt=>(0,ut.G8)(nt))),!0},H=async(Pe,Be)=>{if(ge!==void 0)throw new Error("no re-init flatStore");he=Pe,te=Be;const ze=await te(g);{const Qe="INSP-INIT-FLPAK";location.hash.includes(Qe)&&Object.assign(globalThis,{[Qe+"/"+g]:{...Pn(ze),__flpakKey:g,__name:R}})}ne=Tn(ze);const Fe=Cn(ze);let nt=A.DO;{const Qe="BYPASS-FLPAK";location.hash.includes(Qe)&&(nt=V=>console.warn("["+Qe+"|vFT]",V))}for(const[Qe,V,Re]of De)!Re&&ne>=V||Rt(Fe,Qe);nt(Fe),ge=(0,le.A)(Fe,Pe,(Qe,V,Re)=>{if(U&&console.log("flat|onPatch",{diffList:Qe,clock:V,isLocal:Re}),De.push([(0,ut.ZC)({diffList:Qe,clock:V}),Yt(V[0]),Re]),Re)return;const[bt,ft,Ct,St]=V;ee=Math.max(ee,bt);const kt=(0,O.kY)(ft,Ct);if(he.selfCCK===kt)throw new Error("unexpected selfCck: "+kt);const Tt=be.get(kt)||-1;if(Tt>=St)throw new Error("bad editId for cck: "+kt+", last: "+Tt+", new: "+St);be.set(kt,St)},(Qe,V)=>{console.log("flat|requestResync",{error:Qe,message:V})}),ke=Qe=>{for(const V of Qe)ge.applyDiffNoUndo(V.diffList,V.clock)}},Z=Pe=>{ke=Pe},ue=()=>he,Te=()=>ge,He=async function(Pe){Pe===void 0&&(Pe="");try{if(!ge||!ne||!je())return;const Be=ge.getFlatTree(),ze=(0,A.Z7)(Be),Fe=(0,wt.Ph)(ze);await(0,Lt.au)("//FSS/"+R+"/"+g,new Blob([Fe],{type:"application/octet-stream"}),{message:Pe,treRawSize:ze.length,treSize:Fe.byteLength})}catch(Be){console.warn("saveSOS",Pe,Be)}},Ze=async()=>{try{const Pe=await(0,Lt.IF)("//FSS/"+R+"/"+g);if(Pe.length){console.warn("[loadSOS] found "+Pe.length+" record");const{data:Be,extra:ze}=Pe[0];console.warn("[loadSOS] load record from "+new Date(ze.time).toISOString());const Fe=await(0,kn.H)(Be),nt=(0,wt.rm)(Fe);console.warn("[loadSOS] record treRaw: "+nt.length+" / "+ze.treRawSize);const Qe=(0,A.Z0)(nt);return console.warn("[loadSOS] record tree: "+Qe.size),{tree:Qe,...ze}}}catch(Pe){console.warn("loadSOS",Pe)}},Ae=async()=>{try{return await(0,Lt.Af)("//FSS/"+R+"/"+g)}catch(Pe){console.warn("freeSOS",Pe)}},je=()=>{for(const[,,Pe]of De)if(Pe)return!0;return!1};return{flpakKey:g,name:R,__setIsDev:Pe=>{U=Pe},onSocketConnect:me,onRemotePayloadSave:G,bind:H,useExtORPL:Z,getClockStore:ue,getFlatStore:Te,saveSOS:He,loadSOS:Ze,freeSOS:Ae,hasPatch:je,preSettlePatch:()=>{const Pe=[];for(const[Be,,ze]of De)ze&&Pe.push(Be);return Pe},postSettlePatch:Pe=>{De=De.filter(Be=>{let[ze,Fe,nt]=Be;return!nt||!Pe.includes(ze)})}}},vn=(g,R)=>{let U,ne;return{flpakKey:g,name:"[DUMMY]"+R,__setIsDev:ee=>{},onSocketConnect:()=>{},onRemotePayloadSave:ee=>{let[be,,De]=ee;return!1},bind:async(ee,be)=>{if(ne!==void 0)throw new Error("no re-init flatStore");U=ee,ne=(0,le.A)((0,A.ZR)(),ee)},useExtORPL:ee=>{},getClockStore:()=>U,getFlatStore:()=>ne,saveSOS:async ee=>{},loadSOS:async()=>{},freeSOS:async()=>0,hasPatch:()=>!1,preSettlePatch:()=>[],postSettlePatch:ee=>{}}};var On=t(91458);const Sn=_e.jq,xn=_e.dn,Dn=g=>{const R=new Map;let U=!1,ne,ee=()=>"";const be=()=>{R.clear(),ge()};let De=0;const he=Ae=>{const je={socketId:Ae,index:De++,lastCurAt:0,cur:void 0,lastStatAt:0,stat:void 0};return R.set(Ae,je),je},ge=(0,d.My)(async()=>{if(await(0,y.Kb)(2*1e3),ne===void 0)return;const Ae=[];for(const{socketId:Ye,lastStatAt:et}of R.values())et!==0&&Ae.push(Ye);const je=await ne([g,Ae]);for(const[Ye,et,Pe]of je){const Be=R.get(Ye)||he(Ye);Be.lastStatAt=Date.now(),Be.stat=[et,Pe]}G=3}).trigger,ke=Ae=>{let[je,Ye,et]=Ae;const[Pe,Be]=xn(et),ze=[Pe,Be,Ye],Fe=R.get(je)||he(je);Fe.lastCurAt=Date.now(),Fe.cur=ze,Fe.lastStatAt===0?ge():U=!0},te=Ae=>{let[je,Ye]=Ae;const et=R.has(Ye);je===0&&et?R.delete(Ye):je===1&&!et&&(he(Ye),ge())};let me=["",NaN,NaN],G=0;const H=function(Ae){Ae===void 0&&(Ae=me[0]);for(const{socketId:je,cur:Ye}of R.values())if(Ye&&Ye[2]===Ae&&je!==ee())return!0;return!1};return{flpakKey:g,__curStatMap:R,onSocketConnect:be,onRemoteCur:ke,onRemoteSocket:te,hasOtherUser:H,tryPackCur:function(Ae,je,Ye){if(je===void 0&&(je=_e.nl),Ye===void 0&&(Ye=_e.nl),!(R.size<2)){if(me[0]!==Ae)G=3;else if(!G&&me[0]===Ae&&me[1]===je&&me[2]===Ye)return;if(me=[Ae,je,Ye],!(!H(Ae)&&!G))return G&&G--,[g,Ae,Sn(je,Ye)]}},bind:async(Ae,je)=>{if(ne!==void 0)throw new Error("no re-init flatStore");ne=Ae,ee=je,ge()},getSocketStat:()=>{const Ae=ee(),je=[];for(const{socketId:Ye,stat:et}of R.values()){if(et===void 0)continue;const[Pe,Be]=et;Ae===Ye?je.unshift([Ye,Pe,Be]):je.push([Ye,Pe,Be])}return je},getCurStat:Ae=>{const je=ee(),Ye=[];for(const{socketId:et,index:Pe,cur:Be,stat:ze}of R.values()){if(je===et||Be===void 0||ze===void 0)continue;const[Fe,nt,Qe]=Be;if(Qe!==Ae||Fe===_e.nl)continue;const[V,Re]=ze;Ye.push([Pe,Fe,nt,V,Re])}return Ye},pollChange:()=>U?(U=!1,!0):!1}},An=g=>({flpakKey:g,onSocketConnect:()=>{},onRemoteCur:te=>{let[me,G,H]=te},onRemoteSocket:te=>{let[me,G]=te},hasOtherUser:te=>!1,tryPackCur:(te,me,G)=>{},bind:async(te,me)=>{},getSocketStat:()=>[],getCurStat:te=>[],pollChange:()=>!1}),Xt=()=>{};let $t=!1;const In=g=>{$t=g},Qt="dat",Bn="cmt",Rn="mkt:dat",Ln=async g=>{let{flpakKey:R,userId:U,uTag:ne,token:ee,passwd:be,isDummyCmt:De=!1,isAllowDat:he=!1,isAllowCmt:ge=!1,isAllowCur:ke=!1,afterStoreCreate:te=Xt,__fetchFlpakAsync:me=Vt,onTransferError:G=Xt,onReadOnlyError:H=function(V,Re){return Re===void 0&&(Re=""),console.warn(V,Re)}}=g;const Z=jt(R,Qt),ue=(De?vn:jt)((0,On.a6)(R),Bn),Te=(ke?Dn:An)(R);await te({fssDat:Z});const He=async(V,Re)=>{await Z.saveSOS("OTE|"+V+"|"+Re),await G(V,Re)},Ze=U?C({query:{uId:String(U),uTag:ne},usePolling:$t,lossyListenerMap:{[c.GF]:V=>{const{payload:Re}=V;Te.onRemoteCur(Re)}},queueListenerMap:{[c.E$]:V=>{const{error:Re}=V;console.log("flat-ws drop-client",Re),He("4XX",Re)},[c.Rm]:V=>{const{error:Re}=V;console.log("flat-ws error",Re),He("5XX",Re)},[c.FC]:()=>{console.log("flat-ws (re)connected"),Z.onSocketConnect(),ue.onSocketConnect(),Te.onSocketConnect()},[c.nB]:V=>{const{payload:Re}=V;console.log("flat-ws save:",Re),Z.onRemotePayloadSave(Re)||ue.onRemotePayloadSave(Re)||console.log("drop save payload:",Re)},[c.FK]:V=>{const{payload:Re}=V;console.log("flat-ws room cursor:",Re),Te.onRemoteSocket(Re)}}}):I();await Promise.all([(async()=>{await Ze.getReadyPromise()})(),(async()=>{await Ze.reqRoomAsync([he?[R]:[],ge?[R]:[],ke?[R]:[]])})()]);const Ae=async(V,Re,bt)=>{try{return await me(V,{token:ee,passwd:be,skipTTre:String(Re||""),skipTPbxList:(bt||[]).join("")})}catch(ft){const Ct=Nt(ft);throw(0,o.Q)("fFS "+Ct,ft),await He(Ct,ft),ft}};await Promise.all([Z.bind((0,O.LQ)({userId:U,mtimeOffset:Ze.getOffsetMsec()}),Ae).catch(V=>{throw(0,o.Q)("bindDat",V),V}),ue.bind((0,O.LQ)({userId:U,mtimeOffset:Ze.getOffsetMsec()}),Ae).catch(V=>{throw(0,o.Q)("bindCmt",V),V}),Te.bind(async V=>await Ze.emitAsync(c.tE,V),Ze.getSocketId).catch(V=>{throw(0,o.Q)("bindCur",V),V})]);const je=new Error("[tracked-error]"),Ye=async(V,Re)=>{if(!V.hasPatch())return;const bt=V.preSettlePatch(),ft=bn(yn(bt));Re!==!0&&(H(V.name===Qt?"Dat":"Cmt","RO|"+V.name+"|"+V.flpakKey+" #"+bt.length),ft.length=0);for(let Ct=0,St=ft.length;Ct<St;Ct++){const kt=ft[Ct];try{await Ze.emitAsync(c.Tm,[V.flpakKey,kt.length,fn(kt)])}catch(Tt){const Ft=Nt(Tt);throw(0,o.Q)("saveFss "+Ft,Tt,V.name,V.flpakKey,Ct+1+"/"+St,kt),await He(Ft,Tt),je}}V.postSettlePatch(bt)},et=(0,d.My)(async()=>(0,d.n7)(async()=>{await Ye(Z,he),await Ye(ue,ge),await Z.freeSOS(),!Te.hasOtherUser()&&await(0,y.Kb)(5*1e3)},42*1e3),V=>{if(V===je)return;const Re=Nt(V);(0,o.Q)("lFFss "+Re,V),Promise.resolve(He(Re,V)).catch(bt=>{(0,o.Q)("lFFss "+Re+" Err",bt)})});setInterval(et.trigger,2*1e3),ke&&setInterval(()=>Te.onSocketConnect(),20*60*1e3);const Pe=Z.getFlatStore(),Be=(0,X.p)(Z.getFlatStore());Z.useExtORPL(Be.onRemotePatchList);const ze=un(ue.getFlatStore());ue.useExtORPL(ze.onRemotePatchList);const Fe=()=>Z.hasPatch()||ue.hasPatch(),nt=(0,d.zH)(async()=>(0,d.rP)(async()=>{let V=0;for(;Fe();)et.trigger(),await et.getRunningPromise(),await(0,y.Kb)(Math.max(V*.5,5)*1e3),V++})),Qe=()=>globalThis.MB.getSelectionItems()[0].key;return{fssDat:Z,fssCmt:ue,cssCur:Te,flatSocket:Ze,flatStore:Pe,sdkStore:Be,cmtStore:ze,sendCur:(V,Re,bt)=>{if(ke===!0){const ft=Te.tryPackCur(V,Re,bt);ft&&Ze.emitLossy(c.sv,ft)}else ke==="RO"&&H("Cur","")},hasSave:Fe,saveAsync:nt,triggerSave:V=>{et.trigger(),V&&nt().then(V)},triggerFlushLocalPatch:et.trigger,theTree:function(V){return V===void 0&&(V=A.$3),console.log((0,A.im)(Pe.getFlatTree(),V))},hotTree:function(V){return V===void 0&&(V=A.$3),console.log(Be.__devHotTree(V))},slctTree:function(V){return V===void 0&&(V=Qe()),console.log(Be.__devHotTree(V))},upTree:function(V,Re){return V===void 0&&(V=Qe()),Re===void 0&&(Re=A.$3),console.log(Be.findUpHotItemList(V,Re))},cmtTree:function(V){return V===void 0&&(V=A.$3),console.log(ze.__devHotTree(V))}}},Nt=g=>{const R=g&&g.status;return R>=400&&R<500?"4XX":String(g).toLowerCase().includes("timeout")?"Tot":"5XX"},jn=async g=>{let{flpakKey:R,token:U,passwd:ne}=g;const ee=jt(R,Rn),be=async(ge,ke,te)=>Vt(ge,{token:U,passwd:ne,skipTTre:String(ke||""),skipTPbxList:(te||[]).join("")});await ee.bind((0,O.LQ)({}),be);const De=ee.getFlatStore(),he=(0,X.p)(ee.getFlatStore());return{fssDat:ee,flatStore:De,sdkStore:he}}},91458:(B,L,t)=>{"use strict";t.d(L,{a6:()=>b,cQ:()=>y});const d="_cmt",y=E=>E.endsWith(d),b=E=>{if(y(E))throw new Error("bad datKey: "+E);return""+E+d},h=E=>{if(!y(E))throw new Error("bad cmtKey: "+E);return E.slice(0,-d.length)},i="_cur",l=E=>E.endsWith(i),w=E=>{if(l(E))throw new Error("bad datKey: "+E);return""+E+i},m=E=>{if(!l(E))throw new Error("bad curKey: "+E);return E.slice(0,-i.length)}},36831:(B,L,t)=>{"use strict";t.d(L,{LP:()=>M,Zr:()=>I,_Q:()=>F,i$:()=>s,uL:()=>v});var d=t(52787),y=t(66234),b=t(80693),h=t(6013),i=t(98336),l=t(52730),w=t(49651),m=t(21630),E=t(91320);const c={left:0,right:1},o=(0,m.$)("placement",c),_=a=>{let{image:{imageRef:C,imageRectWidth:D,imageRectHeight:O}}=a;return{imgP:(0,E.jq)(D,O),imgR:C}},r=a=>{let{imgP:C,imgR:D}=a;const[O,A]=(0,E.dn)(C);return{image:{imageRef:D,imageRectWidth:O,imageRectHeight:A}}},s=(a,C)=>{a.imgR&&C(a.imgR,"rResExtImage")},M=(a,C)=>a,v=a=>({...(0,d.om)(a),exp:(0,b.aY)(a.expand),od:(0,y.xd)(a.order),icn:a.icon,ir:(0,b.aY)(a.isRoot),...(0,i.JY)(a),...(0,h.WW)(a),fill:(0,l.Wl)(a.fill),...(0,w.fh)(a),pla:o.pack(a.placement),..._(a)}),F=a=>({...(0,d.BV)(a),type:"wMindNode",expand:(0,b.YI)(a.exp),order:(0,y.nZ)(a.od),icon:a.icn,isRoot:(0,b.YI)(a.ir),...(0,i.tK)(a),...(0,h.T7)(a),...(0,w.m7)(a),fill:(0,l.ie)(a.fill),placement:o.parse(a.pla),...r(a)}),I=function(a,C,D,O,A,X,le,_e,oe,J,Ee,de,Ue,W){return C===void 0&&(C=""),D===void 0&&(D=!1),O===void 0&&(O=0),A===void 0&&(A=4294967295),X===void 0&&(X="#000000"),le===void 0&&(le=5),_e===void 0&&(_e=!0),oe===void 0&&(oe=""),J===void 0&&(J="right"),Ee===void 0&&(Ee=0),de===void 0&&(de=0),Ue===void 0&&(Ue=0),W===void 0&&(W=0),{type:"wMindNode",name:a,zIndex:le,x:Ee,y:de,r:0,w:0,h:0,opacity:1,isLock:!1,isVisible:!0,isLockAspect:!1,fixPosTo:"none",interactions:[],expand:_e,order:O,icon:oe,isRoot:D,richTextV1:{fontFamily:"PingFangSC",fontWeight:"regular",fontSize:14,textColor:"",sizeType:0,fontDirection:"horizontal-tb",letterSpacing:0,lineHeight:20,paraSpacing:5,underline:!1,strikethrough:!1,italic:!1,bold:!1,verticalAlign:"flex-start",horizontalAlign:"left",padding:0},textV1:{blocks:{[""+X]:{text:C,type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}}},entityMap:{}},fill:{fillIsVisible:!1,fill:"solid",solidColor:A},border:{bdrIsVisible:!1,bdrColor:3149642751,bdrWidth:1,bdrStyle:"solid"},placement:J,image:{imageRef:"",imageRectWidth:0,imageRectHeight:0}}}},28415:(B,L,t)=>{"use strict";t.d(L,{Uk:()=>m,Yq:()=>l,bf:()=>E,y6:()=>w});var d=t(52787),y=t(52730),b=t(49651),h=t(74516),i=t(6013);const l=c=>({...(0,d.om)(c),fill:(0,y.Wl)(c.fill),...(0,b.TG)(c),...(0,i.UX)(c),...(0,h.tM)(c)}),w=c=>({...(0,d.BV)(c),fill:(0,y.ie)(c.fill),...(0,b.JJ)(c),...(0,i.KC)(c),...(0,h.Y5)(c),type:"wTable"}),m=function(c,o,_,r,s,M,v){return o===void 0&&(o=10),_===void 0&&(_=160),r===void 0&&(r=60),s===void 0&&(s=320),M===void 0&&(M=120),v===void 0&&(v={columns:Array(4).fill({type:"text",width:80}),rows:Array(4).fill({height:30}),cellStyles:Array(4).fill(Array(4).fill("")),mergeCells:{},data:Array(4).fill(Array(4).fill("")),links:Array(4).fill(Array(4).fill(""))}),{type:"wTable",name:c,zIndex:o,x:_,y:r,r:0,w:s,h:M,opacity:1,isLock:!1,isVisible:!0,isLockAspect:!1,fixPosTo:"none",interactions:[],textV0:{text:"",textColor:269488383,italic:!1,bold:!1,textDecoration:"normal",verticalAlign:"center",horizontalAlign:"center",fontSize:14,lineHeight:20,padding:8},borderRadius:0,border:{bdrIsVisible:!0,bdrColor:3149642751,bdrWidth:1,bdrStyle:"solid"},borderVisibility:{bdrIsVisibleT:!0,bdrIsVisibleL:!0,bdrIsVisibleB:!0,bdrIsVisibleR:!0},fill:{fillIsVisible:!0,fill:"solid",solidColor:4294967295},tableData:v,tableConfig:{innerBorderV:{bdrIsVisible:!0,bdrColor:3149642751,bdrWidth:1},innerBorderH:{bdrIsVisible:!0,bdrColor:3149642751,bdrWidth:1},outerBorder:{bdrIsVisible:!0,bdrColor:3149642751,bdrWidth:1},rowCount:4,colCount:4,styleType:0,...E({height:M,width:s,columns:v.columns,rows:v.rows})}}},E=c=>{let{height:o,width:_,columns:r,rows:s}=c;const M=[],v=[];return r.forEach(F=>v.push(F.width/_)),Object.values(s).forEach(F=>M.push(F.height/o)),{widthProportion:v,heightProportion:M}}},80263:(B,L,t)=>{"use strict";t.d(L,{Sr:()=>y});var d=t(73752);const y=i=>(0,d.Gf)("/api/payment/v4/coupon/workspace_guide_2203_coupon",{space_type:i}),b=()=>fetchGetJSON("/api/web/v3/initial"),h=i=>fetchPostJSON("/api/web/v3/account/workspace_guide_days",{org_cid:i})},35125:(B,L,t)=>{"use strict";t.d(L,{cr:()=>m,ff:()=>l,hS:()=>o,oE:()=>w});var d=t(6515),y=t(2150),b=t(49777),h=t(95060),i=t(44387);const l=(s,M)=>{let{key:v,sup:F,attr:I}=M;return s.push({type:y.P6,key:v,keySup:F}),s.push({type:y.q$,key:v,attrDiff:I}),s},w=s=>(0,b.dA)({type:"rResBunch",bunch:s}),m=function(s,M,v,F,I,a,C){return M===void 0&&(M=0),v===void 0&&(v="customize"),F===void 0&&(F=375),I===void 0&&(I=812),a===void 0&&(a="portrait"),C===void 0&&(C="vertical"),(0,b.pW)({type:"rResBunch",bunch:"rbPage",name:s,zIndex:M,icon:""+i.qX+i.UD+"0",asFolder:!1,device:v,deviceW:F,deviceH:I,deviceOrientation:a,deviceScroll:C,alignH:[],alignV:[],scroll:1,scrollWay:"none",layout:"row",w:F,h:I,defaultCanvasKey:"",deleteInfo:{deleteTime:0,deleteUserName:""},fill:{fillIsVisible:!1,fill:"solid",solidColor:4126537215},"!version":1})},E=function(s,M,v,F){M===void 0&&(M=0);let{x:I,y:a,w:C,h:D}=v;return F===void 0&&(F=1),packResCanvasAttr({type:"rResCanvas",name:s,zIndex:M,x:I,y:a,r:0,w:C,h:D,isLock:!1,isVisible:!0,isLockAspect:!0,isClipContent:!0,device:"customize",orientation:"portrait",stickyHeaderHeight:10,stickyFooterHeight:10,interactions:[],fill:{fillIsVisible:!0,fill:"solid",solidColor:4294967295},layoutGrid:{isGridLayout:!1,gridSize:10,isRowLayout:!1,rowHeight:10,rowGutter:10,isColLayout:!1,colCount:10,colGutter:10},alignH:[],alignV:[],order:F})},c={type:"extImage",key:"mockImageNode",hotAttr:{type:"rResExt",name:"\u793A\u4F8B\u56FE\u7247",zIndex:0,extData:"/res-img/org/hot/12.jpg",extType:"extImage"},sup:b.Q,sub:[]},o=s=>{const M=[];return l(M,{key:b.X3,sup:d.$3,attr:w("rbMain")}),l(M,{key:b.LT,sup:d.$3,attr:w("rbTrash")}),l(M,{key:b.Q,sup:d.$3,attr:w("rbExt")}),l(M,{key:b.Mp,sup:d.$3,attr:w("rbRefMuban")}),l(M,{key:b.dZ,sup:d.$3,attr:w("rbRefDanli")}),l(M,{key:b.T3,sup:d.$3,attr:w("rbRefMind")}),s.updateHotItem(c),M},_=s=>function(M){return M===void 0&&(M=KEY_MAIN),console.log(__devAttrFlatTree(s.getFlatTree(),M))},r=s=>function(M){return M===void 0&&(M=KEY_MAIN),console.log(s.__devHotTree(M))}},50397:(B,L,t)=>{"use strict";t.d(L,{E:()=>b});var d=t(73752);const y=()=>fetchGetJSON("/api/web/v3/guide/guide_data"),b=h=>(0,d._Z)("/api/web/v3/guide/workspace_guides",{guide:{workspace_guides:h}})},95485:(B,L,t)=>{"use strict";t.d(L,{$p:()=>oe,By:()=>Xe,V5:()=>Ge,Yo:()=>J,cN:()=>de});var d=t(3954),y=t(87587),b=t(35517),h=t(10404),i=t(38133),l=t(26886),w=t(74982),m=t(60074),E=t(49777),c=t(2150),o=t(30906),_=t(11685),r=t(2022),s=t(95060),M=t(35125),v=t(53092),F=t(67817),I=t(59729),a=t(43980),C=t(6515),D=t(66234),O=t(18890),A=t.n(O),X=t(60264),le=t(28016),_e=t(3175);ENV.IS_SKT_HTTP&&(0,h.lQ)(!0),(0,m.d)(a.uT,a.n_);const oe=async(k,Q)=>{console.warn("[onTransferError]",k,Q),k==="Tot"||k==="5XX"?MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:32*1e3,showClose:!0,priority:1,type:"error",svgName:"design/toast/offline"}):k==="4XX"&&Q&&/403/.test(Q.message)?MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.cant_edit,confirmText:I18N.dModule.exit_editing,desc:I18N.dModule.cant_edit_desc}).then(()=>MB.global.onBackButtonClick()):k==="4XX"&&Q&&/401/.test(Q.message)?(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,b.av)())):k==="4XX"?(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,b.av)())):await MB.global.popupHelper.alertAsyncBlocked({desc:window.I18N.dModule.unknown_error.replace(/%s/i,status),isHTML:!0})},J=async(k,Q)=>{console.warn("[onReadOnlyError]",k,Q),k!=="Cur"&&MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:5*1e3,showClose:!0,priority:1})},Ee=k=>{let{sendCur:Q}=k;const ie=(0,y.P2)(()=>{try{const ae=(0,l.UF)();if(!ae)return;const{current:{currentScreen:Oe},screencontainer:{cursorPos:se}}=ae,tt=Oe&&(Oe.cid||Oe.key);if(!tt)return;const{x:$e,y:we}=se||{};Q(tt,$e,we)}catch(ae){console.error("cssCur push error",ae)}},.05*1e3,!0);setInterval(ie,5*1e3),document.addEventListener("pointermove",ie,{passive:!0})},de=function(k,Q){var ie,ae,Oe,se,tt,$e,we,ye;Q===void 0&&(Q=rootSdk);const q=(0,l.UF)();if(!(!q||!MB.action)){if(q.rightnav.screenSelection[0]&&k.includes(q.rightnav.screenSelection[0])&&((ie=Q.sdkStore.getHotItem(q.rightnav.screenSelection[0]))==null?void 0:ie.sup)==="B@trash"&&(MB.action("entry:activate:root-project:home-screen"),MB.notice({text:"\u5F53\u524D\u9009\u4E2D\u753B\u5E03\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"})),q.mode.basketEditor.item&&k.includes(q.mode.basketEditor.item)&&((ae=Q.sdkStore.getHotItem(q.mode.basketEditor.item))==null?void 0:ae.sup)==="@@T"){var Je;MB.action("entry:exit:edit:basket"),MB.notice({text:"\u5F53\u524D\u7F16\u8F91\u52A8\u6001\u7EC4\u4EF6\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"}),k[1]&&((Je=Q.sdkStore.getSubHotItemList(k[1]))==null?void 0:Je.length)===0&&(MB.action("entry:exit:edit:basket"),k[0]&&Q.sdkStore.deleteHotItem(k[0]))}if(q.mode.basketEditor.refPage&&k.includes(q.mode.basketEditor.refPage)&&((Oe=Q.sdkStore.getHotItem(q.mode.basketEditor.refPage))==null?void 0:Oe.sup)==="@@T"){var N;if(MB.action("entry:exit:edit:basket"),MB.notice({text:"\u5F53\u524D\u7F16\u8F91\u6BCD\u7248\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"}),((N=Q.sdkStore.getSubHotItemList(q.mode.basketEditor.refPage))==null?void 0:N.length)===0){const ot=Q.sdkStore.findAllBasketFRBPage(q.mode.basketEditor.refPage);Q.sdkStore.deleteHotItemBatch([...ot.map(qe=>qe.key),q.mode.basketEditor.refPage])}}if(((se=Q.sdkStore.getHotItem(k[0]))==null?void 0:se.hotAttr.type)==="rResBunch"&&((tt=Q.sdkStore.getHotItem(k[0]))==null?void 0:tt.hotAttr.bunch)==="rbPage")if(!q.rightnav.screenDataMap[k])MB.action("entry:update:screen:list");else{const ot=q.rightnav.screenDataMap[k],qe=Q.sdkStore.getHotItem(k[0]);if(qe&&!A()(qe==null?void 0:qe.hotAttr,ot==null?void 0:ot.hotAttr)){var z,ce,Se;(ot==null||(z=ot.hotAttr)==null?void 0:z.name)!==(qe==null||(ce=qe.hotAttr)==null?void 0:ce.name)&&MB.action("entry:update:screen:list");const ct=q==null||(Se=q.current)==null?void 0:Se.currentPage;(ct==null?void 0:ct.cid)===(qe==null?void 0:qe.key)&&MB.action("entry:update:current:screen-mata",{screenMeta:{cid:qe==null?void 0:qe.key,sup:qe==null?void 0:qe.sup,sub:qe==null?void 0:qe.sub,...qe==null?void 0:qe.hotAttr},updateWidgetTreeData:!1})}}if(($e=q.table)!=null&&$e.selectTableCellInfo&&k[0]===((we=q.table)==null||(we=we.widget)==null?void 0:we.key)&&((ye=Q.sdkStore.getHotItem(k[0]))==null?void 0:ye.hotAttr.type)==="wTable")if(Q.sdkStore.isTrashed(k[0]))MB.action("entry:clear:selection"),MB.action("table:update:info",{selectTableCellInfo:null,isShowTableMenu:!1,widget:null,isEditTable:!1}),MB.f.isEditTable=!1;else{var Ke,st;const{selectionLeftTopInfo:{x:ot,y:qe},selectionRightBottomInfo:{x:ct,y:at}}=(Ke=q.table)==null?void 0:Ke.selectTableCellInfo,_t=Q.sdkStore.getHotItem(k[0]);if(_t!=null&&(st=_t.hotAttr)!=null&&st.tableData){const{hotAttr:{tableData:{columns:rt,rows:pt}}}=_t;let Et=ot,yt=qe,Pt=ct,Ot=at;ot>rt.length-1&&(Et=rt.length-1),ct>rt.length-1&&(Pt=rt.length-1),qe>pt.length-1&&(yt=pt.length-1),at>pt.length-1&&(Ot=pt.length-1);const At={...q.table.widget,..._t.hotAttr};(0,le.G)({widget:At,x1:Et,y1:yt,x2:Pt,y2:Ot})}}MB.action("entry:rebuild:screen-widget-tree")}},Ue=(0,y.P2)(k=>{de(k)},.5*1e3),W={repaint:k=>{let{type:Q,payload:ie}=k;Q===w.K&&Ue(ie)}},Y=(0,y.P2)(()=>{!(0,l.UF)()||!MB.action||MB.action("entry:comment:rebuild:commentList")},.5*1e3),re={repaint:k=>{let{type:Q,payload:ie}=k;Q===X.K&&Y()}},Le=async k=>{let{projectBasicCid:Q}=k;try{const{userId:ie,flatKey:ae}=await fetchGetJSON("/api/flat/web_v1/proj2-edit-info?prj2Cid="+Q);return{userId:ie,flatKey:ae}}catch(ie){await apiErrorModals(ie)}},Me={iphone_14_pro_max:54,iphone_14_pro:54,iphone_13_pro_max:44,iphone_13_pro:44,iphone_11_pro_max:44,iphone_11_pro:44,iphone_8_plus:20,iphone_8:20,Huawei_p8:24,Huawei_p40:24,google_pixel_2:24,google_pixel_2_xl:24,ipad_mini:24,ipad_pro_11:24,ipad_pro_12:24},Ge=k=>{let Q=!1,ie=!1,ae="";if(k.hotAttr.device==="customize"){for(const se of["android","iphone","ipad"])for(const[tt,$e]of Object.entries(d[se]))if($e.height===k.hotAttr.h&&$e.width===k.hotAttr.w){if(Q=!0,ae=se,se==="iphone"||se==="ipad"){const we=d.iphone.iphone_8,ye=d.iphone.iphone_8_plus;we.width===k.hotAttr.w&&we.height===k.hotAttr.h||ye.width===k.hotAttr.w&&ye.height===k.hotAttr.h?ie=!1:ie=!0}break}}else for(const se of["android","iphone","ipad"])if(d[se][k.hotAttr.device]){Q=!0,ae=se,(se==="iphone"||se==="ipad")&&(["iphone_8","iphone_8_plus"].includes(k.hotAttr.device)||(ie=!0));break}let Oe;if(Q){Oe=[];let se;ae==="ipad"||ae==="iphone"?se=o._.wIphoneXSB(I18N.w.wIphoneXSB):se=o._.wAndroidSB(I18N.w.android_status_bar),se.h=Me[k.hotAttr.device]||44,se.w=k.hotAttr.w,se.x=k.hotAttr.w/2,se.y=se.h/2,se.zIndex=6,se.fixPosTo="top";const tt={key:(0,r.Tl)(),hotAttr:se,sup:k.key,sub:[]};Oe.push(tt)}if(ie){let se=o._.wRect(I18N.w.tab_bar);se={...se,zIndex:7,fixPosTo:"bottom",fill:{fillIsVisible:!0,fill:"solid",solidColor:4177066239},border:{bdrIsVisible:!1,bdrColor:4278190080,bdrWidth:1,bdrStyle:"solid"},borderRadius:4,borderVisibility:{bdrIsVisibleT:!0,bdrIsVisibleL:!0,bdrIsVisibleB:!0,bdrIsVisibleR:!0}},se.h=21,se.w=k.hotAttr.w,se.x=k.hotAttr.w/2,se.y=k.hotAttr.h-se.h/2;const tt={key:(0,r.Tl)(),hotAttr:se,sup:k.key,sub:[]};Oe.push(tt);let $e=o._.wRect(I18N.w.wRect);$e={...$e,zIndex:8,fixPosTo:"bottom",fill:{fillIsVisible:!0,fill:"solid",solidColor:255},borderRadius:3,border:{bdrIsVisible:!1,bdrColor:3149642751,bdrWidth:1,bdrStyle:"solid"}},$e.h=5,$e.w=134,$e.x=k.hotAttr.w/2,$e.y=se.y;const we={key:(0,r.Tl)(),hotAttr:$e,sup:k.key,sub:[]};Oe.push(we)}return Oe},$=(k,Q)=>{var ie,ae;const{model:Oe,height:se,width:tt,attr:$e}=Q,we=(0,r.Tl)("rbp");if((0,M.ff)(k,{key:we,sup:E.X3,attr:(0,M.cr)(I18N.LeftSidePanel.page,1,Oe,tt,se,(ie=$e==null?void 0:$e.orientation)!=null?ie:"portrait")}),Oe==="iphone_13_pro"&&(ae=(0,_e.zi)())!=null&&ae.isToShow)return k;const ye=o._[_.l.Canvas](I18N.LeftSidePanel.artboard+" 1",5,tt/2,se/2,tt,se,Oe),q=(0,s.f4)(ye),Je=(0,r.Tl)("rc");k.push({type:c.P6,key:Je,keySup:we}),k.push({type:c.q$,key:Je,attrDiff:q});const N=Ge({hotAttr:ye,key:Je});if(N!==void 0){for(const z of N)k.push({type:c.P6,key:z.key,keySup:z.sup}),k.push({type:c.q$,key:z.key,attrDiff:z.hotAttr});N.length===1?k.push({type:c.q$,key:Je,attrDiff:{shh:(0,D.xd)(N[0].hotAttr.h)}}):k.push({type:c.q$,key:Je,attrDiff:{shh:(0,D.xd)(N[0].hotAttr.h),sfh:(0,D.xd)(N[1].hotAttr.h)}})}return k},xe=(k,Q)=>{if(k.getFlatTree().get("B@main").sub.length===0){const ie=$([],Q);k.applyDiff(ie),k.resetUndo()}else if(!k.getFlatTree().get("B@ref-mind")){const ie=[];ie.push({type:c.P6,key:E.T3,keySup:C.$3}),ie.push({type:c.q$,key:E.T3,attrDiff:(0,M.oE)("rbRefMind")}),k.applyDiff(ie),k.resetUndo()}},Xe=async(k,Q)=>{try{const ae=await(0,h.od)(k),Oe=ae.sdkStore.createRoSdkStore();Object.assign(globalThis,{...ae,rootSdk:ae,roSdkStore:Oe}),(0,i.s_)()||Ee(ae),ae.sdkStore.subscribe(W.repaint),ae.cmtStore.subscribe(re.repaint),Q&&(0,i.mK)()&&xe(ae.flatStore,Q)}catch(ae){var ie;const Oe=ae?Number(ae.status)||Number((ie=ae.toString().split("status")[1])==null||(ie=ie.split(":")[1])==null?void 0:ie.split(",")[0])||401:void 0;console.warn("[initRootSdk]",ae,Oe),(0,m.Q)("initRootSdk",ae,{status:Oe,sdkOption:k,projectBasic:Q}),await(0,b.Vz)({status:Oe}),await new Promise(()=>{})}},Ne=k=>async Q=>{let{fssDat:ie}=Q;try{const ae=await ie.loadSOS();if(!ae)return;console.warn("[afterStoreCreate] found unsaved proj tree",ae);const Oe=await MB.global.popupHelper.confirmAsync({isClose:!0,isHTML:!0,title:"\u6062\u590D\u6570\u636E",desc:["<p>\u68C0\u6D4B\u5230\u672A\u6210\u529F\u4FDD\u5B58\u5230\u4E91\u7AEF\u7684\u6587\u4EF6\u6570\u636E\uFF0C\u6700\u540E\u8BB0\u5F55\u65F6\u95F4\u4E3A\uFF1A"+getFormatDateString(new Date(ae.time).getTime(),"","-")+"\u3002</p>","<p>\u662F\u5426\u6062\u590D\u6570\u636E\u5230\u65B0\u6587\u4EF6\uFF1F</p>"].join(""),confirmText:"\u6062\u590D",cancelText:"\u53D6\u6D88"});if(toSentry("loadSOS",void 0,{isKeep:!!Oe,time:ae.time}),Oe){const{clientData:{upperCid:se}}=await newFlpakFromTree(ae.tree,k.team_cid,{...k,name:k.name+"-\u6062\u590D\u6570\u636E"});await ie.freeSOS(),refreshLocationHref("/proto/design/"+se)}else await ie.freeSOS()}catch(ae){console.warn("[afterStoreCreate]",ae)}}},16426:(B,L,t)=>{"use strict";t.d(L,{YN:()=>r,om:()=>_});var d=t(95485),y=t(10404),b=t(73752),h=t(7776),i=t(74982),l=t(26886),w=t(87587);const m=async s=>{const[[M,v],[F,I]]=await Promise.all([(async()=>{const{project_basic:a,project_metas:[C]}=await fetchGetJSON("/api/upper/web_v1/basics/"+s);return[a,C]})(),(async()=>{const{userId:a,flatKey:C}=await getFlatEditData({projectBasicCid:s});return console.log("[p2edit] uId="+a+" key="+C+" pbCid="+s),[a,C]})()]);return await initRootSdk({userId:F,flpakKey:I,afterStoreCreate:getAfterStoreCreate(M),onTransferError,onReadOnlyError,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0},M),{projectBasic:M,projectMeta:v}},E=async s=>{const{market_template:M,project_metas:[v]}=await requestResourcesDetailData(s);return await initRootSdk({userId:void 0,flpakKey:v.cid,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0,onTransferError,onReadOnlyError},M),{projectBasic:M,projectMeta:v}},c={repaint:s=>{let{type:M,payload:v}=s;M===i.K&&o(v)}},o=(0,w.P2)(s=>{const M=(0,l.UF)();if(!M||!MB.action)return;const v=M.popups.base.currentPopupPanel,F=M.current.currentOrg,I=M.current.currentUser,a=M.mode.editingOrgComboMode,C=M.mode.editingUserComboMode;if(v!=="builtin"&&!(I&&C)&&!(F&&a))return;const D=M.popups.widget.navIndex;if(C||a){const _e=C?userSdk:orgSdk;if(!_e)return;(0,d.cN)(s,_e)}else if(I&&D===1&&userSdk){var O,A;((O=userSdk.sdkStore.getHotItem(s[0]))==null?void 0:O.hotAttr.type)==="rResBunch"&&((A=userSdk.sdkStore.getHotItem(s[0]))==null?void 0:A.hotAttr.bunch)==="rbPage"&&MB.action("entry:load:user:combo:group:list")}else if(F&&D===2&&orgSdk){var X,le;((X=orgSdk.sdkStore.getHotItem(s[0]))==null?void 0:X.hotAttr.type)==="rResBunch"&&((le=orgSdk.sdkStore.getHotItem(s[0]))==null?void 0:le.hotAttr.bunch)==="rbPage"&&MB.action("entry:load:org:combo:group:list")}},.5*1e3),_=async s=>{let{project_meta_cid:M,userId:v,repaint:F}=s;try{const I=await(0,y.od)({userId:v,flpakKey:M,isDummyCmt:!0,isAllowDat:!0,onTransferError:d.$p,onReadOnlyError:d.Yo});return F&&I.sdkStore.subscribe(c.repaint),I}catch(I){console.warn("[initComboStore]",I)}},r=s=>(0,b.EE)("/api/upper/web_v1/design/initial?project_cid="+s)},99990:(B,L,t)=>{"use strict";t.d(L,{$B:()=>Ge,BG:()=>m,F7:()=>Ue,H3:()=>ae,HP:()=>Me,IS:()=>ye,Im:()=>d.Im,J5:()=>oe,KI:()=>Le,KQ:()=>M,My:()=>Oe,NK:()=>se,P3:()=>Ee,Qs:()=>Y,RI:()=>s,RO:()=>ie,Tz:()=>Q,Vp:()=>Ne,W:()=>C,X6:()=>W,Xr:()=>r,_5:()=>Je,a$:()=>_,be:()=>_e,bt:()=>le,cD:()=>Xe,iq:()=>k,kk:()=>q,qr:()=>$,rM:()=>de,rw:()=>re,sE:()=>tt,tr:()=>$e,uB:()=>xe,uo:()=>X,ur:()=>J});var d=t(7776),y=t(73752),b=t(76985),h=t(35517);const i=(N,z)=>{const ce=new Error("[NO SENTRY] "+N);return Object.assign(ce,z),ce},l=(N,z)=>fetchGetJSON("/api/upper/web_v1/design/readonly_initial?access_token="+N+"&password="+z),w=async(N,z)=>{const ce="/api/flat/web_v1/preview/initial?access_token="+N+"&view_mode="+z,Se=await fetch(ce,{credentials:"same-origin"}),Ke=await Se.json();if(Se.status!==200)throw i("[fetchGetHead] failed with "+Se.status+": "+ce,{status:Se.status,error_type:Ke==null?void 0:Ke.error_type});return Ke},m=(N,z)=>(0,y.IP)("/api/upper/web_v1/basics/"+N,{...z}),E=()=>fetchGetJSON("/api/web/v3/configuration/design_activity"),c=()=>fetchGetJSON("/api/web/v3/configuration/square_topic"),o=()=>fetchGetJSON("/api/web/v3/configuration/workspace"),_=async()=>{let N=[];try{const z=await(0,y.EE)("/api/library/v4/recent_keywords");z!=null&&z.keywords&&(N=z==null?void 0:z.keywords)}catch(z){await(0,h.Vz)(z)}return N},r=()=>(0,y._E)("/api/library/v4/recent_keywords"),s=N=>(0,y.Mn)("/api/library/v4/recent_keywords",{keyword:N}),M=async()=>{var N;let z;try{z=await(0,y.EE)("/api/library/v3/project_upper/user_combo_groups")}catch(ce){return await(0,h.Vz)(ce),{}}return{userComboGroupList:(N=z)==null?void 0:N.user_combo_groups}},v=async N=>{let z;try{z=await fetchPutJSONWithAccept("/api/library/v4/users/combo_groups/"+N.cid,{...N})}catch(ce){return await apiErrorModals(ce),{}}return z},F=N=>fetchPutJSON("/api/proto7/web_v1/screen_aligns/"+N.cid,{...N}),I=N=>fetchDeleteHead("/api/library/v3/project_upper/user_combo_groups/"+N),a=N=>v(N),C=async N=>{var z;let{orgCid:ce}=N,Se;try{Se=await(0,y.EE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+ce)}catch(Ke){return await(0,h.Vz)(Ke),{}}return{orgComboGroupList:(z=Se)==null?void 0:z.org_combo_groups}},D=async N=>{const{project_metas:z,screen_metas:ce,screen_glues:Se,market_template:Ke,icon_group:st}=await requestResourcesDetailData(N),{category:ot}=Ke,qe=ot===COMBO_GROUP;if(ot===ICON_GROUP){const{title:at,source:_t}=st,rt=await fetchGetJSON(_t),pt=ICON_LIBRARY_TYPE_MAP[at]||"svg",{iconGroupData:Et,iconData:yt}=getLibraryIconInfoFromRequestData(rt,pt);return{marketTemplate:Ke,iconGroupData:Et,iconData:yt}}else{const at=[];if(qe){const _t={};ce.forEach(rt=>{_t[rt.screen_glue_cid]=rt.cid});for(const rt of Se){const{cid:pt,name:Et,project_meta_cid:yt}=rt;at.push({cid:pt,name:Et,type:Ke.category,projectBasicCid:Ke.cid,projectMetaCid:yt,screenGlue:rt,screenMetaCid:_t[rt.cid]||""})}}else{const _t=Se.find(rt=>rt.type==="project-main");for(const rt of ce){const{cid:pt,name:Et,project_meta_cid:yt,screen_glue_cid:Pt}=rt;_t.cid===Pt&&at.push({cid:pt,name:Et,type:Ke.category,projectBasicCid:Ke.cid,projectMetaCid:yt,screenGlue:_t,screenMetaCid:pt})}}return{marketTemplate:Ke,marketTemplateItemList:at,projectMetaList:z,screenGlueList:Se,screenMetaList:ce}}},O=async()=>{const N=await requestUserStarredList(COMBO_GROUP),z=await requestUserStarredList(ICON_GROUP),ce=await requestUserStarredList(SCREEN_LIST),Se=N.concat(z).concat(ce),Ke=Se.filter(ct=>{let{category:at}=ct;return[COMBO_GROUP,SCREEN_LIST].includes(at)}),st=Se.filter(ct=>{let{category:at}=ct;return at===ICON_GROUP}),ot=new Map,qe=new Map;for(const ct of Se){const{category:at,cid:_t}=ct;at===ICON_GROUP?qe.set(_t,ct):ot.set(_t,ct)}return{marketTemplateList:Ke,iconLibraryList:st,marketTemplateListMap:ot,iconLibraryListMap:qe}},A=N=>{let{marketTemplateCid:z}=N;return fetchDeleteHead("/api/community/v1/market_template/use/"+z)},X=async N=>{const{icon_group:z,market_template:ce}=await(0,d.Mv)(N.cid),{source:Se,title:Ke}=z||{},st=await(0,y.EE)(Se),ot=b.em[Ke]||"svg",{iconGroupData:qe,iconData:ct}=(0,b._7)(st,ot);return{iconGroupData:qe,iconData:ct,marketTemplate:ce}},le=async()=>{try{const{asset_groups:N}=await(0,y.sE)("/api/library/v3/asset_data/me/asset_groups");return{userAssetGroupList:N}}catch(N){await(0,h.Vz)(N)}},_e=async N=>{let{orgCid:z}=N;try{const{asset_groups:ce}=await(0,y.sE)("/api/library/v3/asset_data/org/asset_groups?org_cid="+z);return{orgAssetGroupList:ce}}catch(ce){await(0,h.Vz)(ce)}},oe=async N=>{try{const{asset:z,user_asset:ce}=await(0,y.NS)("/api/library/v3/asset_data/me/search_by_url",{image_url:N});return{asset:z,user_asset:ce}}catch(z){await(0,h.Vz)(z)}},J=async(N,z)=>{try{const{asset:ce,org_asset:Se}=await(0,y.NS)("/api/library/v3/asset_data/org/search_by_url",{image_url:N,org_cid:z});return{asset:ce,org_asset:Se}}catch(ce){await(0,h.Vz)(ce)}},Ee=async N=>{try{const{user_asset_group:z}=await(0,y.bX)("/api/library/v4/users/asset_groups/"+N.cid,{...N});return{user_asset_group:z}}catch(z){await(0,h.Vz)(z)}},de=async N=>{try{const{org_asset_group:z}=await(0,y.bX)("/api/library/v4/orgs/asset_groups/"+N.cid,{...N});return{org_asset_group:z}}catch(z){await(0,h.Vz)(z)}},Ue=async N=>{try{return await(0,y.bX)("/api/library/v3/asset_data/me/assets/"+N.asset_cid,{...N})}catch(z){await(0,h.Vz)(z)}},W=async N=>{try{return await(0,y.bX)("/api/library/v3/orgs/assets/"+N.cid+"?org_cid="+N.org_cid,{...N})}catch(z){await(0,h.Vz)(z)}},Y=async N=>{let{cid:z,name:ce,groupCid:Se}=N;try{await(0,y.NS)("/api/library/v3/asset_data/me/assets",{cid:z,name:ce,group_cid:Se})}catch(Ke){await(0,h.Vz)(Ke)}},re=async N=>{let{orgCid:z,cid:ce,name:Se,groupCid:Ke}=N;try{const st=await(0,y.NS)("/api/library/v3/orgs/assets",{cid:ce,org_cid:z,name:Se,group_cid:Ke});return st==null?void 0:st.cid}catch(st){await(0,h.Vz)(st)}},Le=async N=>{let{user_asset_group_cid:z,org_cid:ce,org_asset_group_cid:Se}=N;try{return(0,y.NS)("/api/library/v3/asset_data/org/asset_group_from_user",{user_asset_group_cid:z,org_cid:ce,org_asset_group_cid:Se})}catch(Ke){await(0,h.Vz)(Ke)}},Me=async N=>{try{const{user_asset_group:z,user_assets:ce}=await(0,y.sE)("/api/library/v3/asset_data/me/asset_groups/"+N);return{user_asset_group:z,userAssets:ce}}catch(z){await(0,h.Vz)(z)}},Ge=async N=>{try{const{org_asset_group:z,org_assets:ce}=await(0,y.sE)("/api/library/v3/orgs/asset_groups/"+N);return{org_asset_group:z,orgAssets:ce}}catch(z){await(0,h.Vz)(z)}},$=async N=>{await(0,y._E)("/api/library/v3/asset_data/me/assets/"+N)},xe=async N=>{await(0,y._E)("/api/library/v3/orgs/assets/"+N.cid+"?org_cid="+N.org_cid)},Xe=async N=>{await(0,y._E)("/api/library/v3/asset_data/me/asset_groups/"+N)},Ne=async N=>{await(0,y._E)("/api/library/v3/orgs/asset_groups/"+N)},k=N=>(0,y._Z)("/preferences/update",{...N}),Q=async(N,z)=>{try{return await(0,y.bX)("/api/library/v4/users/asset_groups/"+N,{...z})}catch(ce){await(0,h.Vz)(ce)}},ie=N=>async(z,ce)=>{try{const Se={...ce,org_cid:N};return await(0,y.bX)("/api/library/v4/orgs/asset_groups/"+z,{...Se})}catch(Se){await(0,h.Vz)(Se)}},ae=async(N,z)=>{let ce=null;try{const Se=await(0,y.sE)("/api/community/v1/workspace?category="+N+"&plabel="+z);Se!=null&&Se.market_templates&&(ce=Se==null?void 0:Se.market_templates)}catch(Se){await(0,h.Vz)(Se)}return ce},Oe=async N=>{let z=null;try{const ce=await(0,y.EE)("/flpak/w-p2wsearch?"+N);ce!=null&&ce.data&&(z=ce)}catch(ce){await(0,h.Vz)(ce)}return z},se=async N=>{let z=null;try{const ce=await(0,y.EE)("/flpak/w-p2meta/"+N);ce!=null&&ce.length&&(z=ce)}catch(ce){await(0,h.Vz)(ce)}return z},tt=async N=>{let{currentComboPanel:z,projectMetaCid:ce}=N;try{await(0,y.Gf)("/flpak/w-migrate-"+z+"-combo-group/"+ce+"?mode=normal")}catch(Se){await(0,h.Vz)(Se)}},$e=async N=>{let{projectBasicCid:z}=N;try{const{userId:ce,flatKey:Se}=await(0,y.EE)("/api/flat/web_v1/proj2-edit-info?prj2Cid="+z);return{userId:ce,flatKey:Se}}catch(ce){await(0,h.Vz)(ce)}},we=async N=>{let{projectBasicCid:z,accessToken:ce,password:Se}=N;try{const{userId:Ke,flatKey:st}=await fetchGetJSON("/api/flat/web_v1/proj2-preview-info?prj2Cid="+z+"&access_token="+ce+"&password="+Se);return{userId:Ke,flatKey:st}}catch(Ke){await apiErrorModals(Ke)}},ye=N=>(0,y.EE)("/api/dashboard/v5/orgs/"+N),q=async N=>{const{project:z}=await(0,y.EE)("/api/dashboard/v5/projects/"+N);return z},Je=async N=>(0,y.EE)("/api/upper/web_v1/basics/statstics/"+N)},4091:(B,L,t)=>{"use strict";t.d(L,{S3:()=>y,kC:()=>i,ky:()=>h,mp:()=>l,pX:()=>d});const d="/proto",y=m=>d+"/"+m,b=m=>{const E=/^\/proto\/design\/(?:([^/]+?))$/i.exec(m);return E?E[1]:new Error("project cid error")},h=m=>{let{search:E,pathname:c}=m;return c.includes("/sharing")?c.includes("dashboard")||c.includes("htmlzip")?c.split("/").at(-3):c.includes("embed/v2")?location.pathname.split("/").at(-4):c.split("/").at(-2):new URLSearchParams(E).get("token")||/^\/proto\/([^/]+?)(?:\/forum|\/uichina|\/embed|\/embed\/v2|\/htmlzip|\/sharing|\/ro)?\/?$/i.exec(c)[1]},i="/p2mkt_view",l=m=>i+"/"+m,w=m=>/^\/p2mkt_view\/(?:([^/]+?))$/i.exec(m)[1]},30269:(B,L,t)=>{"use strict";t.d(L,{LZ:()=>w,W3:()=>c,dM:()=>E,fK:()=>i,wo:()=>l,zn:()=>m});var d=t(73752),y=t(45201),b=t(35517),h=t(43944);const i=async function(o,_,r){var s;if(r===void 0&&(r=!1),r||MB.action("ai:update:aiGenerating",!1),o)return;const M=(0,y.x2)(_,!1);M&&((s=MB)==null||s.notice({text:M,svgName:_===451?"chatGPT/tip-warning":"chatGPT/tip-error"})),_===401&&((0,b.v5)(),await MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,b.av)()))},l=async o=>{let{prompt:_,workspace:r,taskID:s}=o;try{const M=await(0,d.Gf)("/go/v1/chatbot/generate_page"+(ENV.IS_WONDER_SHARE?"2":""),{prompt:_,workspace:r,task_id:s});return i(!0,200),{result:M,status:200}}catch(M){return i(!1,M.status),{status:M.status}}},w=async o=>{let{prompt:_,type:r,workspace:s,taskID:M}=o;try{const v=await(0,d.Gf)("/go/v1/chatbot/generate_widget"+(ENV.IS_WONDER_SHARE?"2":""),{prompt:_,type:r,workspace:s,task_id:M});return i(!0,200),{result:v,status:200}}catch(v){return i(!1,v.status),{status:v.status}}},m=async o=>{let{prompt:_,textListLength:r,workspace:s,taskID:M}=o;const v=_+(" ,textList.length ==="+r);try{const F=await(0,d.Gf)("/go/v1/chatbot/generate_widget"+(ENV.IS_WONDER_SHARE?"2":""),{prompt:v,type:"autofill",workspace:s,task_id:M});return i(!0,200,!0),{result:F,status:200}}catch(F){return i(!1,F.status,!0),{status:F.status}}},E=async o=>{try{const _=(0,h.r)(),r=await(0,d.Gf)("/go/v1/chatbot/smart_generate",{...o,size:_});return i(!0,200,!0),{result:r,status:200}}catch(_){return i(!1,_.status,!0),{status:_.status}}},c=async o=>{try{return await(0,d.Gf)("/go/v1/chatbot/edit_text",o)}catch(_){return console.error("#### requestTextEdit error:",_),null}}},35803:(B,L,t)=>{"use strict";t.d(L,{i:()=>F,x:()=>_});var d=t(85808),y=t.n(d),b=t(47345),h=t.n(b),i=t(11685),l=t(96144),w=t(26886),m=t(6206),E=t(86655),c=t(37273),o=t(94387);const _=[i.l.WRichText,i.l.WRect,i.l.WOval,i.l.WButton,i.l.WLine,i.l.WImage,i.l.WTable],r=[i.l.WRichText,i.l.WLine],s=[i.l.WImage,i.l.WLine],M=[i.l.WLine,i.l.WTable,i.l.WRichText,i.l.WOval],v=[i.l.WTable,i.l.WRichText],F=O=>{try{if(!O||Object.keys(O).length===0)return l.nJ.HandleExceptions;const{opacity:A,radius:X,"fill-color":le,"stroke-color":_e,"stroke-style":oe,"stroke-weight":J,"font-size":Ee,"font-color":de,"text-align":Ue,"font-format":W}=O,Y=(0,w.UF)(),re=(0,m.nAE)(Y),Me=(0,E.DL)(re).filter($=>_.includes($.type));if(!Me||Me.length===0)return l.nJ.NotFindEditObject;(0,m.CW6)(Y)&&Me.map($=>$.key).includes((0,m.CW6)(Y))&&MB.action("entry:set:editing:cid",{item:{cid:""}});const Ge=[];return Me.forEach($=>{const{type:xe}=$,Xe=sdkStore.getHotItem($.key);if(!Xe)return;const Ne=h()(Xe),{hotAttr:k}=Ne;A&&(k.opacity=A),!M.includes(xe)&&X&&(k.borderRadius=(0,o.c3)(X)),!v.includes(xe)&&le&&(k.fill.solidColor=(0,c.SZ)(le)),r.includes(xe)||I(k,_e,oe,J,xe),!s.includes(xe)&&(Ee||de||Ue||W)&&(xe===i.l.WTable?C(k,Ee,de,Ue,W):xe===i.l.WButton?D(k,Ee,de,Ue,W):a(k,Ee,de,Ue,W)),Ge.push(Ne)}),MB.action("entry:widget:change",{flatChgList:Ge,shouldReBuildTree:!0}),l.nJ.Success}catch(A){return console.error("genEditStyle error:",A),l.nJ.HandleExceptions}},I=(O,A,X,le,_e)=>{!A&&!X&&!le||(_e===i.l.WTable?(A&&(O.tableConfig.outerBorder.bdrColor=(0,c.SZ)(A),O.tableConfig.innerBorderH.bdrColor=(0,c.SZ)(A),O.tableConfig.innerBorderV.bdrColor=(0,c.SZ)(A)),le&&(O.tableConfig.outerBorder.bdrWidth=(0,c.SZ)(A),O.tableConfig.innerBorderH.bdrWidth=(0,c.SZ)(A),O.tableConfig.innerBorderV.bdrWidth=(0,c.SZ)(A))):((A||X||le)&&(O.border||(O.border={bdrColor:3149642751,bdrIsVisible:!0,bdrStyle:"solid",bdrWidth:1})),A&&(O.border.bdrColor=(0,c.SZ)(A)),le&&(O.border.bdrWidth=Number(le)),X&&(O.border.bdrStyle=(0,o.RM)(X))))},a=(O,A,X,le,_e)=>{if(!A&&!X&&!le&&!_e)return;const{textV1:{blocks:oe}}=O;if(A){const W=y()(A*1.399+.251);O.richTextV1.fontSize=A,O.richTextV1.lineHeight=W}X&&(O.richTextV1.textColor=X),le&&(O.richTextV1.horizontalAlign=le);let J=!1,Ee=!1,de=!1,Ue=!1;if(_e&&_e!=="none"){const{italic:W,bold:Y,underline:re,strikethrough:Le}=(0,o.iM)(_e);J=W,de=re,Ee=Y,Ue=Le,W&&(O.richTextV1.italic=W),Y&&(O.richTextV1.bold=Y),re&&(O.richTextV1.underline=re),Le&&(O.richTextV1.strikethrough=Le)}oe&&(Object.values(oe).forEach(W=>{const{type:Y}=W;let re=W.inlineStyleRanges;Y!=="atomic"&&re&&(X&&(re=re.filter(Le=>!Le.style.startsWith("color-"))),A&&(re=re.filter(Le=>!Le.style.startsWith("fontsize-")&&!Le.style.startsWith("lineheight-"))),J&&(re=re.filter(Le=>Le.style!=="ITALIC")),de&&(re=re.filter(Le=>Le.style!=="UNDERLINE")),Ee&&(re=re.filter(Le=>Le.style!=="BOLD")),Ue&&(re=re.filter(Le=>Le.style!=="STRIKETHROUGH"))),W.inlineStyleRanges=re}),O.textV1.blocks=JSON.parse(JSON.stringify(oe)))},C=(O,A,X,le,_e)=>{let oe=!1,J=!1,Ee=!1,de=!1;if(_e&&_e!=="none"){const{italic:Y,bold:re,underline:Le,strikethrough:Me}=(0,o.iM)(_e);oe=Y,Ee=Le,J=re,de=Me}const{tableData:{cellStyles:Ue}}=O;if(X&&(O.textV0.textColor=(0,c.SZ)(X)),A){const Y=y()(A*1.399+.251);O.textV0.fontSize=A,O.textV0.lineHeight=Y}le&&(O.textV0.horizontalAlign=le);const W=[];Ue.forEach(Y=>{const re=[];Y.forEach(Le=>{let Me=[];Le&&(Me=Le.split(";"),A&&(Me=Me.filter(Ge=>!Ge.startsWith("font-size"))),X&&(Me=Me.filter(Ge=>!Ge.startsWith("color:"))),le&&(Me=Me.filter(Ge=>!Ge.startsWith("text-align")),Me.push("text-align: "+le)),oe&&(Me=Me.filter(Ge=>!Ge.startsWith("font-style")),Me.push("font-style: italic")),J&&(Me=Me.filter(Ge=>!Ge.startsWith("font-weight")),Me.push("font-weight: bold")),Ee&&(Me=Me.filter(Ge=>!Ge.startsWith("text-decoration")),Me.push("text-decoration: underline")),de&&(Me=Me.filter(Ge=>!Ge.startsWith("text-decoration")),Me.push("text-decoration: line-through"))),re.push(Me.join(";"))}),W.push(re)}),O.tableData.cellStyles=W},D=(O,A,X,le,_e)=>{if(!(!A&&!X&&!le&&!_e)){if(A){const oe=y()(A*1.399+.251);O.textV0.fontSize=A,O.textV0.lineHeight=oe}if(X&&(O.textV0.textColor=(0,c.SZ)(X)),le&&(O.textV0.horizontalAlign=le),_e&&_e!=="none"){const{italic:oe,bold:J,underline:Ee,strikethrough:de}=(0,o.iM)(_e);J&&(O.textV0.bold=J),oe&&(O.textV0.italic=oe),Ee&&(O.textV0.textDecoration="underline"),de&&(O.textV0.textDecoration="line-through")}}}},43944:(B,L,t)=>{"use strict";t.d(L,{T:()=>_,r:()=>o});var d=t(85808),y=t.n(d),b=t(47345),h=t.n(b),i=t(26886),l=t(6206),w=t(86655),m=t(11685),E=t(42957),c=t(48525);const o=()=>{try{const s=(0,i.UF)(),M=(0,l.nAE)(s),v=(0,w.DL)(M),F=(0,l.p11)(s),I=v.filter(C=>C.type===(m.l.WImage||m.l.WCarousel));let a=0;return I.forEach(C=>{C.type===m.l.WImage&&(a=a+1),C.type===m.l.WCarousel&&(F==null?a=a+C.carousel.slides.length:a=a+1)}),a=Math.max(a,3),a}catch(s){return console.error("getImageAutoFillNumber error:",s),3}},_=s=>{try{if(!s||Object.keys(s).length===0)return null;const{images:M}=s;if(!M||M.length===0)return null;const v=M.map((F,I)=>{const{keyword:a,originalSize:{width:C,height:D},url:O}=F,A=200,X=y()(200*D/C);return{asset_cid:"ai_"+I,image:O,width:A,height:X,img_tag:[a],size:"",thumb:O,name:"\u793A\u4F8B\u56FE\u7247",group_cid:""}});r(v)}catch(M){return null}},r=s=>{const M=(0,i.UF)(),v=(0,l.nAE)(M),F=(0,l.p11)(M);if(!(0,w.Ct)(v)){const A=Math.floor(Math.random()*s.length),X=s[A],le=(0,E.Ml)(X);(0,c.tq)([le],X.width,X.height);return}const I=s,a=[];for(;I.length>0;){const A=Math.floor(Math.random()*I.length),X=I[A];a.push(X),I.splice(A,1)}let C=0;const D=()=>{C>=a.length&&(C=0);const A=a[C];return C++,A};(A=>{const X=(0,w.DL)(v);X.find(_e=>_e.type===m.l.WImage)&&MB.action("entry:replace:image_view:by:generator",{generator:A});const le=X.filter(_e=>_e.type===m.l.WCarousel);le.length>0&&(F==null?le.forEach(_e=>{const oe=h()(_e.carousel.slides);for(let J=0;J<_e.carousel.slides.length;J++)oe[J].asset=(0,E.G1)("Carousel",A().image).key;MB.action("entry:set:carousel:slides",{slides:oe,carousel:_e})}):MB.action("entry:replace:widget:by:asset",{asset:A(),assetReplaceMode:m.l.WCarousel,canUndo:!1}))})(()=>D())}},79145:(B,L,t)=>{"use strict";t.d(L,{Ey:()=>Le,fT:()=>Ge});var d=t(37273),y=t(56595),b=t(23716),h=t(26851),i=t(43679),l=t(96144),w=t(95067),m=t(52997),E=t(90495),c=t(24312),o=t(19119),_=t(55697),r=t(86301),s=t(83929),M=t(94350),v=t(82933),F=t(18104),I=t(86351),a=t(99276),C=t(81801),D=t(9736),O=t(75633),A=t(3065),X=t(6206),le=t(11685),_e=t(95128),oe=t(13907),J=t(43944),Ee=t(36993),de=t(44141),Ue=t(84257),W=t(35803),Y=t(75797);const re=$=>{try{var xe,Xe;let k=null;$&&typeof $=="object"&&(k=$);const Q=Object.keys(k);Q.concat("action");const ie=MB.getCurrentScreen().cid;let ae=0,Oe=0;if(ie){var Ne;const we=(Ne=sdkStore.getSubHotItemList(ie))==null||(Ne=Ne.filter(ye=>ye.hotAttr.type!=="rResBunch"))==null?void 0:Ne.map(ye=>ye.key);if(we&&we.length>0){const ye=sdkStore.getHotKeyListAABB(we);ae=(ye[0]+ye[2])/2,Oe=(ye[1]+ye[3])/2}}const se=[],tt=getTopZIndex(ie);if(Q.forEach(we=>{switch(we){case AIWidgetType.text:k[we].forEach(ye=>{const q=genText(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.image:k[we].forEach(ye=>{const q=genImage(ye);if(!q)return;const{hotAttr:Je,extHi:N}=q;N&&se.push(N),Je&&se.push(newHi({hotAttr:Je,sup:ie}))});break;case AIWidgetType.rectangle:k[we].forEach(ye=>{const q=genRectangle(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.oval:k[we].forEach(ye=>{const q=genOval(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.line:k[we].forEach(ye=>{const q=genLine(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.button:k[we].forEach(ye=>{const q=genButton(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.iphoneXSB:k[we].forEach(ye=>{const q=genIphoneXSB(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.arrow:k[we].forEach(ye=>{const q=genArrow(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.mTextInput:k[we].forEach(ye=>{const q=genMTextInput(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.mTextarea:k[we].forEach(ye=>{const q=genMTextarea(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.mSelect:k[we].forEach(ye=>{const q=genMSelect(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.dropMenu:k[we].forEach(ye=>{const q=genDropMenu(ye);q&&se.push(newHi({hotAttr:q,sup:ie}))});break;case AIWidgetType.radioSelection:case AIWidgetType.checkbox:{const ye=we===AIWidgetType.checkbox;k[we].forEach(q=>{const Je=genSelectionControl(q,ye);Je&&se.push(newHi({hotAttr:Je,sup:ie}))})}break;case AIWidgetType.table:k[we].forEach(ye=>{genTable(ye)});break;default:console.error("\u6682\u672A\u652F\u6301\u8BE5\u7C7B\u578B:",we);break}}),se.length===0)return;const $e=se.map(we=>we.key);console.log("#### keys:",$e),se.forEach(we=>{we.hotAttr.type!=="rResExt"&&(we.hotAttr.x=we.hotAttr.x+ae,we.hotAttr.y=we.hotAttr.y+Oe)}),console.log("### hiList:",se),rootSdk.sdkStore.updateHotItemBatch(se),(xe=MB)==null||(xe=xe.__store__)==null||xe.dispatch({type:"entry:rebuild:screen-widget-tree"}),MB.action("entry:select:items",{cids:$e}),(Xe=MB)==null||Xe.action("entry:design:zoom:selection"),console.log("#### genSemantic:",Q)}catch(k){console.log("genSemantic error:",k)}},Le=$=>{try{if(!$||typeof $!="object")return console.error("genSingleWidget error: \u6570\u636E\u7C7B\u578B\u9519\u8BEF"),{hiList:[],success:!0};const{type:xe}=$,Xe=MB.getCurrentScreen().cid,Ne=k=>{const Q=[];return xe===l.J3.image?k.forEach(ie=>{const{hotAttr:ae,extHi:Oe}=ie;Oe&&Q.push(Oe),ae&&Q.push((0,d.Hd)({hotAttr:ae,sup:Xe}))}):xe===l.J3.genPrd||xe===l.J3.textFill?k.forEach(ie=>{const ae=(0,d.Hd)({hotAttr:ie,sup:Xe});ae.hotAttr.cid=ae.key,Q.push(ae)}):k.forEach(ie=>{Q.push((0,d.Hd)({hotAttr:ie,sup:Xe}))}),{hiList:Q,success:Q.length>0}};switch(xe){case l.J3.text:{const k=(0,i.g)($);return Ne(k||[])}case l.J3.image:{const k=(0,h.k)($);return Ne(k||[])}case l.J3.rectangle:{const k=(0,b.H)($);return Ne(k||[])}case l.J3.oval:{const k=(0,w.A)($);return Ne(k||[])}case l.J3.line:{const k=(0,m.P)($);return Ne(k?[k]:[])}case l.J3.button:{const k=(0,E.T)($);return Ne(k||[])}case l.J3.iphoneXSB:{const k=(0,c._)($);return Ne(k?[k]:[])}case l.J3.arrow:{const k=(0,o.$)($);return Ne(k?[k]:[])}case l.J3.mTextInput:{const k=(0,_.v)($);return Ne(k?[k]:[])}case l.J3.mTextarea:{const k=(0,r.N)($);return Ne(k?[k]:[])}case l.J3.dropList:{const k=(0,s.Q)($);return Ne(k?[k]:[])}case l.J3.dropMenu:{const k=(0,M.v)($);return Ne(k?[k]:[])}case l.J3.radioSelection:case l.J3.checkbox:{const k=xe===l.J3.checkbox,Q=(0,v.A)($,k);return Ne(Q?[Q]:[])}case l.J3.table:(0,F.Q)($);break;case l.J3.genProto:(0,I.w)($.data);break;case l.J3.mind:(0,a.L)($);break;case l.J3.flow:(0,C.z)($);break;case l.J3.chart:(0,D.m)($);break;case l.J3.customPage:{const{pages:k}=$,Q=[];return k&&k.length>0&&k.forEach(ie=>{const ae=(0,A.b)(ie);ae&&Q.push(ae)}),Ne(Q)}case l.J3.modelPage:{const{pages:k}=$,Q=[];return k&&k.length>0&&k.forEach(ie=>{const ae=(0,O.n)(ie);ae&&Q.push(ae)}),Ne(Q)}case l.J3.genPrd:{const k=(0,_e._)($);return Ne(k?[k]:[])}case l.J3.textFill:{const k=(0,oe.H)($);if(k)return Ne([k])}break;case l.J3.editImage:(0,J.T)($);break;default:return{success:!1}}return{success:!0}}catch(xe){return console.log("genSigleWidget error:",xe),{success:!1}}},Me=[l.J3.textFill,l.J3.genPrd,l.J3.text],Ge=async $=>{let xe=null;try{if(!$||$.length===0)return{status:l.nJ.HandleExceptions,semanticType:xe};let Xe=[];const Ne=[],k=MB.getCurrentScreen().cid;let Q=(0,y.y)(k);const ie=MB.__store__.getState(),ae=(0,X.OYz)(ie);let Oe=(0,Y.TN)(ae.cid);sdkStore.combineMergeMark("ai-semantic-function");const se=q=>{q.forEach(Je=>{Je.hotAttr.type!=="rResExt"&&(Q=Q+1,Je.hotAttr.zIndex=Q,Je.hotAttr.type===le.l.Canvas&&(Je.hotAttr.order=Oe,Oe=Oe+1))})},tt=$[0],{type:$e,data:we}=tt,{widget:ye}=we||{};switch(xe=$e,$e){case l.J3.editText:case l.J3.textTranslate:case l.J3.textPolish:case l.J3.textStyle:case l.J3.textExpand:case l.J3.textShort:{const q=await(0,Ee.g)(tt);return sdkStore.combineMerge("ai-semantic-function"),{status:q,semanticType:xe}}case l.J3.genComponent:{const q=await(0,Ue.f)(ye,Q);return sdkStore.combineMerge("ai-semantic-function"),{status:q,semanticType:xe}}case l.J3.editStyle:{const q=await(0,W.i)(ye);return sdkStore.combineMerge("ai-semantic-function"),{status:q,semanticType:xe}}default:{const q=[l.J3.genProto,l.J3.modelPage,l.J3.customPage].includes($e);$e===l.J3.genPrd&&(ye.type=l.J3.genPrd);const{hiList:Je,success:N}=Le(q?tt:ye)||{};if(!N)return sdkStore.combineMerge("ai-semantic-function"),{status:l.nJ.HandleExceptions,semanticType:xe};Je&&(Me.includes($e)&&Je.forEach(z=>{Ne.push(z.key)}),se(Je),Xe=Xe.concat(Je))}break}if(Xe&&Xe.length>0){const q=Xe.filter(Je=>{var N;return((N=Je.hotAttr)==null?void 0:N.type)!=="rResExt"}).map(Je=>Je.key);rootSdk.sdkStore.updateHotItemBatch(Xe),MB.action("entry:rebuild:screen-widget-tree"),(0,de.E9)(Ne),MB.action("entry:select:items",{cids:q}),MB.action("entry:design:zoom:selection"),sdkStore.combineMerge("ai-semantic-function")}return{status:l.nJ.Success,semanticType:xe}}catch(Xe){return console.error("genSemanticData error:",Xe),{status:l.nJ.HandleExceptions,semanticType:xe}}}},96144:(B,L,t)=>{"use strict";t.d(L,{J3:()=>d,L2:()=>b,WS:()=>i,dc:()=>h,nJ:()=>y});var d=function(l){return l.text="text",l.rectangle="rectangle",l.image="image",l.oval="oval",l.line="line",l.button="button",l.iphoneXSB="appStatusBar",l.arrow="arrow",l.mTextInput="textInput",l.mTextarea="textArea",l.dropList="dropList",l.dropMenu="dropDownMenu",l.radioSelection="radioBox",l.checkbox="checkBox",l.table="table",l.genProto="genproto",l.mind="mind",l.flow="flow",l.chart="chart",l.genComponent="gencomponent",l.modelPage="modelPage",l.customPage="customPage",l.genPrd="genprd",l.textFill="textfill",l.editImage="editimage",l.editText="edittext",l.textTranslate="texttranslate",l.textPolish="textpolish",l.textStyle="textstyle",l.textExpand="textexpand",l.textShort="textshort",l.editStyle="editstyle",l}(d||{}),y=function(l){return l[l.Unknown=0]="Unknown",l[l.Success=200]="Success",l[l.Unauthorized=401]="Unauthorized",l[l.PointsInsufficient=403]="PointsInsufficient",l[l.AnotherConversation=405]="AnotherConversation",l[l.HandleExceptions=409]="HandleExceptions",l[l.ContentViolation=451]="ContentViolation",l[l.NotSupport=510]="NotSupport",l[l.TextOverLimit=601]="TextOverLimit",l[l.NotSupportMultiple=602]="NotSupportMultiple",l[l.NotFindEditObject=603]="NotFindEditObject",l}(y||{}),b=function(l){return l.success="success",l.warning="warning",l.fail="error",l}(b||{}),h=function(l){return l.default="default",l.editText="editText",l.imageEdit="imageEdit",l.textFill="textFill",l.editStyle="editStyle",l}(h||{});const i={Page:"\u751F\u6210\u539F\u578B\u9875\u9762",flow:"\u751F\u6210\u6D41\u7A0B\u56FE",mind:"\u751F\u6210\u601D\u7EF4\u5BFC\u56FE",table:"\u751F\u6210\u8868\u683C",chart:"\u751F\u6210\u56FE\u8868",gentext:"\u751F\u6210\u6587\u672C\u7EC4\u4EF6",genrectangle:"\u751F\u6210\u77E9\u5F62\u7EC4\u4EF6",genimage:"\u751F\u6210\u56FE\u7247",genoval:"\u751F\u6210\u5706\u5F62\u7EC4\u4EF6",genline:"\u751F\u6210\u7EBF\u6761\u7EC4\u4EF6",genbutton:"\u751F\u6210\u6309\u94AE\u7EC4\u4EF6",genappstatusbar:"\u751F\u6210APP\u72B6\u6001\u680F\u7EC4\u4EF6",genarrow:"\u751F\u6210\u7BAD\u5934\u7EC4\u4EF6",gentextinput:"\u751F\u6210\u5355\u884C\u8F93\u5165\u7EC4\u4EF6",gentextarea:"\u751F\u6210\u591A\u884C\u8F93\u5165\u7EC4\u4EF6",gendroplist:"\u751F\u6210\u4E0B\u62C9\u9009\u62E9\u5668\u7EC4\u4EF6",gendropdownmenu:"\u751F\u6210\u4E0B\u62C9\u83DC\u5355\u7EC4\u4EF6",genradiobox:"\u751F\u6210\u5355\u9009\u7EC4\u4EF6",gencheckbox:"\u751F\u6210\u590D\u9009\u7EC4\u4EF6",gencomponent:"\u751F\u6210\u81EA\u5B9A\u4E49\u7EC4\u4EF6",genmodelpage:"\u751F\u6210\u6307\u5B9A\u673A\u578B\u9875\u9762",gencustompage:"\u751F\u6210\u81EA\u5B9A\u4E49\u9875\u9762",genprd:"\u751F\u6210\u4EA7\u54C1\u6587\u6863",textfill:"\u667A\u80FD\u6587\u672C\u586B\u5145",editimage:"\u667A\u80FD\u56FE\u7247\u586B\u5145",edittext:"\u7F16\u8F91\u6587\u672C",texttranslate:"\u7F16\u8F91\u6587\u672C",textpolish:"\u7F16\u8F91\u6587\u672C",textstyle:"\u7F16\u8F91\u6587\u672C",textexpand:"\u7F16\u8F91\u6587\u672C",textshort:"\u7F16\u8F91\u6587\u672C",editstyle:"\u7F16\u8F91\u6837\u5F0F"}},44141:(B,L,t)=>{"use strict";t.d(L,{D5:()=>_,E9:()=>r,Is:()=>v,Wk:()=>F,pZ:()=>s,uX:()=>M});var d=t(51841),y=t(6206),b=t(26886),h=t(73774),i=t.n(h),l=t(8684),w=t(96144),m=t(11685),E=t(35803),c=t(14730);const o=()=>{},_=()=>{const I=(0,b.UF)(),a=(0,y.Kr)(I);if(!a)return;const D=a.getSelection().set("hasFocus",!0),{_setEditorState:O}=(0,d.o0)();O&&O(h.EditorState.set(a,{selection:D,forceSelection:!0,nativelyRenderedContent:null,inlineStyleOverride:null}))},r=I=>{if(!I||I.length===0)return;const a=[];I.forEach(C=>{const D=sdkStore.getHotItem(C);if(!D)return;const{hotAttr:O}=D;O.cid=D.key;try{if(O.richTextV1.sizeType!==2)(0,l.w2)(O);else{const{x:A,y:X,w:le,h:_e}=O,oe=A-le/2,J=X-_e/2,Ee=(0,c.ce)(O);O.y=J+Ee/2,O.h=Ee,O.height=Ee}a.push(D)}catch(A){console.error("setUpdateAutoSizeAttr error:",A)}}),a.length>0&&rootSdk.sdkStore.updateHotItemBatch(a)},s=I=>{let a=I18N.ChatGPT.ai_semantic_func_error,C=w.L2.warning,D="chatGPT/ai-semantic-result-waring";switch(I){case w.nJ.Success:a=I18N.ChatGPT.ai_semantic_func_success,C=w.L2.success,D="chatGPT/ai-semantic-result-success";break;case w.nJ.TextOverLimit:a=I18N.ChatGPT.ai_semantic_func_error_601;break;case w.nJ.NotSupportMultiple:a=I18N.ChatGPT.ai_semantic_func_error_602;break;case w.nJ.AnotherConversation:a=I18N.ChatGPT.ai_semantic_func_error_405;break;case w.nJ.ContentViolation:a=I18N.ChatGPT.ai_semantic_func_error_451;break;case w.nJ.PointsInsufficient:a=I18N.ChatGPT.ai_semantic_func_error_403;break;case w.nJ.NotFindEditObject:a=I18N.ChatGPT.ai_semantic_func_error_603;break;default:break}return{notice:a,noticeStatus:C,svgName:D}},M=(I,a)=>{const{w:C,h:D}=I,{x:O,y:A}=a,X=Number(O)+Number(C)/2,le=Number(A)+Number(D)/2;return{x:X,y:le}},v=I=>{const a=I.filter(A=>A.type===m.l.WTear||A.type===m.l.WRichText||A.type===m.l.WSticky);if(a&&a.length===1&&a.length===I.length)return w.dc.editText;const C=I.filter(A=>A.type===m.l.WImage||A.type===m.l.WCarousel);if(C&&C.length>0&&C.length===I.length)return w.dc.imageEdit;const D=I.filter(A=>A.type===m.l.WTable||A.type===m.l.WRect);if(D&&D.length>0&&D.length===I.length)return w.dc.textFill;const O=I.filter(A=>E.x.includes(A.type));return O&&O.length>0?w.dc.editStyle:w.dc.default},F=(I,a)=>{switch(I){case w.dc.editText:return[I18N.ChatGPT.ai_semantic_editText_label_1,I18N.ChatGPT.ai_semantic_editText_label_2,I18N.ChatGPT.ai_semantic_editText_label_3,I18N.ChatGPT.ai_semantic_editText_label_4].filter(D=>D!==a);case w.dc.imageEdit:return[I18N.ChatGPT.ai_semantic_editImage_label_1,I18N.ChatGPT.ai_semantic_editImage_label_2,I18N.ChatGPT.ai_semantic_editImage_label_3,I18N.ChatGPT.ai_semantic_editImage_label_4].filter(D=>D!==a);case w.dc.textFill:return[I18N.ChatGPT.ai_semantic_textFill_label_1,I18N.ChatGPT.ai_semantic_textFill_label_2,I18N.ChatGPT.ai_semantic_textFill_label_3,I18N.ChatGPT.ai_semantic_textFill_label_4].filter(D=>D!==a);case w.dc.editStyle:return[I18N.ChatGPT.ai_semantic_editStyle_label_1,I18N.ChatGPT.ai_semantic_editStyle_label_2,I18N.ChatGPT.ai_semantic_editStyle_label_3,I18N.ChatGPT.ai_semantic_editStyle_label_4].filter(D=>D!==a)}const C=[I18N.ChatGPT.ai_semantic_common_label_1,I18N.ChatGPT.ai_semantic_common_label_2,I18N.ChatGPT.ai_semantic_common_label_3,I18N.ChatGPT.ai_semantic_common_label_4,I18N.ChatGPT.ai_semantic_common_label_5,I18N.ChatGPT.ai_semantic_common_label_6,I18N.ChatGPT.ai_semantic_common_label_7,I18N.ChatGPT.ai_semantic_common_label_8,I18N.ChatGPT.ai_semantic_common_label_9,I18N.ChatGPT.ai_semantic_common_label_10,I18N.ChatGPT.ai_semantic_common_label_11];for(let D=C.length-1;D>0;D--){const O=Math.floor(Math.random()*(D+1));[C[D],C[O]]=[C[O],C[D]]}return C.filter(D=>D!==a)}},3175:(B,L,t)=>{"use strict";t.d(L,{KW:()=>i,hU:()=>l,p9:()=>w,ub:()=>m,zi:()=>h});var d=t(72324),y=t(40220);const b=[d.s.GUIDE_NEW_CREATE_PAGE,d.s.GUIDE_NEW_SHOW_WIDGET_LIBRARY,d.s.GUIDE_NEW_FLOW_AND_MIND,d.s.GUIDE_NEW_CREATE_LINK,d.s.GUIDE_NEW_USE_PREVIEW,d.s.GUIDE_NEW_USE_SHARE,d.s.GUIDE_NEW_USE_COMMENT],h=()=>{var E,c,o,_;if(!(0,y._J)())return{};if(!((E=MB)!=null&&(E=E.commonGuideHelper)!=null&&(E=E.getState())!=null&&E.commonGuidesHasShown))return{};const s=((c=MB)==null||(c=c.commonGuideHelper)==null||(c=c.getState())==null?void 0:c.commonGuidesHasShown)||[],M=[d.s.GUIDE_NOVICE_2309,...b].find(C=>C&&s.includes(C));if(M)return M!==d.s.GUIDE_NOVICE_2309&&MB.commonGuideHelper.markGuideAsRead(d.s.GUIDE_NOVICE_2309),{isCompleted:!0};if(s!=null&&s.includes(d.s.GUIDE_NOVICE_2309_START))return{isInProgress:!0};if(typeof((o=MB)==null?void 0:o.getRootProject)!="function")return{};const v=(_=MB)==null?void 0:_.getRootProject(),{source_upper_cid:F,parent_cid:I,model:a}=v||{};return F||I||v&&a!=="iphone_13_pro"?(setTimeout(()=>MB.commonGuideHelper.markGuideAsRead(d.s.GUIDE_NOVICE_2309),2e3),{isCompleted:!0,isShowTaskList:!0}):{isToShow:!0}},i=()=>{var E;const c=h();!c||!c.isToShow||(E=MB)==null||(E=E.commonGuideHelper)==null||E.tryToShowGuide(d.s.GUIDE_NOVICE_2309)},l=E=>{var c,o,_;const r=((c=MB)==null||(c=c.commonGuideHelper)==null||(c=c.getState())==null?void 0:c.commonGuidesHasShown)||[],s=((o=MB)==null||(o=o.commonGuideHelper)==null||(o=o.getState())==null?void 0:o.mountGuidesMap)||new Map;r.includes(E)||s.get(d.s.GUIDE_NOVICE_2309)&&((_=MB)==null||(_=_.commonGuideHelper)==null||_.tryToContinueMountGuide(d.s.GUIDE_NOVICE_2309,E))},w=()=>{var E,c;const o=h();!(o!=null&&o.isInProgress)||!(((E=MB)==null||(E=E.commonGuideHelper)==null||(E=E.getState())==null?void 0:E.mountGuidesMap)||new Map).get(d.s.GUIDE_NOVICE_2309)||(c=MB)==null||(c=c.commonGuideHelper)==null||c.tryToCloseMountGuide(d.s.GUIDE_NOVICE_2309)},m=()=>{var E,c,o;const _=h();if(!_||_.isCompleted||!((E=MB)!=null&&(E=E.commonGuideHelper)!=null&&(E=E.getState())!=null&&E.commonGuidesHasShown))return!1;const r=((c=MB)==null||(c=c.commonGuideHelper)==null||(c=c.getState())==null?void 0:c.commonGuidesHasShown)||[];return r.includes(d.s.GUIDE_NOVICE_2309_TIP_1)?!r.includes(d.s.GUIDE_NOVICE_2309):((o=MB)==null||(o=o.commonGuideHelper)==null||o.tryToShowGuide(d.s.GUIDE_NOVICE_2309_TIP_1),!0)}},10431:(B,L,t)=>{"use strict";t.d(L,{$R:()=>m,Ln:()=>i,SX:()=>E,uy:()=>c});var d=t(91320),y=t(42957);const b=o=>o.startsWith("#"),h=o=>["_blank","_self"].includes(o)?o:"_blank",i=o=>{if(typeof o!="object"&&Object.prototype.hasOwnProperty.call(o,"blocks"))return{blocks:[],entityMap:{}};const{blocks:_={},entityMap:r={}}=o,s={};for(const M of Object.keys(r)){const v=r[M];s[M]=v.type==="IMAGE"&&v.data.src?{...v,data:{...v.data,src:(0,y.ab)(v.data.src)}}:v}return{blocks:Object.keys(_).map(M=>({..._[M],key:M})).sort((M,v)=>(0,d.r0)(M.key.substring(1))-(0,d.r0)(v.key.substring(1))),entityMap:s}},l=(o,_)=>{const r={};for(const s of o){const{key:M,...v}=s;_?r[M]={...v,inlineStyleRanges:[],data:{}}:r[M]=v}return r},w=o=>{const _={};return Object.keys(o).sort((r,s)=>parseInt(r)-parseInt(s)).forEach(r=>{const s=o[r];s.type==="LINK"?_[r]={...s,data:{...s.data,targetOption:h(s.data.targetOption||s.data.target||"_blank")}}:_[r]=s.type==="IMAGE"&&s.data.src?{...s,data:{...s.data,src:(0,y.G1)("DT",s.data.src).key,width:s.data.width||100,alt:s.data.alt||"",alignment:s.data.alignment||"center"}}:{...s}}),_},m=(o,_)=>{const{blocks:r=[],entityMap:s={}}=o;if(r.length===0)return{blocks:{},entityMap:{}};let M=[...r];if(r.filter(F=>!b(F.key)).length>0){let F=!1;const I=r.length;for(let a=0;a<I;a+=1){const C=r[a],{key:D}=C;if(!b(D)){let O;if(a===0)if(a+1>=I)O="#"+(0,d.A0)(0);else{const A=r[a+1];if(A&&b(A.key)){const X=(0,d.r0)(A.key.substring(1)),le=Math.round(X)-10;O="#"+(0,d.A0)(le)}else{F=!0;break}}if(a!==0&&a===I-1){const A=r[a-1];if(A&&b(A.key)){const X=(0,d.r0)(A.key.substring(1)),le=Math.round(X)+10;O="#"+(0,d.A0)(le)}else{F=!0;break}}if(a>0&&a<I-1){const A=r[a-1],X=r[a+1];if(A&&b(A.key)&&X&&b(X.key)){const le=(0,d.r0)(A.key.substring(1)),oe=((0,d.r0)(X.key.substring(1))-le)/2;if(oe>.001)O="#"+(0,d.A0)(le+oe);else{F=!0;break}}else{F=!0;break}}O&&(M[a]={...C,key:O})}}F&&(M=r.map((a,C)=>({...a,key:"#"+(0,d.A0)(C*10)})))}return{blocks:l(M,_),entityMap:w(s)}},E=(o,_)=>{if(!["fontsize","fontfamily","fontweight","BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","color","lineheight","letterspacing"].includes(_))return o;const r={blocks:{...o.blocks},entityMap:{...o.entityMap}};return Object.keys(o.blocks).forEach(s=>{o.blocks[s]&&o.blocks[s].inlineStyleRanges&&o.blocks[s].inlineStyleRanges.length>0&&(r.blocks[s].inlineStyleRanges=o.blocks[s].inlineStyleRanges.filter(M=>!M.style.includes(_)))}),r},c=(o,_)=>{if(!["paraSpacing"].includes(_))return o;const r={blocks:{...o.blocks},entityMap:{...o.entityMap}};return Object.keys(o.blocks).forEach(s=>{if(o.blocks[s]&&o.blocks[s].data){const M={};Object.keys(o.blocks[s].data).forEach(v=>{v!==_&&(M[v]=o.blocks[s].data[v])}),r.blocks[s].data=M}}),r}},29787:(B,L,t)=>{"use strict";t.d(L,{Z:()=>_e});var d=t(73774),y=t.n(d),b=t(65591),h=t.n(b),i=t(23860),l=t(11721),w=t(58438),m=t(29660),E=t(95581),c=t(36283),o=t(33785),_=t(4234);const r="&nbsp;",s=" ",M=new RegExp("\\r","g"),v=new RegExp(r,"g"),F=new RegExp("&#13;","g"),I=new RegExp("&#8203;?","g"),a=["unordered-list-item","ordered-list-item"],C={"public-DraftStyleDefault-depth0":0,"public-DraftStyleDefault-depth1":1,"public-DraftStyleDefault-depth2":2,"public-DraftStyleDefault-depth3":3,"public-DraftStyleDefault-depth4":4};let D=!0;const O=(oe,J,Ee,de,Ue,W)=>{const Y=J.nodeName.toLowerCase();let re=de;if(Y==="#text")return(0,w.xC)(J,Ee,W);if(Y==="br"){const $=J.nextSibling,xe=$&&($.nodeName||"").toLowerCase();return xe==="#text"||xe==="br"?{chunk:(0,w.r7)()}:{chunk:(0,w.mH)()}}if(oe===_.R.COMMON&&Y==="img"&&J instanceof HTMLImageElement){const $={};$.src=J.getAttribute&&J.getAttribute("src")||J.src,$.alt=J.alt,$.height=J.style.height,$.width=J.style.width,J.style.float&&($.alignment=J.style.float),J.style.textAlign&&($.alignment=J.style.textAlign),$.alignment||($.alignment="center");const xe=d.Entity.__create("IMAGE","MUTABLE",$);return{chunk:(0,w.ve)(xe)}}if(Y==="video"&&J instanceof HTMLVideoElement)return{chunk:(0,w.mH)()};if(Y==="iframe"&&J instanceof HTMLIFrameElement)return{chunk:(0,w.mH)()};const Le=(0,m.M)(oe,Y,Ue);let Me;if(Le)if(Y==="ul"||Y==="ol")Ue=Y,re+=1;else{const $=J.parentNode,xe=$&&$.nodeName&&["div","p","ol","ul"].includes($.nodeName.toLowerCase()),Xe=$.childNodes;let Ne=!1;xe&&Xe&&Xe.length&&(Ne=h()(Xe,Oe=>Oe.nodeName.toLowerCase()!=="#text"));const k=J&&J.nodeName&&["div","p","ol","ul"].includes(J.nodeName.toLowerCase()),Q=J.childNodes;let ie=!1;k&&Q&&Q.length&&(ie=h()(Q,Oe=>Oe.nodeName.toLowerCase()!=="#text"));const ae=Ne&&ie;if(!a.includes(Le))ae||(Ue="",re=-1);else{const Oe=J.classList;a.includes(Le)&&Oe&&Oe.length&&h()(Oe,se=>{if(se&&se.startsWith("public-DraftStyleDefault-depth")){const tt=C[se];if(typeof tt=="number")return re=tt,!1}return!0})}D?(Me=(0,w.hK)(Le,(0,E._)(oe,J)),D=!1):ae||$&&$.nodeName&&!["li","h1","h2","h3"].includes($.nodeName.toLowerCase())&&(Me=(0,w.Xx)(Le,re,(0,E._)(oe,J)))}Me||(Me=(0,w.mH)()),Ee=(0,o.A)(oe,Y,J,Ee);let Ge=J.firstChild;for(;Ge;){const $=(0,c.B)(Ge),{chunk:xe}=O(oe,Ge,Ee,re,Ue,$||W);Me=(0,w.jK)(Me,xe),Ge=Ge.nextSibling}return{chunk:Me}},A=(oe,J)=>{let Ee=oe.trim().replace(M,"").replace(v,s).replace(F,"").replace(I,"");Ee=Ee.replace(/<br[^>]*>/g,"<br>").replace(/<img[^>]*>/g,"").replace(/<figure[^>]*>/g,"").replace(/<\/figure>/g,"").replace(/<!--[^-->]*-->/g,"").replace(/<div class="mb-list-need-remove"[^<]*<\/div>/g,"").replace(/<([ou]l)[^>]*\s+(style="[^"]*?(font-size|color)[^;"]*?;?[^"]*?")[^>]*>/g,"<$1>"),J!==_.R.COMMON&&(Ee=Ee.replace(/<a[^>]*>/g,"").replace(/<\/a>/g,""),Ee=Ee.replace(/<ul/g,"<div").replace(/<\/ul>/g,"</div>").replace(/<li/g,"<div").replace(/<\/li>/g,"</div>").replace(/public-DraftStyleDefault-depth[0-4]/g,""));const de=(0,l.x)(Ee);if(!de)return null;D=!0;const{chunk:Ue}=O(J,de,(0,i.OrderedSet)(),-1,"",void 0);return{chunk:Ue}},X=function(oe,J){J===void 0&&(J=0);const Ee=A(oe,J);if(Ee){const{chunk:de}=Ee;let Ue=(0,i.OrderedMap)({});de.entities&&de.entities.forEach(Me=>{Me&&(Ue=Ue.set(Me,d.Entity.__get(Me)))});let W=0;const Y=de.text.split("\r"),re=Y.map((Me,Ge)=>{const $=W+Me.length,xe=de&&de.inlines.slice(W,$);W=$});return W=0,{contentBlocks:Y.map((Me,Ge)=>{const $=W+Me.length,xe=de&&de.inlines.slice(W,$),Xe=de&&de.entities.slice(W,$),Ne=le(xe,Xe);return W=$,new d.ContentBlock({key:(0,d.genKey)(),type:de&&de.blocks[Ge]&&de.blocks[Ge].type||"unstyled",depth:de&&de.blocks[Ge]&&de.blocks[Ge].depth,data:de&&de.blocks[Ge]&&de.blocks[Ge].data||(0,i.Map)({}),text:Me,characterList:Ne})}),entityMap:Ue}}return null},le=(oe,J)=>(0,i.List)(oe.map((Ee,de)=>{const Ue={style:Ee,entity:null};return J[de]&&(Ue.entity=J[de]),d.CharacterMetadata.create(Ue)})),_e=X},45201:(B,L,t)=>{"use strict";t.d(L,{SL:()=>m,cO:()=>E,hE:()=>w,my:()=>l,x2:()=>i,zo:()=>c});var d=t(35517),y=t(73752),b=t(26886),h=t(6206);const i=function(o,_){_===void 0&&(_=!0);let r=_?I18N.ChatGPT.ai_api_conversation_error:I18N.ChatGPT.ai_api_error_create;if(o===403){_||(r="");const s=(0,b.UF)(),M=(0,h._HC)(s),v=(0,h.voT)(s);MB.global.popupHelper.upgradeChatGPTAsync({orgCid:v.is_org_project?M.cid:"",checkoutArea:"workspace",checkoutPlace:"workspace-V8_AI_Remaining"})}else o===451?r=I18N.ChatGPT.ai_api_error_illegal:o===405&&(r=I18N.ChatGPT.ai_api_conversation_progress);return r},l=async(o,_,r)=>{try{const{reply:s,used_times:M,limited:v,usage:F}=await(0,y.Gf)("/go/v1/chatbot/chat",{messages:o,workspace:_,task_id:r});return{reply:s,limited:v,times:M,loadingID:r,usage:F}}catch(s){return(s.status===401||/401/.test(s.message))&&((0,d.v5)(),await MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,d.av)())),{loadingID:r}}},w=async(o,_,r,s,M)=>{try{const v=await fetch("/go/v1/chatbot/chat/stream",{method:"POST",credentials:"same-origin",headers:{"content-type":"application/json"},body:JSON.stringify({messages:o,workspace:_,task_id:r})});if(!v||!v.ok||!v.body){s(!1,i(v.status),r,v.status),(v==null?void 0:v.status)===401&&((0,d.v5)(),await MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,d.av)()));return}const F=v.body.getReader(),I=new TextDecoder;for(;;){const{value:a,done:C}=await F.read(),D=I.decode(a);if(M(D,r),C)break}s(!0,"",r,200),await E()}catch(v){s(!1,i(0),r,402)}},m=async()=>{if(!ENV.IS_WONDER_SHARE)return{success:!1};try{const o=(0,b.UF)(),_=(0,h.tse)(o),r=(0,h._HC)(o),s=(0,h.voT)(o),M=r?r.cid:"me",{used_times:v,limited:F}=await(0,y.EE)("/go/v1/chatbot/count_chat?workspace="+M);return s.is_org_project&&r?MB.action("set:current:org",{org:Object.assign(r,{used_times:v})}):MB.action("set:current:user",{user:Object.assign(_,{used_times:v})}),MB.action("ai:update:aiUseTimes",v),{times:v,limited:F,success:!0}}catch(o){return console.log("#### error:",o),{success:!1}}},E=async()=>{if(!ENV.IS_WONDER_SHARE)try{const o=(0,b.UF)(),_=(0,h.tse)(o),r=(0,h._HC)(o),s=(0,h.voT)(o),M=r?r.cid:"me",{points:v}=await(0,y.EE)("/go/v1/chatbot/chat/points?workspace="+M);s.is_org_project&&r?MB.action("set:current:org",{org:Object.assign(r,{ai_points:v})}):MB.action("set:current:user",{user:Object.assign(_,{ai_points:v})}),MB.action("ai:update:aiPoints",v)}catch(o){console.log("#### error:",o)}},c=async function(o,_,r,s){_===void 0&&(_=0),r===void 0&&(r="stop"),s===void 0&&(s="generate")}},70692:(B,L,t)=>{"use strict";t.d(L,{X:()=>y,rJ:()=>b});let d=function(h){return h[h.message=0]="message",h[h.picture=1]="picture",h[h.video=2]="video",h[h.unknown=3]="unknown",h}({}),y=function(h){return h.user="user",h.assistant="assistant",h}({}),b=function(h){return h[h.success=0]="success",h[h.input=1]="input",h[h.generating=2]="generating",h[h.fail=3]="fail",h[h.streaming=4]="streaming",h}({})},75507:(B,L,t)=>{"use strict";t.d(L,{FS:()=>_,NQ:()=>o,qK:()=>c});var d=t(53375),y=t.n(d),b=t(92728),h=t(85322),i=t(80461),l=t(10552);const w=()=>MB.getSelectionItems().length===0;let m=!1,E;const c={keys:{tab:()=>{if(document.activeElement===document.body)return!1},enter:()=>{MB.action("entry:enter:key"),(0,i.k)("enter")},f2:()=>{MB.action("entry:enter:key"),(0,i.k)("f2")},"command+shift+h":()=>{MB.action("entry:toggle:visible"),(0,i.k)("command+shift+h")},"ctrl+shift+h":()=>{MB.action("entry:toggle:visible"),(0,i.k)("ctrl+shift+h")},left:()=>{MB.action("entry:arrow:key",{direction:"x",rate:-1}),(0,i.k)("left")},"alt+left":()=>{MB.action("entry:arrow:key",{direction:"x",rate:-1}),(0,i.k)("alt+left")},right:()=>{MB.action("entry:arrow:key",{direction:"x",rate:1}),(0,i.k)("right")},"alt+right":()=>{MB.action("entry:arrow:key",{direction:"x",rate:1}),(0,i.k)("alt+right")},up:()=>{MB.action("entry:arrow:key",{direction:"y",rate:-1}),(0,i.k)("up")},"alt+up":()=>{MB.action("entry:arrow:key",{direction:"y",rate:-1}),(0,i.k)("alt+up")},down:()=>{MB.action("entry:arrow:key",{direction:"y",rate:1}),(0,i.k)("down")},"alt+down":()=>{MB.action("entry:arrow:key",{direction:"y",rate:1}),(0,i.k)("alt+down")},"shift+left":()=>{MB.action("entry:arrow:key",{direction:"x",rate:-10}),(0,i.k)("shift+left")},"alt+shift+left":()=>{MB.action("entry:arrow:key",{direction:"x",rate:-10}),(0,i.k)("alt+shift+left")},"shift+right":()=>{MB.action("entry:arrow:key",{direction:"x",rate:10}),(0,i.k)("shift+right")},"alt+shift+right":()=>{MB.action("entry:arrow:key",{direction:"x",rate:10}),(0,i.k)("alt+shift+right")},"shift+up":()=>{MB.action("entry:arrow:key",{direction:"y",rate:-10}),(0,i.k)("shift+up")},"alt+shift+up":()=>{MB.action("entry:arrow:key",{direction:"y",rate:-10}),(0,i.k)("alt+shift+up")},"shift+down":()=>{MB.action("entry:arrow:key",{direction:"y",rate:10}),(0,i.k)("shift+down")},"alt+shift+down":()=>{MB.action("entry:arrow:key",{direction:"y",rate:10}),(0,i.k)("alt+shift+down")},"command+c":()=>{w()||(MB.action("entry:copy:items"),MB.action("entry:copy:items:properties"),(0,b.BK)(),(0,i.k)("command+c"))},"ctrl+c":()=>{w()||(MB.action("entry:copy:items"),MB.action("entry:copy:items:properties"),(0,b.BK)(),(0,i.k)("ctrl+c"))},"command+d":()=>{w()||(MB.action("entry:duplicate:items",{shift:!1}),(0,i.k)("command+d"))},"ctrl+d":()=>{w()||(MB.action("entry:duplicate:items",{shift:!1}),(0,i.k)("ctrl+d"))},"command+shift+d":()=>{w()||(MB.action("entry:duplicate:items",{shift:!0}),(0,i.k)("command+shift+d"))},"ctrl+shift+d":()=>{w()||(MB.action("entry:duplicate:items",{shift:!0}),(0,i.k)("ctrl+shift+d"))},"command+shift+v":()=>{MB.action("entry:paste:items:at",{clientPos:{clientX:MB.clientX,clientY:MB.clientY}}),(0,i.k)("command+shift+v")},"ctrl+shift+v":()=>{MB.action("entry:paste:items:at",{clientPos:{clientX:MB.clientX,clientY:MB.clientY}}),(0,i.k)("ctrl+shift+v")},"command+x":()=>{w()||(MB.action("entry:cut:items"),(0,b.BK)(),(0,i.k)("command+x"))},"ctrl+x":()=>{w()||(MB.action("entry:cut:items"),(0,b.BK)(),(0,i.k)("ctrl+x"))},backspace:()=>{MB.action("entry:delete:selected-items"),MB.action("enter:comment:shortcut:del"),(0,i.k)("backspace")},del:()=>{MB.action("entry:delete:selected-items"),MB.action("enter:comment:shortcut:del"),(0,i.k)("delete")},"command+shift+l":()=>{MB.action("entry:toggle:lock"),(0,i.k)("command+shift+l")},"ctrl+shift+l":()=>{MB.action("entry:toggle:lock"),(0,i.k)("ctrl+shift+l")},"command+g":()=>{MB.action("entry:group:items"),(0,i.k)("command+g")},"ctrl+g":()=>{MB.action("entry:group:items"),(0,i.k)("ctrl+g")},"command+shift+g":()=>{MB.action("entry:ungroup:items"),(0,i.k)("command+shift+g")},"ctrl+shift+g":()=>{MB.action("entry:ungroup:items"),(0,i.k)("ctrl+shift+g")},"command+alt+l":()=>{MB.action("entry:align:items",{direction:"left"}),(0,i.k)("command+alt+l")},"ctrl+alt+l":()=>{MB.action("entry:align:items",{direction:"left"}),(0,i.k)("ctrl+alt+l")},"command+alt+c":()=>{MB.action("entry:align:items",{direction:"center"}),(0,i.k)("command+alt+c")},"ctrl+alt+c":()=>{MB.action("entry:align:items",{direction:"center"}),(0,i.k)("ctrl+alt+c")},"command+alt+r":()=>{MB.action("entry:align:items",{direction:"right"}),(0,i.k)("command+alt+r")},"ctrl+alt+r":()=>{MB.action("entry:align:items",{direction:"right"}),(0,i.k)("ctrl+alt+r")},"command+alt+t":()=>{MB.action("entry:align:items",{direction:"top"}),(0,i.k)("command+alt+t")},"ctrl+alt+t":()=>{MB.action("entry:align:items",{direction:"top"}),(0,i.k)("ctrl+alt+t")},"command+alt+m":()=>{MB.action("entry:align:items",{direction:"middle"}),(0,i.k)("command+alt+m")},"ctrl+alt+m":()=>{MB.action("entry:align:items",{direction:"middle"}),(0,i.k)("ctrl+alt+m")},"command+alt+b":()=>{MB.action("entry:align:items",{direction:"bottom"}),(0,i.k)("command+alt+b")},"ctrl+alt+b":()=>{MB.action("entry:align:items",{direction:"bottom"}),(0,i.k)("ctrl+alt+b")},"command+alt+h":()=>{MB.action("entry:distribute:items",{direction:"horizontal"}),(0,i.k)("command+alt+h")},"ctrl+alt+h":()=>{MB.action("entry:distribute:items",{direction:"horizontal"}),(0,i.k)("ctrl+alt+h")},"command+alt+u":()=>{MB.action("entry:distribute:items",{direction:"vertical"}),(0,i.k)("command+alt+u")},"ctrl+alt+u":()=>{MB.action("entry:distribute:items",{direction:"vertical"}),(0,i.k)("ctrl+alt+u")},"command+alt+up":()=>{MB.action("entry:items:forward"),(0,i.k)("command+alt+up")},"ctrl+alt+up":()=>{MB.action("entry:items:forward"),(0,i.k)("ctrl+alt+up")},"command+alt+down":()=>{MB.action("entry:items:backward"),(0,i.k)("command+alt+down")},"ctrl+alt+down":()=>{MB.action("entry:items:backward"),(0,i.k)("ctrl+alt+down")},"command+shift+up":()=>{MB.action("entry:items:send:front"),(0,i.k)("command+shift+up")},"ctrl+shift+up":()=>{MB.action("entry:items:send:front"),(0,i.k)("ctrl+shift+up")},"command+shift+down":()=>{MB.action("entry:items:send:back"),(0,i.k)("command+shift+down")},"ctrl+shift+down":()=>{MB.action("entry:items:send:back"),(0,i.k)("ctrl+shift+down")},"command+;":()=>{MB.action("entry:expand:all:screen"),(0,i.k)("command+;")},"ctrl+;":()=>{MB.action("entry:expand:all:screen"),(0,i.k)("ctrl+;")},"command+'":()=>{MB.action("entry:unexpand:all:screen"),(0,i.k)("command+''")},"ctrl+'":()=>{MB.action("entry:unexpand:all:screen"),(0,i.k)("ctrl+'")},"`":()=>{(0,i.k)("`")},"\xB7":()=>{(0,i.k)("`")},"[, ]":()=>{y()().isBefore("2021-11-12 23:59:59")&&MB.notice({text:I18N.Common.brackets_key_update_tips.replace("%key%",'<span class="key">'+((0,l.ED)()?"Ctrl":"\u2318")+"</span>")}),(0,i.k)("[, ]")},"command+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("command+[")},"ctrl+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("ctrl+[")},"command+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("command+]")},"ctrl+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("ctrl+]")},"command+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("command+p")},"ctrl+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("ctrl+p")},"command+s":()=>{MB.global.experienceLoginModalHelper("isSave")||MB.action("entry:start:saving"),(0,i.k)("command+s")},"ctrl+s":()=>{MB.global.experienceLoginModalHelper("isSave")||MB.action("entry:start:saving"),(0,i.k)("ctrl+s")},1:()=>{MB.action("entry:number:key",{key:1}),(0,i.k)("1")},2:()=>{MB.action("entry:number:key",{key:2}),(0,i.k)("2")},3:()=>{MB.action("entry:number:key",{key:3}),(0,i.k)("3")},4:()=>{MB.action("entry:number:key",{key:"4"}),(0,i.k)("4")},5:()=>{MB.action("entry:number:key",{key:5}),(0,i.k)("5")},6:()=>{MB.action("entry:number:key",{key:6}),(0,i.k)("6")},7:()=>{MB.action("entry:number:key",{key:7}),(0,i.k)("7")},8:()=>{ENV.IS_FEAT_AI&&(MB.action("entry:number:key",{key:8}),(0,i.k)("8"))},"command+a":()=>{MB.action("entry:select:all"),(0,i.k)("command+a")},"ctrl+a":()=>{MB.action("entry:select:all"),(0,i.k)("ctrl+a")},esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+z":()=>{MB.action("entry:undo-stack:undo"),(0,i.k)("command+z")},"ctrl+z":()=>{MB.action("entry:undo-stack:undo"),(0,i.k)("ctrl+z")},"command+shift+z":()=>{MB.action("entry:undo-stack:redo"),(0,i.k)("command+shift+z")},"ctrl+shift+z":()=>{MB.action("entry:undo-stack:redo"),(0,i.k)("ctrl+shift+z")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")},"command+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+2")},"ctrl+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+2")},"command+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+numpad_2")},"ctrl+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+numpad_2")},"command+alt+a":()=>{MB.action("entry:isShowSticky:toggle"),(0,i.k)("command+alt+a")},"ctrl+alt+a":()=>{MB.action("entry:isShowSticky:toggle"),(0,i.k)("ctrl+alt+a")},"command+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("command+f")},"ctrl+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("ctrl+f")},"command+alt+v":()=>{w()||(MB.action("entry:paste:items:properties"),(0,i.k)("command+alt+v"))},"ctrl+alt+v":()=>{w()||(MB.action("entry:paste:items:properties"),(0,i.k)("ctrl+alt+v"))},"command+b":()=>{MB.action("entry:set:text:attr:by:key",{attr:"boldType"}),(0,i.k)("command+b \u9009\u4E2D\u6574\u4F53")},"ctrl+b":()=>{MB.action("entry:set:text:attr:by:key",{attr:"boldType"}),(0,i.k)("command+b \u9009\u4E2D\u6574\u4F53")},"command+i":()=>{MB.action("entry:set:text:attr:by:key",{attr:"italic"}),(0,i.k)("command+i \u9009\u4E2D\u6574\u4F53")},"ctrl+i":()=>{MB.action("entry:set:text:attr:by:key",{attr:"italic"}),(0,i.k)("command+i \u9009\u4E2D\u6574\u4F53")},"command+u":()=>{MB.action("entry:set:text:attr:by:key",{attr:"underline"}),(0,i.k)("command+u \u9009\u4E2D\u6574\u4F53")},"ctrl+u":()=>{MB.action("entry:set:text:attr:by:key",{attr:"underline"}),(0,i.k)("command+u \u9009\u4E2D\u6574\u4F53")},"command+shift+s":()=>{MB.action("entry:set:text:attr:by:key",{attr:"lineThrough"}),(0,i.k)("command+shift+s \u9009\u4E2D\u6574\u4F53")},"ctrl+shift+s":()=>{MB.action("entry:set:text:attr:by:key",{attr:"lineThrough"}),(0,i.k)("command+shift+s \u9009\u4E2D\u6574\u4F53")},"command+shift+.":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"increase"}),(0,i.k)("command+shift+. \u9009\u4E2D\u6574\u4F53")},"ctrl+shift+.":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"increase"}),(0,i.k)("command+shift+. \u9009\u4E2D\u6574\u4F53")},"command+shift+,":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"decrease"}),(0,i.k)("command+shift+, \u9009\u4E2D\u6574\u4F53")},"ctrl+shift+,":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"decrease"}),(0,i.k)("command+shift+, \u9009\u4E2D\u6574\u4F53")},"shift+/":()=>{MB.action("entry:shortcut:undoable:items:set:attr:border")},i:()=>{if(window.EyeDropper){m?(m=!1,E.abort("double press i")):(m=!0,E=new AbortController,new window.EyeDropper().open({signal:E.signal}).then(v=>{let{sRGBHex:F}=v;m=!1,MB.action("entry:i:key",{color:F})}).catch(v=>{console.error(v),m=!1})),(0,i.k)("i");return}const{name:s,version:M}=MB.browserInfo;if(["Chrome","Edge"].includes(s)&&M<=95||s==="Opera"&&M<=81){MB.notice({text:"\u5F53\u524D\u6D4F\u89C8\u5668\u7248\u672C\u4E0D\u652F\u6301\u53D6\u8272\u5668\u5FEB\u6377\u952E"});return}MB.notice({text:"\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u53D6\u8272\u5668\u5FEB\u6377\u952E"})},"alt+1":()=>{MB.action("entry:directory:nav:key",{key:1}),(0,i.k)("alt+1")},"alt+2":()=>{MB.action("entry:directory:nav:key",{key:2}),(0,i.k)("alt+2")},c:()=>{MB.action("entry:comment:toggle"),MB.action("entry:ST:STMode:disable"),MB.action("elbow:update",{isInElbowMode:!1}),(0,i.k)("c")},e:()=>{MB.action("entry:elbow:isInElbowMode:toggle"),MB.action("entry:ST:STMode:disable"),MB.action("set:quick-create-widget",{widget:null})}},priority:h.e7.Normal,isGlobal:!1},o={keys:{"command+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("command+[")},"ctrl+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("ctrl+[")},"command+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("command+]")},"ctrl+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("ctrl+]")},esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")},"command+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+2")},"ctrl+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+2")},"command+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+numpad_2")},"ctrl+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+numpad_2")},"command+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("command+f")},"ctrl+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("ctrl+f")},c:()=>{MB.action("entry:comment:toggle",{onlyView:!0}),(0,i.k)("c")},"alt+1":()=>{MB.action("entry:directory:nav:key",{key:1}),(0,i.k)("alt+1")},"alt+2":()=>{MB.action("entry:directory:nav:key",{key:2}),(0,i.k)("alt+2")},"command+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("command+p")},"ctrl+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("ctrl+p")}},priority:h.e7.Normal,isGlobal:!1},_={keys:{esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")}},priority:h.e7.Normal,isGlobal:!1},r={keys:{"command+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("command+[")},"ctrl+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("ctrl+[")},"command+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("command+]")},"ctrl+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("ctrl+]")},esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")},"command+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+2")},"ctrl+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+2")},"command+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+numpad_2")},"ctrl+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+numpad_2")},"command+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("command+f")},"ctrl+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("ctrl+f")},"alt+1":()=>{MB.action("entry:directory:nav:key",{key:1}),(0,i.k)("alt+1")},"alt+2":()=>{MB.action("entry:directory:nav:key",{key:2}),(0,i.k)("alt+2")},"command+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("command+p")},"ctrl+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("ctrl+p")}},priority:h.e7.Normal,isGlobal:!1}},89719:(B,L,t)=>{"use strict";t.d(L,{Ei:()=>c,NZ:()=>s,X4:()=>m,ec:()=>_,ew:()=>a,hm:()=>E,j_:()=>r,o6:()=>C});var d=t(46198),y=t(63077),b=t(35517),h=t(73752),i=t(29184),l=t(35269);const w=async D=>{let{projectCid:O}=D;return fetchGetJSON("/api/upper/web_v1/sharing/initial?cid="+O)},m=async D=>{let{projectCid:O,sharing:A}=D;return(await(0,h.Gf)("/api/flat/web_v1/project_share/"+O,{...A})).project_share},E=async D=>{let{projectCid:O,sharingCid:A}=D;try{return await(0,h.Bh)("/api/flat/web_v1/project_share/"+A+"?project_cid="+O)}catch(X){await(0,b.Vz)(X)}},c=async D=>{let{sharing:O}=D;try{return await(0,h.IP)("/api/flat/web_v1/project_share/"+O.cid,{project_share:O})}catch(A){await(0,b.Vz)(A)}},o=()=>{const D=document.getElementById("workspace");d.render((0,l.jsx)(y.Z,{locale:(0,i.F)(),errorType:404,customDes:I18N.ToolBar.ReEnter,isShowPrimaryBtn:!1}),D)},_=async D=>{try{if(!D.accessToken||D.project.access_token===D.accessToken)return r(D.project);{const{project:O,accessToken:A}=D,{project_share:X}=await(0,h.EE)("/api/flat/web_v1/project_share/"+O.cid+"?access_token="+A);return{sharing:{...X,type:"advanced",view_mode:X.device_model}}}}catch(O){await o()}},r=D=>{const{cid:O,access_token:A,access:X,building:le,comment_permission:_e,password:oe,visibility:J,wechat:Ee}=D,de=new URLSearchParams(location.search),Ue=de.get("screen"),W=de.get("canvasId"),Y=de.get("view_mode")||"read_only",re=!!de.get("selection"),Le=re?de.get("selection").split(","):[];return{sharing:{type:"default",project_cid:O,access_token:A,view_access:X,view_sticky:le,comment_permission:_e,password:oe,visibility:J,wechat:Ee,view_mode:Y,screen_visible_switch:re,screen_visible_list:Le,page_begin:Ue,canvas_begin:W}}},s=async D=>{let{projectCid:O}=D;try{const{project_shares:A}=await(0,h.EE)("/api/flat/web_v1/project_share/"+O+"/all");return A.sort((X,le)=>new Date(le.created_at).getTime()-new Date(X.created_at).getTime())}catch(A){await(0,b.Vz)(A)}},M=async D=>{try{const{result:O}=await fetchGetJSON("/api/accesses/v4/project/"+D+"/permission_check?permission=P:update");return O}catch(O){await apiErrorModals(O)}},v=async D=>{let O=null;try{O=await fetchGetJSON("/flpak/w-p2meta/"+D)}catch(A){await apiErrorModals(A)}return O},F={access_token:"",comment_permission:"",device_model:"",highlight:!0,password:"",project_cid:"",screen_visible_switch:!1,screen_visible_list:[],shell_type:"device",simulator_type:"device",sticky:!0,view_access:"private",view_count:0,view_prd:!1,wechat:!1},I=()=>({sharing:F}),a=async D=>{let O,A;try{O=await(0,h.EE)("/api/upper/web_v1/basics/"+D+"/get_details"),O&&JSON.stringify(O)!=="{}"&&(A=!0)}catch(X){O=X,A=!1}return{result:O,statusOk:A}},C=async D=>{let O,A;try{O=await(0,h.EE)("/api/accesses/v4/project/"+D+"/permission_check?permission=P:update"),O&&JSON.stringify(O)!=="{}"&&(A=!0)}catch(X){O=X,A=!1}return{result:O,statusOk:A}}},68035:(B,L,t)=>{"use strict";t.d(L,{K:()=>w,L:()=>m});var d=t(63077),y=t(86478),b=t(7485),h=t(18166),i=t(29184),l=t(35269);const w=E=>{if((0,h.EG)(E))return m()},m=()=>(setTimeout(()=>{var E;return(E=MB)==null||(E=E.messageBucket)==null?void 0:E.send("mobileLoadProjectError",{errMsg:"\u753B\u5E03\u65E0\u9875\u9762\uFF0C\u65E0\u6CD5\u9884\u89C8"})},1e3),(0,l.jsx)(d.Z,{errorType:404,locale:(0,i.F)(),customTitle:I18N.dModule.project_screen_err_title,customDes:I18N.ToolBar.ReEnter,isShowSecondaryBtn:!1,primaryClick:()=>(0,y.HM)("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")}))},10737:(B,L,t)=>{"use strict";t.d(L,{Z:()=>w});var d=t(37780),y=t(77646),b=t(77200),h=t(9038);const i=m=>m.container.previewSetting.isShowSplash,l=(0,y.P1)([b.CL,b.vo,b.gz,i,b.GP,b.yT,b.Uq,b.EB],(m,E,c,o,_,r,s,M)=>{let{activePageKey:v,activeCanvasKey:F}=s;return{screen:m,project:E,isImmersive:c,isShowSplash:o,previewOptions:_,isPanelPreviewMode:r,activePageKey:v,activeCanvasKey:F,isPreviewCombo:M}}),w=(0,d.$j)(m=>l(m))(h.Z)},86478:(B,L,t)=>{"use strict";t.d(L,{HM:()=>_});var d=t(63077),y=t(45090),b=t(7485),h=t(46198),i=t(95534),l=t(38546),w=t(35269);const m=document.getElementById("workspace"),E=(0,y.ZP)(d.Z).withConfig({displayName:"utils__CustomizedCrashedPageStyle",componentId:"sc-1g7yepo-0"})([".btn-list{display:flex;flex-direction:row-reverse;justify-content:center;.primary{margin-left:20px;}.regular{margin-left:0 !important;}}"]),c=(r,s,M)=>{ReactDOM.render(_jsx(_Fragment,{children:_jsx(E,{locale:getMBLocale(),errorType:r.status||401,customTitle:s,customDes:M})}),m)},o=async r=>{var s;let M,v,F,I,a;try{({user:a}=await fetchGetJSON("/api/web/v3/initial"))}catch(C){console.warn("[crashedPageWithUser]",C);const D=ENV.IS_WONDER_SHARE?LoginModalWS:LoginModal;M=()=>{ReactDOM.render(_jsx(D,{isOpen:!0,type:"signin",source:"proto-org-preview",onConfirm:()=>location.reload()},Math.random()),document.getElementById("IBOT_MODAL_ROOT"))},v=I18N.Common.signin,I=()=>{ReactDOM.render(_jsx(D,{isOpen:!0,type:"signup",source:"proto-org-preview",onConfirm:()=>location.reload()},Math.random()),document.getElementById("IBOT_MODAL_ROOT"))},F=I18N.Common.signup,a={}}ReactDOM.render(_jsx(_Fragment,{children:_jsx(E,{locale:getMBLocale(),errorType:r.status||401,identity:1,account:(s=a)==null?void 0:s.email,primaryBtnText:v,primaryBtnClick:M,secondaryBtnText:F,secondaryBtnClick:I})}),m)},_=(r,s)=>{let M="";r==="zh-CN"?M="/":r==="jp"?M="https://mockitt.wondershare.jp":M="https://mockitt.wondershare.com",location.replace(M)}},9569:(B,L,t)=>{"use strict";t.d(L,{C:()=>b,S:()=>h});var d=t(1372);const y=i=>("0"+parseInt(i).toString(16)).slice(-2),b=i=>!i||i==="rgba(0, 0, 0, 0)"||i==="transparent"?"transparent":(i=i.match(/^rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/),"#"+y(i[1])+y(i[2])+y(i[3])),h=i=>(0,d.LW)((0,d.LS)(i))},53092:(B,L,t)=>{"use strict";t.d(L,{PX:()=>M,z:()=>r});var d=t(53375),y=t.n(d),b=t(43827),h=t.n(b),i=t(57480),l=t.n(i),w=t(29184);function m(v){return v<10?"0"+v:v}function E(v,F,I){const a=new Date(v),C=a.getFullYear(),D=m(a.getMonth()+1),O=m(a.getDate()),A=m(a.getHours()),X=m(a.getMinutes());return F==="time"?A+":"+X:F==="datetime"?""+D+I+O+" "+A+":"+X:""+C+I+D+I+O+" "+A+":"+X}const c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"];function o(v,F){const I=new Date(v),a=I.getFullYear(),C=c[I.getMonth()],D=m(I.getDate()),O=m(I.getHours()),A=m(I.getMinutes());return F==="time"?O+":"+A:F==="datetime"?C+" "+D+" "+O+":"+A:C+" "+D+", "+a+" "+O+":"+A}function _(v,F,I){if(F===void 0&&(F="datetime"),I===void 0&&(I="."),!v)return"";let a=v;typeof v!="number"&&(a=parseInt(v,10)),a.length===10&&(a=a*1e3);let C="";const D=(0,w.F)();return D==="zh-CN"?C=E(a,F,I):(D==="en-US"||D==="en")&&(C=o(a,F,I)),C}function r(v){const I=s()-v;let a="";if(I<=3e3)a=I18N.Common.just_now||"\u521A\u521A";else if(I>3e3&&I<6e4)a=Math.floor(I/1e3)+I18N.Common.num_seconds_ago||"\u79D2\u524D";else if(I>=6e4&&I<36e5)a=Math.floor(I/6e4)+I18N.Common.num_minutes_ago||"\u5206\u949F\u524D";else{a=_(v,"full");const C=new Date(new Date().setHours(0,0,0,0)).getTime(),D=new Date(new Date().getFullYear(),0,1).getTime();v>D&&(a=_(v,"datetime")),v>C&&(a=_(v,"time"))}return a}function s(){return new Date().getTime()}const M=v=>{y().locale(v==="zh-CN"?"zh-cn":v),y().extend(h()),y().extend(l())}},62235:(B,L,t)=>{"use strict";t.d(L,{KR:()=>c,SP:()=>s,Ur:()=>w,W_:()=>E,_4:()=>m,ih:()=>F,nJ:()=>o,oe:()=>l});var d=t(18582),y=t(54635);const b="Italic",h=500,i={invisible:0,thin:100,extraLight:200,light:300,regular:400,medium:500,semiBold:600,bold:700,extraBold:800,black:900,extraBlack:1e3},l={12:17,13:19,14:20,16:23,18:25,20:28,28:39,36:50,48:68,72:101},w=(I,a)=>{const C=i[I]||400;return a?Math.max(C,700):C},m=I=>{let a;return Object.entries(i).every(C=>{let[D,O]=C;return O===I?(a=D,!1):!0}),a||"regular"},E=I=>I.includes(b)?I.replace(b,""):I,c=I=>I.includes(b),o=I=>{const a=E(I);return i[a]>=h},_=d.filter(I=>{let{isShowOnMBServer:a}=I;return!a}),r=I=>{let{label:a,family:C,limitedDevices:D}=I;return{label:a,value:C,limitedDevices:D}},s=_.map(r),M=I=>I.includes(b)?""+I18N.dUtils.rich_text_settings.weight[I.replace(b,"")]+I18N.dUtils.rich_text_settings.weight.italic:I18N.dUtils.rich_text_settings.weight[I],v=I=>{const a=d.find(C=>{let{family:D}=C;return D===I});return a?a.typeList.map(C=>({label:M(C),value:C})):[]},F=(0,y.LL)(v)},44911:(B,L,t)=>{"use strict";t.d(L,{EX:()=>h,KU:()=>m,NF:()=>l,Vg:()=>c,iV:()=>i,pq:()=>w,tD:()=>E});var d=t(27952),y=t(53375),b=t.n(y);const h=(o,_,r)=>{const{is_trial_enabled:s}=o||{};if(s||!i(_==null?void 0:_.plan,_==null?void 0:_.trial))return!1;const{trial_end_on:v}=_;return v?!1:!r.some(I=>{const a=l(I),{value_in_cents:C}=I;return["paid"].includes(a)||C>10})},i=(o,_)=>o==="org_free"&&!_,l=o=>{if(i(o==null?void 0:o.plan,o==null?void 0:o.trial))return"free";const{paid:_,trial:r,value_in_cents:s,next_billing_on:M,plan:v}=o||{},F=b()(M).startOf("day"),I=b()().startOf("day"),a=F.isSameOrBefore(I);let C;return a?(C=s>10?"paidExpire":"trialExpire",v||(C="defaultExpire")):(_&&(C="paid"),r&&(C="trial")),C},w=(o,_)=>o==="org_free"&&!_?I18N.Common.free_plan:o==="org_lite"?I18N.Common.team_plan:o==="org_full"?I18N.Common.business_plan:o==="org_free"&&_?I18N.Common.business_trial_plan:I18N.Common.business_plan,m=(o,_)=>{if(_){const{plan:r,trial:s}=_;return w(r,s)}else return(o==null?void 0:o.current_plan)==="solo"?I18N.Common.personal_plan:I18N.Common.free_plan},E=(o,_)=>{if(_&&_.cid){const{limitation:r,plan:s,trial:M,paid:v,next_billing_on:F,value_in_cents:I}=_;return{storage:r.storage,isExportWatermark:r.is_export_watermark,maxPicBytes:r.max_pic_bytes,maxScreenCount:r.max_p2page_count||3,maxProjectVersionCount:r.max_project_version_count,maxMktCount:r.max_mkt_count,plan:s,trial:M,paid:v,next_billing_on:F,value_in_cents:I,maxSharingCount:r.max_project_share_count,maxProjectCount:r.max_project_count}}if(o&&o.cid){const{limitation:r,current_plan:s,trial:M,paid:v,next_billing_on:F,free_projects_count:I}=o;return{storage:r.storage,current_plan:s,trial:M,paid:v,next_billing_on:F,isExportWatermark:!1,maxPicBytes:s==="solo"?5:2,maxScreenCount:(r==null?void 0:r.max_p2page_count)||3,maxProjectVersionCount:0,maxMktCount:0,value_in_cents:0,maxSharingCount:s==="solo"?3:1,maxProjectCount:I}}return{storage:0,isExportWatermark:!1,maxPicBytes:0,maxScreenCount:0,maxProjectVersionCount:0,maxMktCount:0,plan:"",trial:!1,paid:!1,next_billing_on:"",value_in_cents:0,maxSharingCount:1,maxProjectCount:3}},c=(o,_)=>{let r;return _&&(r=i(_.plan,_.trial)?3:30),!_&&o&&(r=(0,d.r)(o)==="free"?3:30),r}},46562:(B,L,t)=>{"use strict";t.d(L,{B:()=>i});var d=t(33779),y=t(44911),b=t(27952);const h={paid:"paid",trial:"trial",free:"free",paidExpire:"expired",trialExpire:"expired",defaultExpire:"expired"};(0,d.Wb)();const i=l=>{let{currentUser:w,currentOrg:m,reason:E,planName:c}=l;const o=m?(0,y.NF)(m):(0,b.r)(w),_=h[o],r={limitReason:E,currentPlanProduct:c,currentPlanCategory:m?"org":"solo",currentType:_,currentEditMember:(m==null?void 0:m.totalSeats)||"",currentViewMember:(m==null?void 0:m.totalViewerSeats)||""};return d.xd.limitPopup(r)}},32541:(B,L,t)=>{"use strict";t.d(L,{CB:()=>h,Kd:()=>b,No:()=>y});var d=t(41768);const y=i=>{switch(i){case"iphone":case"ipad":case"apple_watch":return"ios";case"android":return"android";default:return"others"}},b=(i,l)=>{let{width:w,orientation:m}=l;const E=m==="landscape";let c="customize";return!E&&i.width===w||E&&i.height===w?c=i.device:Object.entries(d.YE).forEach(o=>{let[_]=o;(!E&&_.width===w||E&&_.height===w)&&(c=_.device)}),!i.template&&!i.combo&&["android","ipad","iphone"].includes(i.device)&&["android","ipad","iphone"].includes(c)},h=i=>!i.template&&!i.combo&&["android","ipad","iphone"].includes(i.device)},59729:(B,L,t)=>{"use strict";t.d(L,{_5:()=>h,gn:()=>w,ll:()=>l});var d=t(74223);const y="jsid",b=()=>{try{const E=new URLSearchParams(location.search).get(y);E?window.localStorage.setItem(y,E):window.localStorage.removeItem(y)}catch(m){window.localStorage.removeItem(y)}},h=function(m){m===void 0&&(m=!1);try{if(ENV.IS_ON_PREMISES||ENV.IS_WONDER_SHARE)return"";const E=window.localStorage.getItem(y);return E?m?"&jsid="+E:"?jsid="+E:""}catch(E){return""}};function i(m){const E=/^[^?#]+\?([^#]+)/.test(m),c=h(E),o=c&&(m==null?void 0:m.includes(c==null?void 0:c.slice(1)));return""+m+(o?"":c)}const l=m=>{const E=i(m);location.href=E},w=(m,E,c)=>{const o=i(m);(0,d.MI)(o,E,c)}},94586:(B,L,t)=>{"use strict";t.d(L,{F:()=>b});var d=t(10552),y=t(32541);const b=h=>{const i=(0,y.No)(h);return((0,d.V5)()?"mac":(0,d.ED)()?"windows":"other-os")+" "+i+" "+h}},27952:(B,L,t)=>{"use strict";t.d(L,{r:()=>h});var d=t(53375),y=t.n(d);const b=i=>{if(!i)return"\u514D\u8D39\u7248";const{edition:l,current_plan:w,trial:m}=i;if(l==="premium_lifetime")return"\u5C0A\u4EAB\u7EC8\u8EAB\u7248";if(l==="standard_lifetime")return"\u7EC8\u8EAB\u7248";if(w==="free")return"\u514D\u8D39\u7248";if(w==="solo")return m?"\u8BD5\u7528\u7248":"\u6807\u51C6\u7248"},h=i=>{if(!i)return"free";const{plan:l,paid:w,trial:m,next_billing_on:E}=i,c=y()(E).startOf("day"),o=y()().startOf("day"),_=c.isSameOrBefore(o);let r;return _?r="free":(w&&(r="paid"),l==="solo"&&m&&(r="trial"),l==="free"&&(r="free")),r}},62059:(B,L,t)=>{"use strict";t.d(L,{Mn:()=>m,U1:()=>b,tv:()=>h,wb:()=>y});var d=t(25101);const y=ENV.NO_TRACK?()=>{}:d.wb,b=ENV.NO_TRACK?()=>{}:function(){(0,d.U1)(...arguments)},h=ENV.NO_TRACK?()=>{}:d.pj,i=ENV.IS_WONDER_SHARE?E=>{if(!window.gtag)return console.error("gtag is not a function");window.gtag("config","UA-4839360-64",{user_id:E,transport_type:"beacon"})}:()=>{},l={"https://mockitt.wondershare.com/proto":"B3-V8\u539F\u578B\u5185\u5206\u4EAB"},w=()=>{const E=Object.keys(l).sort((c,o)=>o.length-c.length);return l[E.find(c=>window.location.href.indexOf(c)!==-1)]},m=async E=>{try{await fetch("https://mockitt.wondershare.com/invite_track?entry="+w()+"&entry_term="+E)}catch(c){console.error(c)}}},10552:(B,L,t)=>{"use strict";t.d(L,{B0:()=>_,CL:()=>i,Dt:()=>E,ED:()=>b,IF:()=>r,Md:()=>s,Rv:()=>h,V5:()=>y,_j:()=>M,d:()=>d,i7:()=>l,li:()=>v,tq:()=>m,vU:()=>w});const d=()=>window.MB_DESKTOP_VERSION||window.isElectron||/Electron/i.test(navigator.userAgent),y=()=>/(Macintosh)/i.test(navigator.userAgent),b=()=>/(Windows)/i.test(navigator.userAgent),h=()=>/(Lark)/i.test(navigator.userAgent),i=()=>/MicroMessenger/i.test(navigator.userAgent),l=()=>/Chrome/i.test(navigator.userAgent),w=()=>/Firefox/i.test(navigator.userAgent),m=()=>/(iPod|iPhone|iPad|Android|MobileClient)/.test(navigator.userAgent),E=()=>/Android/i.test(navigator.userAgent),c=()=>/(iPad)/.test(navigator.userAgent),o=()=>/(iPod|iPhone|iPad)/.test(navigator.userAgent),_=()=>!!(window.webkit&&window.webkit.messageHandlers),r=()=>navigator.standalone,s=()=>/\/uichina$/.test(location.pathname),M=()=>/\/forum$/.test(location.pathname),v=()=>/(MobileClient)/.test(navigator.userAgent)},95534:(B,L,t)=>{"use strict";t.d(L,{Z:()=>E});var d=t(49650),y=t(7485),b=t(7627),h=t.n(b),i=t(14974),l=t(71464),w=t(27004),m=t(35269);class E extends y.PureComponent{constructor(){super(...arguments),(0,d.Z)(this,"setComponentRef",o=>this.modal=o),(0,d.Z)(this,"getEntry",()=>{const o=new URLSearchParams(location.search),_=o&&o.get("view_mode");return _?l.I[_]:""})}componentDidMount(){const{dispatch:o,onConfirm:_}=this.props,r=this;window.onmessage=async function(s){if(s.data==="loginSuccess")typeof o=="function"&&o({type:"modal:update:state",payload:{loginModal:{isOpen:!1}}}),_();else if(s.data==="close"){var M;r==null||(M=r.modal)==null||M.close()}},w.x.userSourceTrack(this.getEntry())}render(){const{isOpen:o,onClose:_,type:r,source:s}=this.props,M=this.getEntry(),v=M?"&entry="+M:"",F=location.origin+"/embed/auth_box?type="+r+(s?"&source="+s:"")+v;return(0,m.jsx)(i.B,{isOpen:o,onClose:_,ref:this.setComponentRef,className:"login-modal",children:(0,m.jsx)("iframe",{src:F})})}}(0,d.Z)(E,"propTypes",{source:h().string,isOpen:h().bool,type:h().string,dispatch:h().func,onConfirm:h().func,onClose:h().func}),(0,d.Z)(E,"defaultProps",{type:"signin"})},38546:(B,L,t)=>{"use strict";t.d(L,{Z:()=>E});var d=t(49650),y=t(7485),b=t(7627),h=t.n(b),i=t(14974),l=t(59729),w=t(24397),m=t(35269);class E extends y.PureComponent{constructor(){super(...arguments),(0,d.Z)(this,"setComponentRef",o=>this.modal=o)}componentDidMount(){const o=this;window.onmessage=async function(_){if(_.data==="loginSuccess"||_.data==="registerSuccess"){const r=btoa("client=web&type=to_url&url="+location.href),s="https://accounts.wondershare.com/v3/user/oauth-client/authorize?response_type=code&redirect_uri="+location.origin+"/wondershare/callback&scope=user%20normal&state="+r+"&source=37&app_key=689b3b14b4e225a9ddadd80a5ef81ca3&product_id=8038";(0,l.ll)(s)}else _.data==="close"&&o.modal.close()}}render(){const{isOpen:o,onClose:_,type:r}=this.props,s="https://accounts.wondershare.com/web/"+(r==="signin"?"login":"register")+"?redirect_uri="+location.origin+"&source=37&site=mockitt.wondershare.com&mode=1&product_id=8038";return(0,m.jsxs)(i.I,{isOpen:o,onClose:_,ref:this.setComponentRef,className:"login-modal",children:[(0,m.jsx)("iframe",{src:s}),(0,m.jsx)("button",{className:"btn-close-modal",onClick:_,children:(0,m.jsx)(w.q,{name:"common/close"})})]})}}(0,d.Z)(E,"propTypes",{isOpen:h().bool,type:h().string,onClose:h().func}),(0,d.Z)(E,"defaultProps",{type:"signin"})},2470:(B,L,t)=>{"use strict";var d=t(46198),y=t(44475),b=t(7485),h=t(39110),i=t(21202);const l={"sk-bouncedelay":"ZBrU7Yes6CevGkk6hArA"};t(34268),t(87645),t(11460);var w=t(46807),m=t(10737),E=t(23555),c=t(10552);const o=e=>{const{isEmbedV1:n=!1}=e||{};return{isDesktop:!((0,c.tq)()||n),isInApp:!1,isMultiLink:!1,isMobile:(0,c.tq)(),isIOSClient:(0,c.B0)(),isStandAlone:(0,c.IF)(),isEmbedV1:n,isEmbedV2:!1,isHTMLZip:!1,isUIChina:(0,c.Md)(),isForum:(0,c._j)(),isElectron:(0,c.d)(),isSquare:!1,isFeishu:(0,c.Rv)(),isWechat:(0,c.CL)(),...e}},_=e=>{const{isMobile:n,isEmbedV2:p,isSquare:u}=e;return n?m.Z:p||u?w.Z:E.Z};var r=t(51293),s=t(86478),M=t(75985),v=t(44949),F=t(27444);const I=e=>new URLSearchParams(e).toString(),a=e=>{const n={};for(const[p,u]of new URLSearchParams(e).entries())n[p]=u;return n},C={},D={USER_COMBO:"user-combo",ORG_COMBO:"org-combo",PROJECT_MAIN:"project-main",PROJECT_TRASHCAN:"project-trashcan",PROJECT_TEMPLATE:"project-template",PANEL_TEMPLATE:"panel-template"},O={P:"v3"},A={PROTOTYPE:"prototype",DESIGN_DRAFT:"design-draft",MIND_MAP:"mind-map",FLOW_CHART:"flow-chart",ABOARD:"aboard"},X="proto2",le=e=>e===X?A.PROTOTYPE:e;var _e=t(68633);const oe=I(O),J=e=>({cid:e.cid,mtime:e.mtime,name:e.name,type:e.type,ttag:e.ttag||oe,upper_cid:e.upper_cid,upper_type:e.upper_type}),Ee=(e,n)=>{n(e.cid,CID_PROJECT_META),n(e.upper_cid,CID_REF_EXTERNAL_UPPER)},de=(e,n)=>(e=J(e),e.cid=n(e.cid,CID_PROJECT_META),e.upper_cid=n(e.upper_cid,CID_REF_EXTERNAL_UPPER),e),Ue=I(C),W=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Ue,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,width:e.width,height:e.height,is_single_state:e.is_single_state,panel_screen_meta_cid:e.panel_screen_meta_cid,project_meta_cid:e.project_meta_cid}),Y=(e,n)=>{n(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&n(e.panel_screen_meta_cid,CID_REF_SCREEN_META),n(e.project_meta_cid,CID_REF_PROJECT_META)},re=(e,n)=>(e=W(e),e.cid=n(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&(e.panel_screen_meta_cid=n(e.panel_screen_meta_cid,CID_REF_SCREEN_META)),e.project_meta_cid=n(e.project_meta_cid,CID_REF_PROJECT_META),e),Le=e=>({cid:e.cid,mtime:e.mtime,name:e.name,parent_cid:e.parent_cid,position:e.position,expanded:e.expanded,orientation:e.orientation,width:e.width,height:e.height,bgcolor:e.bgcolor,bgimage:e.bgimage,deleter_name:e.deleter_name,deleted_at:e.deleted_at,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid,artboard_id:e.artboard_id,artboard_image_url:e.artboard_image_url}),Me=(e,n)=>{n(e.cid,CID_SCREEN_META),e.parent_cid&&n(e.parent_cid,CID_REF_SCREEN_META),e.artboard_id&&n(e.artboard_id,CID_REF_EXTERNAL_ARTBOARD),n(e.screen_glue_cid,CID_REF_SCREEN_GLUE),n(e.project_meta_cid,CID_REF_PROJECT_META)},Ge=(e,n)=>(e=Le(e),e.cid=n(e.cid,CID_SCREEN_META),e.parent_cid&&(e.parent_cid=n(e.parent_cid,CID_REF_SCREEN_META)),e.artboard_id&&(e.artboard_id=n(e.artboard_id,CID_REF_EXTERNAL_ARTBOARD)),e.screen_glue_cid=n(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=n(e.project_meta_cid,CID_REF_PROJECT_META),e),$=e=>({cid:e.cid,mtime:e.mtime,name:e.name,position:e.position,fh:e.fh,hh:e.hh,timestamp:e.timestamp,icon:e.icon}),xe=(e,n)=>{n(e.cid,CID_SCREEN_STATE)},Xe=(e,n)=>(e=$(e),e.cid=n(e.cid,CID_SCREEN_STATE),e),Ne=e=>({cid:e.cid,mtime:e.mtime,name:e.name,debug:e.debug}),k=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ani_name:"none",ani_count:1,ani_duration:e.ani_duration,ani_delay:e.ani_delay,link_type:e.link_type,widget_cids:e.widget_cids,target_cid:e.target_cid,targetstate_cid:e.targetstate_cid,state_cid:e.state_cid,gesture:e.gesture,transition:e.transition,timer:e.timer,reset:e.reset,menu_offset:e.menu_offset,scroll_offset:e.scroll_offset,screen_target_cid:e.screen_target_cid,ani_hide_duration:e.ani_hide_duration}),Q=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,screen_glue_cid:e.screen_glue_cid,screen_meta_cid:e.screen_meta_cid,screen_state_cid:e.screen_state_cid,overflow_behavior:e.overflow_behavior,scroll:e.scroll}),ie=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed}),ae=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,image:e.image}),Oe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,checked:e.checked}),se=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,checked:e.checked}),tt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked,switch_disabled:e.switch_disabled,thumb_checked_style:e.thumb_checked_style,thumb_unchecked_style:e.thumb_unchecked_style,track_checked_style:e.track_checked_style,track_unchecked_style:e.track_unchecked_style}),$e=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked,switch_disabled:e.switch_disabled,thumb_checked_style:e.thumb_checked_style,thumb_unchecked_style:e.thumb_unchecked_style,track_checked_style:e.track_checked_style,track_unchecked_style:e.track_unchecked_style}),we=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),ye=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),q=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),Je=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),N=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),z=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),ce=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),Se=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),Ke=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric,image:e.image}),st=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha}),ot=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:e.border,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:""}),qe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),ct=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),at=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),_t=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,td:e.td,bo:e.bo,i:e.i}),rt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,td:e.td,bo:e.bo,i:e.i}),pt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),Et=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),yt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),Pt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),Ot=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),At=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),It=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,td:e.td,bo:e.bo,i:e.i,input_type:e.input_type,border_visibility:e.border_visibility}),ln=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,border_visibility:e.border_visibility}),ut=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,td:e.td,bo:e.bo,i:e.i}),_n=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:0,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",is:e.is,icon:e.icon,fs:e.fs,view_box:e.view_box,path:e.path}),an=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:0,text:e.text,border_radius:"",box_shadow:"",text_shadow:"",fs:e.fs,ha:e.ha,lh:e.lh,bo:e.bo,i:e.i,td:e.td,padding:e.padding,point:e.point,fills:e.fills}),un=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,td:e.td,bo:e.bo,i:e.i,icon:e.icon,is:e.is,view_box:e.view_box,path:e.path,border_visibility:e.border_visibility,fills:e.fills}),Kt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,td:e.td,bo:e.bo,i:e.i}),mn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,_ttPlacement:e._ttPlacement,_ttOffset:e._ttOffset,_ttArrowSize:e._ttArrowSize}),pn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,border_visibility:e.border_visibility,fills:e.fills}),dn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,side_num:e.side_num,fills:e.fills}),Bt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,side_num:e.side_num,radius:e.radius,fills:e.fills}),hn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,fs:e.fs,td:e.td,bo:e.bo,i:e.i,tableData:e.tableData,innerBorderV:e.innerBorderV,innerBorderH:e.innerBorderH,outerBorder:e.outerBorder,styleType:e.styleType}),fn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,fills:e.fills}),gn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",image:e.image,p:e.p,clip:e.clip,filter:e.filter,clip_type:e.clip_type,image_rect:e.image_rect}),Vn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:""}),Ht=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:e.border,primary_fixed:e.primary_fixed,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:"",points:e.points}),yn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:0,primary_fixed:e.primary_fixed,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:"",points:e.points,arrow_types:e.arrow_types,arrow_stroke:e.arrow_stroke}),En=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding}),bn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,clip:e.clip,border_visibility:e.border_visibility,fills:e.fills}),Rt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,is:e.is,icon:e.icon}),wt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,is:e.is,icon:e.icon}),Vt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,is:e.is,icon:e.icon,view_box:e.view_box,path:e.path,svgAttr:e.svgAttr,fills:e.fills}),Jn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:e.tc,border:0,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:e.text_shadow,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,clip:e.clip,size_type:e.size_type,font_direction:e.font_direction}),Jt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed}),Zt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed}),Mn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:0,ro:e.ro,primary_fixed:e.primary_fixed,fills:e.fills}),Cn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:0,ro:e.ro,primary_fixed:e.primary_fixed,fills:e.fills}),kn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ro:e.ro,primary_fixed:e.primary_fixed,border_radius:e.border_radius,ha:e.ha,va:e.va,data:e.data}),Pn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed}),Yt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,expanded:e.expanded}),wn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:1073741823,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio}),Tn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",is_autoplay:e.is_autoplay,is_loop:e.is_loop,is_keep_alive:e.is_keep_alive,is_hidden:e.is_hidden}),Lt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",is_autoplay:e.is_autoplay,is_loop:e.is_loop,is_muted:e.is_muted,is_hide_controls:e.is_hide_controls}),jt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:"",background:e.background,foreground:e.foreground}),vn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,fills:e.fills}),On=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,chartType:e.chartType,chartCategory:e.chartCategory,chartTheme:e.chartTheme,grid:e.grid,showAxis:e.showAxis,textAngle:e.textAngle,legend:e.legend,showToolTip:e.showToolTip,smooth:e.smooth,showHelpMark:e.showHelpMark,chartBorderRadius:e.chartBorderRadius,chartInnerRadius:e.chartInnerRadius,chartData:e.chartData,progress:e.progress,shLabel:e.shLabel,unit:e.unit}),Sn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,min:e.min,max:e.max,sliderSize:e.sliderSize,is:e.is,ic:e.ic,number:e.number}),xn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,border_radius:e.border_radius,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,pagesNumber:e.pagesNumber,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,number:e.number}),Dn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,border_radius:e.border_radius,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,pagesNumber:e.pagesNumber,checkedBg:e.checkedBg,checkedBorder:e.checkedBorder,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,number:e.number}),An=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,data:e.data}),Xt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,data:e.data,optionData:e.optionData,border_radius:e.border_radius,border:e.border,background:e.background,canExpandOneMenu:e.canExpandOneMenu}),$t=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,data:e.data,optionData:e.optionData,fs:e.fs,tc:e.tc,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,checkedBg:e.checkedBg,background:e.background,border:e.border,border_radius:e.border_radius}),In=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,fs:e.fs,textColor:e.textColor,borderColor:e.borderColor,disabled:e.disabled,checkedTc:e.checkedTc,checkedBgColor:e.checkedBgColor,layout:e.layout,selectionControlType:e.selectionControlType,gap:e.gap}),Qt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",optionData:e.optionData,mutualWay:e.mutualWay,fs:e.fs,td:e.td,bo:e.bo,i:e.i,va:e.va,ha:e.ha,dropMenuEcho:e.dropMenuEcho,is_multiple:e.is_multiple}),Bn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,panelData:e.panelData,expandData:e.expandData,selectedData:e.selectedData,isShowIcon:e.isShowIcon,canExpandOneMenu:e.canExpandOneMenu,navigationMenuType:e.navigationMenuType}),Rn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,fs:e.fs,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,checkedBorder:e.checkedBorder,checkedBoldType:e.checkedBoldType,checkedFontStyle:e.checkedFontStyle,checkedTextDecoration:e.checkedTextDecoration,tc:e.tc}),Ln=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,fs:e.fs,tc:e.tc,background:e.background,border:e.border,border_visibility:e.border_visibility,isShowIcon:e.isShowIcon,isShowText:e.isShowText,iconSize:e.iconSize,iconColor:e.iconColor,selectedTextColor:e.selectedTextColor,selectedIconColor:e.selectedIconColor,isShowSelectedText:e.isShowSelectedText,isShowSelectedIcon:e.isShowSelectedIcon}),Nt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,td:e.td,bo:e.bo,i:e.i,border_visibility:e.border_visibility,fills:e.fills}),jn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,data:e.data,display_name:e.display_name,bind_widget_cid:e.bind_widget_cid,ctime:e.ctime,order:e.order}),g=536870911,R=1073741823,U=null,ne=e=>{switch(e.name){case"debug":return Ne(e);case"link":return k(e);case"panel":return Q(e);case"lr":return ie(e);case"map_view":return ae(e);case"mcheckbox":return Oe(e);case"mradiobutton":return se(e);case"ios_switch":return tt(e);case"android_switch":return $e(e);case"ios_check":return we(e);case"android_check":return ye(e);case"android_radio":return q(e);case"switch":return Je(e);case"iphone_keyboard":return N(e);case"ipad_keyboard":return z(e);case"android_keyboard":return ce(e);case"keyboard":return Se(e);case"unified_keyboard":return Ke(e);case"search_bar":return st(e);case"tab_bar":return ot(e);case"ios_status_bar":return qe(e);case"iphone_x_status_bar":return ct(e);case"android_status_bar":return at(e);case"navigation_bar":return _t(e);case"nav_bar":return rt(e);case"status_bar":return pt(e);case"legacy_iphone_status_bar":return Et(e);case"legacy_iphone_x_status_bar":return yt(e);case"legacy_android_status_bar":return Pt(e);case"legacy_ipad_status_bar":return Ot(e);case"webpage":return At(e);case"mtext_input":return It(e);case"mtextarea":return ln(e);case"mselect":return ut(e);case"tab_item":return _n(e);case"sticky":return an(e);case"button":return un(e);case"text_field":return Kt(e);case"mtooltip":return mn(e);case"rounded_rect":return pn(e);case"polygon":return dn(e);case"star":return Bt(e);case"table":return hn(e);case"circle_rect":return fn(e);case"image_view":return gn(e);case"rectangle":return Vn(e);case"line":return Ht(e);case"arrow":return yn(e);case"label":return En(e);case"text_view":return bn(e);case"icon_button":return Rt(e);case"svg_icon_button":return wt(e);case"svg_icon_path":return Vt(e);case"rich_text":return Jn(e);case"hr":return Jt(e);case"ve":return Zt(e);case"triangleb":return Mn(e);case"triangletl":return Cn(e);case"carousel":return kn(e);case"mfile_input":return Pn(e);case"group":return Yt(e);case"pg":return wn(e);case"audio":return Tn(e);case"video":return Lt(e);case"qrcode":return jt(e);case"placeholder":return vn(e);case"chart":return On(e);case"digital_stepper":return Sn(e);case"pagination_mobile":return xn(e);case"pagination_web":return Dn(e);case"slider":return An(e);case"collapse":return Xt(e);case"segmented_control":return $t(e);case"selection_control":return In(e);case"drop_menu":return Qt(e);case"navigation_menu":return Bn(e);case"tabs":return Rn(e);case"mobile_tab_bars":return Ln(e);case"button_solid":return Nt(e);case"annotate":return jn(e)}throw new Error("unexpected data name from: "+JSON.stringify(e))},ee=null,be=(e,n)=>{e.forEach(p=>{n(p),be(p.children,n)})},De=(e,n)=>{const{name:p,cid:u,gid:f,link_cids:x}=e;if(n(u,CID_ITEM),f&&n(f,CID_ITEM_GROUP),x&&x.split(",").forEach(P=>n(P,CID_REF_ITEM)),p==="link"){const{widget_cids:P,target_cid:S,targetstate_cid:j,state_cid:K}=e;if(P)for(const fe of P.split(","))n(fe,CID_REF_ITEM);S&&n(S,CID_REF_SCREEN_META),j&&n(j,CID_REF_SCREEN_STATE),K&&n(K,CID_REF_SCREEN_META)}if(p==="panel"){const{screen_state_cid:P,screen_meta_cid:S,screen_glue_cid:j}=e;P&&n(P,CID_REF_SCREEN_STATE),S&&n(S,CID_REF_SCREEN_META),j&&n(j,CID_REF_SCREEN_GLUE)}p==="annotate"&&e.bind_widget_cid&&n(e.bind_widget_cid,CID_REF_ITEM)},he=(e,n)=>{e=filterEntry(e),JSON_TYPE_KEY_LIST.forEach(K=>{e[K]&&(e[K]=JSON.parse(JSON.stringify(e[K])))});const{name:p,cid:u,gid:f,link_cids:x,tableData:P,optionData:S,data:j}=e;if(e.cid=n(u,CID_ITEM),f&&(e.gid=n(f,CID_ITEM_GROUP)),x&&(e.link_cids=x.split(",").map(K=>n(K,CID_REF_ITEM)).join(",")),p==="table"){const fe=P.links.map(pe=>pe.map(Ce=>Ce?Ce.split(",").map(Ie=>n(Ie,CID_REF_ITEM)).join(","):""));e.tableData.links=fe}if(ee.indexOf(p)!==-1){const K=[...S];be(K,fe=>{fe.data.link_cids&&(fe.data.link_cids=n(fe.data.link_cids,CID_REF_ITEM))}),e.optionData=K}if(p==="carousel"){const K=j.slides.map(fe=>fe.link_cids?{...fe,link_cids:n(fe.link_cids,CID_REF_ITEM)}:{...fe});e.data={...j,slides:K}}if(p==="link"){const{widget_cids:K,target_cid:fe,targetstate_cid:pe,state_cid:Ce}=e;K&&(e.widget_cids=K.split(",").map(Ie=>n(Ie,CID_REF_ITEM)).join(",")),fe&&(e.target_cid=n(fe,CID_REF_SCREEN_META)),pe&&(e.targetstate_cid=n(pe,CID_REF_SCREEN_STATE)),Ce&&(e.state_cid=n(Ce,CID_REF_SCREEN_META))}if(p==="panel"){const{screen_state_cid:K,screen_meta_cid:fe,screen_glue_cid:pe}=e;K&&(e.screen_state_cid=n(K,CID_REF_SCREEN_STATE)),fe&&(e.screen_meta_cid=n(fe,CID_REF_SCREEN_META)),pe&&(e.screen_glue_cid=n(pe,CID_REF_SCREEN_GLUE))}return p==="annotate"&&e.bind_widget_cid&&(e.bind_widget_cid=n(e.bind_widget_cid,CID_REF_ITEM)),e},ge=(e,n)=>{switch(e.name){case"carousel":for(const p of e.data.slides)p.asset&&n(p.asset);break}e.image&&n(e.image)},ke=I(C),te=e=>({cid:e.cid,mtime:e.mtime,ttag:e.ttag||ke,type:e.type,ctime:e.ctime,project_meta_cid:e.project_meta_cid}),me=(e,n)=>{n(e.cid,CID_SCREEN_GLUE),n(e.project_meta_cid,CID_REF_PROJECT_META)},G=(e,n)=>(e=te(e),e.cid=n(e.cid,CID_SCREEN_GLUE),e.project_meta_cid=n(e.project_meta_cid,CID_REF_PROJECT_META),e),H=e=>({cid:e.cid,mtime:e.mtime,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),Z=(e,n)=>{n(e.cid,CID_SCREEN_META),n(e.screen_glue_cid,CID_REF_SCREEN_GLUE),n(e.project_meta_cid,CID_REF_PROJECT_META)},ue=(e,n)=>(e=H(e),e.cid=n(e.cid,CID_SCREEN_META),e.screen_glue_cid=n(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=n(e.project_meta_cid,CID_REF_PROJECT_META),e),Te=e=>({cid:e.cid,mtime:e.mtime,name:e.name}),He=(e,n)=>{n(e.cid,CID_SCREEN_STATE)},Ze=(e,n)=>(e=Te(e),e.cid=n(e.cid,CID_SCREEN_STATE),e),Ae=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,z:e.z,pageType:e.pageType}),je=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,clip:e.clip,layoutGrid:e.layoutGrid}),Ye=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,clip:e.clip,layoutGrid:e.layoutGrid}),et=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,x:e.x,y:e.y,v:e.v,locked:e.locked,z:e.z,complex:e.complex,symbolCid:e.symbolCid,overrides:e.overrides,layoutGrid:e.layoutGrid}),Pe=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,x:e.x,y:e.y,o:e.o,v:e.v,z:e.z}),Be=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,combineType:e.combineType,fills:e.fills,x:e.x,y:e.y,o:e.o,v:e.v,z:e.z}),ze=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,style:e.style,paragraphs:e.paragraphs,textAlign:e.textAlign,verticalAlign:e.verticalAlign,paragraphSpacing:e.paragraphSpacing,textAutoResize:e.textAutoResize}),Fe=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,aspectRatio:e.aspectRatio,o:e.o,z:e.z,v:e.v,fills:e.fills,vector:e.vector}),nt=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,corner:e.corner}),Qe=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,fills:e.fills,start:e.start,sweep:e.sweep,ratio:e.ratio}),V=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v}),Re=e=>{switch(e.type){case"Page":return Ae(e);case"Frame":return je(e);case"Symbol":return Ye(e);case"Instance":return et(e);case"Group":return Pe(e);case"CombinedShape":return Be(e);case"RichText":return ze(e);case"Vector":return Fe(e);case"RoundedRect":return nt(e);case"Circle":return Qe(e);case"Slice":return V(e)}throw new Error("unexpected data type from: "+JSON.stringify(e))},bt=(e,n)=>{const{cid:p,parentCid:u,symbolCid:f}=e;n(p,CID_ITEM),u&&n(u,CID_REF_ITEM),f&&n(f,CID_REF_ITEM)},ft=(e,n)=>{e=filterEntry(e);const{cid:p,parentCid:u,symbolCid:f}=e;return e.cid=n(p,CID_ITEM),u&&(e.parentCid=n(u,CID_REF_ITEM)),f&&(e.symbolCid=n(f,CID_REF_ITEM)),e};var Ct=t(58129);const St=(e,n)=>{let{name:p,mtime:u,locale:f}=n;const x=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:u,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:u,project_meta_cid:e.cid})],P=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:u,screen_glue_cid:x[0].cid,project_meta_cid:e.cid})],S=[{type:"Page",name:T("i_Page"),cid:getRandomCid("p"),mtime:getLocalTimestamp(),z:0,pageType:1},{type:"Page",name:"Recycler",cid:getRandomCid("p"),mtime:getLocalTimestamp(),z:-1e4,pageType:0}],j=[createScreenObject(P[0].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:u},S,e.type)])];return{screenGlueList:x,screenMetaList:P,screenObjectList:j}};var kt=t(1372);const Tt=new Set(["android","iphone","ipad"]),Ft=new Set(["ipad_mini","ipad_pro_11","ipad_pro_12"]),Ri=new Set(["iphone_x","iphone_xs_max","iphone_11_pro","iphone_11_pro_max","iphone_12_pro","iphone_12_pro_max","iphone_13_pro","iphone_13_pro_max","iphone_14_pro","iphone_14_pro_max","ipad_mini","ipad_pro_11","ipad_pro_12"]),Li={iphone_14_pro_max:[919,148,134,898],iphone_14_pro:[839,130,134,818],iphone_13_pro_max:[913,147,134,892],iphone_13_pro:[831,129,134,810],iphone_12_pro_max:[913,147,134,892],iphone_12_pro:[831,129,134,810],iphone_x:[799,121,134,778],iphone_xs_max:[883,141,134,862],iphone_11_pro:[799,121,134,778],iphone_11_pro_max:[883,141,134,862],ipad_mini:[1011,227,314,1009],ipad_pro_11:[1181,260,314,1179],ipad_pro_12:[1353,355,314,1351]},ji={iphone_14_pro:48,iphone_13_pro:44,iphone_12_pro:44,iphone_x:44,iphone_11_pro:44,iphone_11_pro_max:44,iphone:20,ipad:24,ipad_3_4:20,ipad_pro:24,android:24,huawei_p40:58},Ni={iphone_14_pro:48,iphone_12_pro:44,iphone_13_pro:44,iphone_x:44,iphone_11_pro_max:44,iphone_11_pro:44,iphone:44,ipad:50,ipad_3_4:44,ipad_pro:50,android:56,huawei_p40:56},Fi=(e,n)=>{const p=n==="iphone_14_pro"||n==="iphone_14_pro_max"?"iphone_14_pro":n==="iphone_12_pro"||n==="iphone_x"||n==="iphone_xs_max"||n==="iphone_11_pro"||n==="iphone_11_pro_max"||n==="iphone_12_pro_max"||n==="iphone_13_pro"||n==="iphone_13_pro_max"?"iphone_x":e==="iphone"?"iphone":n==="ipad_3_4"?"ipad_3_4":n==="ipad_pro"?"ipad_pro":n==="ipad_mini"||n==="ipad_pro_11"||n==="ipad_pro_12"?"ipad":e==="android"&&n==="Huawei_p40"?"huawei_p40":e==="android"?"android":null;return{statusBarHeight:ji[p],navBarHeight:Ni[p]}},Tr=(e,n)=>{let{name:p,mtime:u,width:f,height:x,device:P,model:S}=n;const j=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:u,name:p,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:u,width:f,height:x,project_meta_cid:e.cid}),filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:u,name:p,type:SCREEN_GLUE_TYPE.PROJECT_TRASHCAN,ctime:u,width:f,height:x,project_meta_cid:e.cid})],K=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:u,name:T("s_home"),parent_cid:null,position:1,expanded:!1,orientation:"portrait",width:f,height:x,bgcolor:"#fff",screen_glue_cid:j[0].cid,project_meta_cid:e.cid}),filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:u,name:T("s_screen")+" 2",parent_cid:null,position:2,expanded:!1,orientation:"portrait",width:f,height:x,bgcolor:"#fff",screen_glue_cid:j[0].cid,project_meta_cid:e.cid})],fe={device:P,model:S,name:p,width:f},{itemList:pe,extraInfo:Ce}=Zn({hasNavBar:!0,...fe}),{itemList:Ie,extraInfo:We}=Zn({hasNavBar:!1,...fe}),Ve=[createScreenObject(K[0].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:u,name:T("s_state")+" 1",position:1,timestamp:u,...Ce},pe,e.type)]),createScreenObject(K[1].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:u,name:T("s_state")+" 1",position:1,timestamp:u,...We},Ie,e.type)])];return{screenGlueList:j,screenMetaList:K,screenObjectList:Ve,itemListSecondScreen:Ie,extraInfoSecondScreen:We}},Zn=e=>{let{hasNavBar:n,device:p,model:u,name:f,width:x}=e;const P=Tt.has(p),S=Ri.has(u),j=[],K={hh:0,fh:0};if(P){const{itemList:fe,extraInfo:pe}=Gi({name:f,width:x,device:p,model:u,hasNavBar:n});if(j.push(...fe),Object.assign(K,pe),S){const{itemList:Ce,extraInfo:Ie}=Ui({width:x,model:u});j.push(...Ce),Object.assign(K,Ie)}}return{itemList:j,extraInfo:K}},Ui=e=>{let{width:n,model:p}=e;const[u,f,x,P]=Li[p],S=getLocalTimestamp(),j=Ft.has(p)?15:34,K=Ft.has(p)?0:1;return{extraInfo:{fh:j},itemList:[{cid:getRandomItemCid(),name:"rounded_rect",mtime:S,display_name:T("i_tab_bar"),background:[K,4177066239],width:n,left:0,top:P,height:j,border:[1,HEX8NUMBER_TRANSPARENT,1,"0"],v:!0},{cid:getRandomItemCid(),name:"rounded_rect",mtime:S,display_name:T("i_rounded_rect"),border:[0,HEX8NUMBER_TRANSPARENT,0,"0"],border_radius:"3",background:[1,255],top:u,left:f,width:x,height:5,v:!0}]}},Gi=e=>{let{name:n,width:p,device:u,model:f,hasNavBar:x=!1}=e;const P=u==="android"&&f==="Huawei_p40"?"android_status_bar":f==="iphone_12_pro"||f==="iphone_13_pro"||f==="iphone_14_pro"||f==="iphone_x"||f==="iphone_xs_max"||f==="iphone_11_pro"||f==="iphone_11_pro_max"||f==="iphone_12_pro_max"||f==="iphone_13_pro_max"||f==="iphone_14_pro_max"||u==="android"?"iphone_x_status_bar":u==="iphone"||u==="ipad"?"ios_status_bar":null,{statusBarHeight:S,navBarHeight:j}=Fi(u,f),K=getLocalTimestamp(),fe={};return u==="android"&&f==="Huawei_p40"&&Object.assign(fe,{tc:"rgba(16, 16, 16, 1)",background:[1,4177066239]}),{extraInfo:{hh:S+(x?j:0)},itemList:[{cid:getRandomItemCid(),name:P,mtime:K,display_name:T("i_"+P),left:0,top:0,width:p,height:S,v:!0,...fe},x&&{cid:getRandomItemCid(),name:"nav_bar",mtime:K,display_name:T("i_nav_bar"),left:0,top:S,height:j,text:n,width:p,v:!0}].filter(Boolean)}},zi=I(C),Yn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||zi,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,width:e.width,height:e.height,is_single_state:e.is_single_state,panel_screen_meta_cid:e.panel_screen_meta_cid,project_meta_cid:e.project_meta_cid}),vr=(e,n)=>{n(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&n(e.panel_screen_meta_cid,CID_REF_SCREEN_META),n(e.project_meta_cid,CID_REF_PROJECT_META)},Or=(e,n)=>(e=Yn(e),e.cid=n(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&(e.panel_screen_meta_cid=n(e.panel_screen_meta_cid,CID_REF_SCREEN_META)),e.project_meta_cid=n(e.project_meta_cid,CID_REF_PROJECT_META),e),Wi=I(C),Xn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Wi,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,width:e.width,height:e.height,is_single_state:e.is_single_state,panel_screen_meta_cid:e.panel_screen_meta_cid,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),Sr=(e,n)=>{n(e.cid,CID_SCREEN_GLUE),n(e.screen_glue_cid,CID_REF_SCREEN_GLUE),n(e.project_meta_cid,CID_REF_PROJECT_META)},xr=(e,n)=>(e=Xn(e),e.cid=n(e.cid,CID_SCREEN_GLUE),e.screen_glue_cid=n(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=n(e.project_meta_cid,CID_REF_PROJECT_META),e),Dr=(e,n)=>{let{name:p,mtime:u,width:f,height:x,locale:P}=n;const S=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:u,name:p,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:u,width:f,height:x,project_meta_cid:e.cid})],j=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:u,name:T("s_home"),parent_cid:null,position:1,expanded:!1,orientation:"portrait",width:f,height:x,bgcolor:"#fff",screen_glue_cid:S[0].cid,project_meta_cid:e.cid})],K=[createScreenObjectWithDefaultState(j[0].cid,P)];return{screenGlueList:S,screenMetaList:j,screenObjectList:K}},Ki=I(C),$n=e=>({cid:e.cid,mtime:e.mtime,ttag:e.ttag||Ki,type:e.type,ctime:e.ctime,project_meta_cid:e.project_meta_cid}),Ar=(e,n)=>{n(e.cid,CID_SCREEN_GLUE),n(e.project_meta_cid,CID_REF_PROJECT_META)},Ir=(e,n)=>(e=$n(e),e.cid=n(e.cid,CID_SCREEN_GLUE),e.project_meta_cid=n(e.project_meta_cid,CID_REF_PROJECT_META),e),Qn=e=>({cid:e.cid,mtime:e.mtime,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),Br=(e,n)=>{n(e.cid,CID_SCREEN_META),n(e.screen_glue_cid,CID_REF_SCREEN_GLUE),n(e.project_meta_cid,CID_REF_PROJECT_META)},Rr=(e,n)=>(e=Qn(e),e.cid=n(e.cid,CID_SCREEN_META),e.screen_glue_cid=n(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=n(e.project_meta_cid,CID_REF_PROJECT_META),e),Lr=(e,n)=>{let{mtime:p,locale:u}=n;const f=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:p,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:p,project_meta_cid:e.cid})],x=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:p,screen_glue_cid:f[0].cid,project_meta_cid:e.cid})],P=[createScreenObjectWithDefaultState(x[0].cid,u)];return{screenGlueList:f,screenMetaList:x,screenObjectList:P}},Hi=I(C),qn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Hi,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,project_meta_cid:e.project_meta_cid}),jr=(e,n)=>{},Nr=(e,n)=>(e=qn(e),e),Vi=I(C),ei=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Vi,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),Fr=(e,n)=>{},Ur=(e,n)=>(e=ei(e),e),Gr=(e,n)=>{let{name:p,mtime:u,width:f,height:x,device:P,model:S}=n;const j=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:u,name:p,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:u,width:f,height:x,project_meta_cid:e.cid}),filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:u,name:p,type:SCREEN_GLUE_TYPE.PROJECT_TRASHCAN,ctime:u,width:f,height:x,project_meta_cid:e.cid})],K=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:u,name:"page_list",screen_glue_cid:j[0].cid,project_meta_cid:e.cid}),filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:u,name:"widget_items",screen_glue_cid:j[0].cid,project_meta_cid:e.cid}),filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:u,name:"comment_items",screen_glue_cid:j[0].cid,project_meta_cid:e.cid})],pe=[{cid:getRandomItemCid("pg"),type:"Page",name:"\u9ED8\u8BA4\u5206\u9875",isDefault:!0,ctime:getLocalTimestamp(),sketchObjectID:"",z:0}],Ce=[],Ie=[];return{screenGlueList:j,screenMetaList:K,screenObjectList:[createScreenObject(K[0].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:u,timestamp:u},pe,e.type)]),createScreenObject(K[1].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:u,timestamp:u},Ce,e.type)]),createScreenObject(K[2].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:u,timestamp:u},Ie,e.type)])]}},ti=e=>({cid:e.cid,mtime:e.mtime,name:e.name,position:e.position,theme:e.theme,strokeTheme:e.strokeTheme,nodeTheme:e.nodeTheme,fh:e.fh,hh:e.hh,timestamp:e.timestamp}),zr=(e,n)=>{n(e.cid,CID_SCREEN_STATE)},Wr=(e,n)=>(e=ti(e),e.cid=n(e.cid,CID_SCREEN_STATE),e),Ji=e=>({cid:e.cid,type:e.type,mtime:e.mtime,TID:e.TID,name:e.name,rect:e.rect,lineWidth:e.lineWidth,globalAlpha:e.globalAlpha,dash:e.dash,strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,font:e.font,text:e.text,textRect:e.textRect,locked:e.locked,zIndex:e.zIndex,data:e.data,from:e.from,to:e.to,controlPoints:e.controlPoints,fromArrow:e.fromArrow,toArrow:e.toArrow}),Zi=e=>({cid:e.cid,type:e.type,mtime:e.mtime,TID:e.TID,name:e.name,rect:e.rect,lineWidth:e.lineWidth,globalAlpha:e.globalAlpha,dash:e.dash,strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,font:e.font,text:e.text,textRect:e.textRect,locked:e.locked,zIndex:e.zIndex,data:e.data,rotate:e.rotate,borderRadius:e.borderRadius,image:e.image,lastImage:e.lastImage,imgNaturalWidth:e.imgNaturalWidth,imgNaturalHeight:e.imgNaturalHeight,imockImg:e.imockImg,img:e.img,anchors:e.anchors,rotatedAnchors:e.rotatedAnchors,hideAnchor:e.hideAnchor,hideSizeCP:e.hideSizeCP}),Kr=536870911,Yi=e=>{switch(e.type){case"Line":return Ji(e);case"Node":return Zi(e)}throw new Error("unexpected data type from: "+JSON.stringify(e))},Hr=(e,n)=>{const{cid:p,type:u,from:f,to:x,controlPoints:P}=e;n(p,CID_ITEM),u==="Line"&&(f&&n(f.id,CID_REF_ITEM),x&&n(x.id,CID_REF_ITEM),P&&P.forEach(S=>n(S.id,CID_REF_ITEM)))},Vr=(e,n)=>{e=filterEntry(e);const{cid:p,type:u,from:f,to:x,controlPoints:P}=e;return e.cid=n(p,CID_ITEM),u==="Line"&&(f&&(e.from.id=n(f.id,CID_REF_ITEM)),x&&(e.to.id=n(x.id,CID_REF_ITEM)),P&&(e.controlPoints=P.map(S=>({...S,id:n(S.id,CID_REF_ITEM)})))),e},Jr=(e,n)=>{e.image&&n(e.image),e.lastImage&&n(e.lastImage),e.imockImg&&n(e.imockImg),e.img&&n(e.img)},ni=e=>({cid:e.cid,mtime:e.mtime,name:e.name,position:e.position}),Zr=(e,n)=>{n(e.cid,CID_SCREEN_STATE)},Yr=(e,n)=>(e=ni(e),e.cid=n(e.cid,CID_SCREEN_STATE),e),Xi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,theme:e.theme,backgroundColor:e.backgroundColor}),$i=e=>({cid:e.cid,mtime:e.mtime,name:e.name,parentCid:e.parentCid,expanded:e.expanded,width:e.width,height:e.height,placement:e.placement,order:e.order,background_color:e.background_color,border_color:e.border_color,border_width:e.border_width,border_style:e.border_style,text:e.text,font_size:e.font_size,font_weight:e.font_weight,font_family:e.font_family,font_bold:e.font_bold,font_italic:e.font_italic,font_underline:e.font_underline,font_line_through:e.font_line_through,font_color:e.font_color,link:e.link,link_desc:e.link_desc,img_path:e.img_path,img_width:e.img_width,img_height:e.img_height}),Qi=e=>{switch(e.name){case"mindConfigNode":return Xi(e);case"mindNode":return $i(e)}throw new Error("unexpected data name from: "+JSON.stringify(e))},Xr=(e,n)=>{const{cid:p,parentCid:u}=e;n(p,CID_ITEM),u&&n(u,CID_ITEM_GROUP)},$r=(e,n)=>{e=filterEntry(e);const{cid:p,parentCid:u}=e;return e.cid=n(p,CID_ITEM),u&&(e.parentCid=n(u,CID_ITEM_GROUP)),e},Qr=(e,n)=>{e.img_path&&n(e.img_path)},ii=e=>({cid:e.cid,mtime:e.mtime,name:e.name}),qr=(e,n)=>{},es=(e,n)=>(e=ii(e),e),qi=e=>({cid:e.cid,type:e.type,mtime:e.mtime,isStraight:e.isStraight,fromCid:e.fromCid,fromDirection:e.fromDirection,startPoint:e.startPoint,toCid:e.toCid,toDirection:e.toDirection,endPoint:e.endPoint,dPathList:e.dPathList,lineStyle:e.lineStyle,comment:e.comment,commentStyle:e.commentStyle,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,pageCid:e.pageCid,groupCid:e.groupCid,name:e.name}),eo=e=>({cid:e.cid,type:e.type,mtime:e.mtime,width:e.width,height:e.height,initialHeight:e.initialHeight,initialWidth:e.initialWidth,layup:e.layup,isEditing:e.isEditing,x:e.x,y:e.y,z:e.z,backgroundColor:e.backgroundColor,rawContent:e.rawContent,pageCid:e.pageCid,groupCid:e.groupCid,noteStyle:e.noteStyle,name:e.name}),to=e=>({cid:e.cid,type:e.type,mtime:e.mtime,name:e.name,isDefault:e.isDefault,sketchObjectID:e.sketchObjectID,ctime:e.ctime,etime:e.etime,z:e.z}),no=e=>({cid:e.cid,type:e.type,mtime:e.mtime,name:e.name,isDefault:e.isDefault,pageCid:e.pageCid,pageSketchObjectID:e.pageSketchObjectID,sketchObjectID:e.sketchObjectID,z:e.z,ctime:e.ctime}),io=e=>({cid:e.cid,type:e.type,mtime:e.mtime,name:e.name,sketchObjectID:e.sketchObjectID,pageCid:e.pageCid,pageSketchObjectID:e.pageSketchObjectID,groupCid:e.groupCid,ctime:e.ctime,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,imageUrl:e.imageUrl,sliceUrl:e.sliceUrl,statusCid:e.statusCid,statusIndex:e.statusIndex,isActivedInStatus:e.isActivedInStatus,resource_type:e.resource_type,original_resource_type:e.original_resource_type}),oo=e=>({cid:e.cid,type:e.type,mtime:e.mtime,isEditing:e.isEditing,no:e.no,rawContent:e.rawContent,recordList:e.recordList,rect:e.rect,status:e.status,vec2:e.vec2,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,artboardCid:e.artboardCid,artboardVec2:e.artboardVec2,pageCid:e.pageCid,groupCid:e.groupCid}),ro=e=>({cid:e.cid,type:e.type,mtime:e.mtime,commentCid:e.commentCid,content:e.content,isEditing:e.isEditing,cTime:e.cTime,mTime:e.mTime,user:e.user,replyUser:e.replyUser}),so=e=>({cid:e.cid,type:e.type,mtime:e.mtime,layup:e.layup,iconName:e.iconName,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,complexRect:e.complexRect,pageCid:e.pageCid,groupCid:e.groupCid,name:e.name}),co=e=>{switch(e.type){case"AboardLine":return qi(e);case"Note":return eo(e);case"Page":return to(e);case"Group":return no(e);case"AboardsRef":return io(e);case"Comment":return oo(e);case"CommentRecord":return ro(e);case"Stamp":return so(e)}throw new Error("unexpected data type from: "+JSON.stringify(e))},lo=e=>{switch(e){case A.DESIGN_DRAFT:return{filterEntryProjectMeta:J,filterEntryScreenGlue:te,filterEntryScreenMeta:H,filterEntryScreenState:Te,filterEntryItem:Re};case A.PROTOTYPE:case X:return{filterEntryProjectMeta:J,filterEntryScreenGlue:W,filterEntryScreenMeta:Le,filterEntryScreenState:$,filterEntryItem:ne};case A.FLOW_CHART:return{filterEntryProjectMeta:J,filterEntryScreenGlue:Yn,filterEntryScreenMeta:Xn,filterEntryScreenState:ti,filterEntryItem:Yi};case A.MIND_MAP:return{filterEntryProjectMeta:J,filterEntryScreenGlue:$n,filterEntryScreenMeta:Qn,filterEntryScreenState:ni,filterEntryItem:Qi};case A.ABOARD:return{filterEntryProjectMeta:J,filterEntryScreenGlue:qn,filterEntryScreenMeta:ei,filterEntryScreenState:ii,filterEntryItem:co}}throw new Error("unexpected projectMetaType: "+e)},ts=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueDesignDraft,collectCidScreenMeta:collectCidScreenMetaDesignDraft,collectCidScreenState:collectCidScreenStateDesignDraft,collectCidItem:collectCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGluePrototype,collectCidScreenMeta:collectCidScreenMetaPrototype,collectCidScreenState:collectCidScreenStatePrototype,collectCidItem:collectCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueFlowChart,collectCidScreenMeta:collectCidScreenMetaFlowChart,collectCidScreenState:collectCidScreenStateFlowChart,collectCidItem:collectCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueMindMap,collectCidScreenMeta:collectCidScreenMetaMindMap,collectCidScreenState:collectCidScreenStateMindMap,collectCidItem:collectCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueAboard,collectCidScreenMeta:collectCidScreenMetaAboard,collectCidScreenState:collectCidScreenStateAboard,collectCidItem:collectCidItemAboard}}throw new Error("unexpected projectMetaType: "+e)},ns=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueDesignDraft,remapCidScreenMeta:remapCidScreenMetaDesignDraft,remapCidScreenState:remapCidScreenStateDesignDraft,remapCidItem:remapCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGluePrototype,remapCidScreenMeta:remapCidScreenMetaPrototype,remapCidScreenState:remapCidScreenStatePrototype,remapCidItem:remapCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueFlowChart,remapCidScreenMeta:remapCidScreenMetaFlowChart,remapCidScreenState:remapCidScreenStateFlowChart,remapCidItem:remapCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueMindMap,remapCidScreenMeta:remapCidScreenMetaMindMap,remapCidScreenState:remapCidScreenStateMindMap,remapCidItem:remapCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueAboard,remapCidScreenMeta:remapCidScreenMetaAboard,remapCidScreenState:remapCidScreenStateAboard,remapCidItem:remapCidItemAboard}}throw new Error("unexpected projectMetaType: "+e)},is=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:case PROJECT_META_TYPE.MIND_MAP:case PROJECT_META_TYPE.FLOW_CHART:case PROJECT_META_TYPE.ABOARD:return{};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{MAX_Z:MAX_Z_PROTOTYPE,STICKY_Z:STICKY_Z_PROTOTYPE}}throw new Error("unexpected projectMetaType: "+e)},os=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:return createPresetProjectMetaDataDesignDraft;case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return createPresetProjectMetaDataProtoType;case PROJECT_META_TYPE.FLOW_CHART:return createPresetProjectMetaDataFlowChart;case PROJECT_META_TYPE.MIND_MAP:return createPresetProjectMetaDataMindMap;case PROJECT_META_TYPE.ABOARD:return createPresetProjectMetaDataAboard}},rs=e=>{switch(e){case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return collectAssetUrlPrototype;case PROJECT_META_TYPE.FLOW_CHART:return collectAssetUrlFlowChart;case PROJECT_META_TYPE.MIND_MAP:return collectAssetUrlMindMap;case PROJECT_META_TYPE.ABOARD:return collectAssetUrlAboard;default:throw new Error("unexpected projectMetaType: "+e)}},qt="v1",oi="screen",ri="screen-patch",si=I({PB:qt,PBT:oi}),_o=I({PB:qt,PBT:ri}),ao="data",uo="itemList",ci=function(e,n){return n===void 0&&(n=[]),{ttag:si,cid:e,stateList:n}},ls=function(e,n,p){p===void 0&&(p=[]),SET_LOCALE(n);const u=getRandomScreenStateCid();return{ttag:si,cid:e,stateList:[{cid:u,data:{cid:u,name:T("s_page_1_state"),mtime:getLocalTimestamp(),fh:0,hh:0,position:0},itemList:p}]}},li=function(e,n,p){e===void 0&&(e={}),n===void 0&&(n=[]);const{filterEntryScreenState:u,filterEntryItem:f}=lo(p);return{cid:e.cid,data:u(e),itemList:n.map(f)}},_i=e=>{let{ttag:n}=e;const{PB:p,PBT:u}=a(n);if(p!==qt||u!==oi)throw new Error("[ScreenObject] invalid ttag: "+n)},_s=function(e,n){return n===void 0&&(n=[]),{ttag:_o,cid:e,statePatchList:n}},mo=e=>{let{ttag:n}=e;const{PB:p,PBT:u}=a(n);if(p!==qt||u!==ri)throw new Error("[ScreenPatchObject] invalid ttag: "+n)},po=e=>({screenMetaCid:e,dataMap:{},itemListMap:{}}),as=e=>{const{dataMap:n,itemListMap:p}=e;if(!isCompactArrayShallowEqual(Object.keys(n),Object.keys(p)))throw new Error("[verifyScreenRuntimeState] stateCid mismatch")},ho=e=>{const{cid:n,stateList:p}=e,u=po(n);for(const{cid:f,data:x,itemList:P}of p)u.dataMap[f]=x,u.itemListMap[f]=P;return u},fo=(e,n)=>{const{screenMetaCid:p,dataMap:u,itemListMap:f}=e,x=[];for(const P of Object.keys(u)){const S=u[P],j=f[P];x.push(li(S,j,n))}return ci(p,x)};var en=t(93834);const xt="cid",Mt="mtime",go=1,Nn=(e,n)=>e[Mt]!==n[Mt],yo=(e,n)=>e[Mt]>=n[Mt],Eo=(e,n)=>e[Mt]>n[Mt],bo=(e,n)=>e[Mt]<n[Mt]?{...e,[Mt]:n[Mt]+go}:e,ai=(e,n)=>{for(let p=0,u=n.length;p<u;p++){const f=n[p],x=f[xt],P=e.get(x);if(P===void 0)return!0;if(Nn(P,f))return!0;e.delete(x)}return!!e.size},ui=(e,n)=>{let p=0;for(let u=0,f=n.length;u<f;u++){const x=n[u],P=x[xt],S=e.get(P);(S===void 0||Nn(S,x))&&p++,e.delete(P)}return p+=e.size,p},mi=(e,n)=>{const p=[],u=[];for(let f=0,x=n.length;f<x;f++){const P=n[f],S=P[xt],j=e.get(S);j===void 0?p.push({[xt]:S,[Mt]:P[Mt]}):Nn(j,P)&&u.push(bo(j,P)),e.delete(S)}return e.forEach(f=>{u.push(f)}),{deleteList:p,updateList:u}},Fn=(e,n,p,u)=>{let f=!1;const x=e.reduce(Ut,new Map),P=n.reduce(Ut,new Map);for(const S of p){const j=S[xt],K=x.get(j);if(K!==void 0&&yo(K,S)){u(void 0,S),f=!0;continue}const fe=P.get(j);if(fe!==void 0&&(P.delete(j),Eo(fe,S))){u(fe,S),f=!0;continue}u(S,S)}return P.forEach(S=>{u(S,void 0),f=!0}),f},Ut=(e,n)=>e.set(n[xt],n),us=(e,n)=>ai(new Map(Object.entries(e)),Object.values(n)),ms=(e,n)=>ui(new Map(Object.entries(e)),Object.values(n)),ps=(e,n)=>mi(new Map(Object.entries(e)),Object.values(n)),ds=(e,n)=>{let{deleteList:p,updateList:u}=n;const f={};return Fn(p,u,Object.values(e),(P,S)=>{P!==void 0&&(f[P[xt]]=P)})?f:e},hs=(e,n)=>ai(e.reduce(Ut,new Map),n),fs=(e,n)=>ui(e.reduce(Ut,new Map),n),gs=(e,n)=>mi(e.reduce(Ut,new Map),n),Mo=(e,n)=>{let{deleteList:p,updateList:u}=n;const f=[];return Fn(p,u,e,(P,S)=>{P!==void 0&&f.push(P)})?f:e},ys=(e,n)=>{if(e===void 0||n===void 0||e.dataMap!==n.dataMap&&hasObjectPatch(e.dataMap,n.dataMap))return!0;if(e.itemListMap!==n.itemListMap){const p=new Set([...Object.keys(e.itemListMap),...Object.keys(n.itemListMap)]);for(const u of p){const f=e.itemListMap[u]||[],x=n.itemListMap[u]||[];if(e.dataMap[u]!==void 0&&hasArrayWithKeyPatch(f,x))return!0}}return!1},Es=(e,n)=>{if(e===void 0)return 1;if(n===void 0)return Object.keys(e.dataMap).length+Object.keys(e.itemListMap).length;let p=0;if(e.dataMap!==n.dataMap&&(p+=countObjectPatch(e.dataMap,n.dataMap)),e.itemListMap!==n.itemListMap){const u=new Set([...Object.keys(e.itemListMap),...Object.keys(n.itemListMap)]);for(const f of u){const x=e.itemListMap[f]||[],P=n.itemListMap[f]||[];e.dataMap[f]!==void 0&&(p+=countArrayWithKeyPatch(x,P))}}return p},bs=function(e,n){n===void 0&&(n=Co);const p=[];if(e.dataMap!==n.dataMap){const{deleteList:u,updateList:f}=generateObjectPatch(e.dataMap,n.dataMap);(u.length||f.length)&&p.push({type:PB_PATCH_SCREEN_STATE_DATA,deleteList:u,updateList:f})}if(e.itemListMap!==n.itemListMap){const u=new Set([...Object.keys(e.itemListMap),...Object.keys(n.itemListMap)]);for(const f of u){const x=e.itemListMap[f]||[],P=n.itemListMap[f]||[];if(e.dataMap[f]===void 0)continue;const{deleteList:S,updateList:j}=generateArrayWithKeyPatch(x,P);(S.length||j.length)&&p.push({type:PB_PATCH_SCREEN_STATE_ITEM_LIST,stateCid:f,deleteList:S,updateList:j})}}return p},Co={screenMetaCid:void 0,dataMap:{},itemListMap:{}},ko=(e,n)=>{if(n.length===0)return e;let{dataMap:p,itemListMap:u}=e;for(const{type:f,stateCid:x,deleteList:P,updateList:S}of n)switch(f){case ao:{const j=p,K={};p=Fn(P,S,Object.values(j),(pe,Ce)=>{pe===void 0?u=(0,en.i7)(u,Ce.cid):(K[pe.cid]=pe,u[pe.cid]===void 0&&(u[pe.cid]=[]))})?K:j;break}case uo:{if(p[x]===void 0)break;const j=u[x]||[],K=Mo(j,{deleteList:P,updateList:S});u=(0,en.iA)(u,x,K);break}}return e=(0,en.iA)(e,"dataMap",p),e=(0,en.iA)(e,"itemListMap",u),e},pi=function(e,n,p){if(n===void 0&&(n=[]),_i(e),n.length===0)return e;let u=ho(e);for(const f of n){if(mo(f),f.cid!==e.cid)throw new Error("[applyScreenPatchObjectList] unexpected patch cid: "+f.cid+", expect: "+e.cid);u=ko(u,f.statePatchList)}return e=fo(u,p),e},Po=async e=>{let{projectBufferData:n,parseConcatGzipDataToObjectList:p,projectMetaType:u}=e;const f=await p(n);return wo(f,u)},wo=(e,n)=>{const p={},u=x=>{let P=p[x];return P===void 0&&(P=[],p[x]=P),P};return e.forEach(x=>u(x.cid).push(x)),Object.values(p).map(x=>{let[P,...S]=x;return P=di(P,n),S.length&&(P=pi(P,S,n)),P=di(P,n),P})},di=(e,n)=>{_i(e);const p=u=>u.mtime!==void 0?u:{...u,mtime:0};return ci(e.cid,e.stateList.map(u=>li(p(u.data),u.itemList.map(p),n)))},Ms=async e=>{let{projectScreenData:n,parseConcatGzipDataToObjectList:p,projectMetaType:u}=e;const[f,...x]=await p(n);return pi(f,x,u)};var To=t(35608),hi=t(30388);const{Blob:tn}=window,vo=e=>e instanceof ArrayBuffer?e:parseBlobAsArrayBuffer(e),Cs=async e=>new tn([gzip(new Uint8Array(await parseBlobAsArrayBuffer(new tn([JSON.stringify(e)]))))]),ks=async e=>JSON.parse(await parseBlobAsText(new tn([gunzip(new Uint8Array(await vo(e)))]))),Oo=e=>{const n=[];let p=0,u=1;for(;u>0;){const f=new To.Inflate;if(f.push(new Uint8Array(e,p)),f.err)throw new Error("[gunzipAsArrayBufferList|pako] errorCode: "+f.err+", message: "+f.msg);n.push(f.result),p+=f.strm.total_in,u=f.strm.avail_in}return n},So=async e=>{const n=e instanceof ArrayBuffer?e:await(0,hi.H)(e),p=Oo(n),u=[];for(const f of p){const x=await(0,hi.n8)(new tn([f]));for(const P of x.split("\n"))P&&P.length>2&&u.push(JSON.parse(P))}return u},{fetch:nn}=window,Ps=async e=>{const n=await nn(e,{credentials:"same-origin"});if(!n.ok)throw new Error("[fetchGetHead] failed with "+n.status+": "+e)},Un=async(e,n)=>{const p=new Error(e);return p.payload={...await n.json().catch(()=>null),status:n.status},p},xo=async e=>{const n=await nn(e,{credentials:"same-origin"});if(!n.ok)throw await Un("[fetchGetJSON] failed with "+n.status+": "+e,n);return n.json()},ws=async(e,n)=>{const p=await nn(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n),credentials:"same-origin"});if(!p.ok)throw await Un("[fetchPostJSON] failed with "+p.status+": "+e,p);return p.json()},Do=async(e,n)=>{const p=await nn(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n),credentials:"same-origin"});if(!p.ok)throw await Un("[fetchPostBlob] failed with "+p.status+": "+e,p);return p.blob()},Ao=async e=>{let{projectMetaCid:n,projectMetaType:p,screenMetaCidList:u,projectBasicEncryptedPassword:f,accessToken:x=""}=e;if(u.length===0)return[];const P="/project-buffer/"+le(p)+"/all/"+n+"?password="+f+"&access_token="+x,S=await Do(P,{localKeyList:u});return await Po({projectBufferData:S,parseConcatGzipDataToObjectList:So,projectMetaType:p})},Dt=async e=>{let{projectMetaList:n,screenMetaList:p,projectBasicEncryptedPassword:u="",accessToken:f=""}=e;const x=[];for(const P of n){const S=p.filter(K=>K.project_meta_cid===P.cid).map(K=>K.cid);S.length>2048&&console.warn("[fdPSOL] big proj: "+S.length);const j=(0,F.eO)(S,1024);for(const K of j)x.push(...await Ao({projectMetaCid:P.cid,projectMetaType:P.type,screenMetaCidList:K,projectBasicEncryptedPassword:u,accessToken:f}))}return x},Ts=async e=>{let{userLocale:n}=e;const{user_combo_groups:p,screen_aligns:u,project_metas:f,screen_glues:x,screen_metas:P}=await fetchGetJSON("/api/library/v3/project_upper/user_combo_groups");console.log("[fdUSG] pm#"+f.length+" sg#"+x.length+" sm#"+P.length+" | ucg#"+p.length+" sa#"+u.length);const S=await Dt({projectMetaList:f,screenMetaList:P});return{userComboGroupList:p,screenAlignList:u,projectMetaList:f,screenGlueList:x,screenMetaList:P,projectScreenObjectList:S}},vs=async e=>{let{projectBasicCid:n,userLocale:p}=e;const{project_basic:u,screen_aligns:f,project_metas:x,screen_glues:P,screen_metas:S}=await fetchGetJSON("/api/upper/web_v1/basics/"+n);console.log("[fdPB] pm#"+x.length+" sg#"+P.length+" sm#"+S.length+" | sa#"+f.length);const j=await Dt({projectMetaList:x,screenMetaList:S});return{projectBasic:u,screenAlignList:f,projectMetaList:x,screenGlueList:P,screenMetaList:S,projectScreenObjectList:j}},Io=async e=>{let{projectBasicAccessToken:n,projectBasicEncryptedPassword:p="",userLocale:u,projectVersion:f}=e;const{project_basic:x,screen_aligns:P,project_metas:S,screen_glues:j,screen_metas:K}=await xo("/api/upper/web_v1/basics/"+n+"?password="+p+(f?"&version="+f:"")),fe=j.find(Ie=>Ie.type===D.PROJECT_TRASHCAN),pe=fe?K.filter(Ie=>Ie.screen_glue_cid!==fe.cid):K;console.log("[fdPB+] pm#"+S.length+" sg#"+j.length+" sm#"+K.length+"/"+pe.length+" | sa#"+P.length);const Ce=await Dt({projectMetaList:S,screenMetaList:pe,projectBasicEncryptedPassword:p,accessToken:n});return{projectBasic:x,screenAlignList:P,projectMetaList:S,screenGlueList:j,screenMetaList:pe,projectScreenObjectList:Ce}},Os=async e=>{let{projectBasicAccessToken:n,projectBasicEncryptedPassword:p="",userLocale:u}=e;const{project_basic:f,screen_aligns:x,project_metas:P,screen_glues:S,screen_metas:j}=await fetchGetJSON("/api/upper/web_v1/basics/"+n+"?password="+p);console.log("[fdPBbAT] pm#"+P.length+" sg#"+S.length+" sm#"+j.length+" | sa#"+x.length);const K=await Dt({projectMetaList:P,screenMetaList:j,projectBasicEncryptedPassword:p,accessToken:n});return{projectBasic:f,screenAlignList:x,projectMetaList:P,screenGlueList:S,screenMetaList:j,projectScreenObjectList:K}},Ss=async e=>{let{projectUpperCid:n,isFromIframe:p=!1}=e;const{market_template:u,screen_aligns:f,project_metas:x,screen_glues:P,screen_metas:S}=await fetchGetJSON("/api/community/v1/market_template/"+n+(p?"?is_from_iframe=true":""));console.log("[fdMT] pm#"+x.length+" sg#"+P.length+" sm#"+S.length+" | sa#"+f.length);const j=await Dt({projectMetaList:x,screenMetaList:S});return{projectUpper:u,screenAlignList:f,projectMetaList:x,screenGlueList:P,screenMetaList:S,projectScreenObjectList:j}},xs=async e=>{let{projectUpperCid:n,isFromIframe:p=1}=e;const{data:u,market_template:f,project_metas:x}=await fetchGetJSON("/api/community/v1/market_template/"+n+(p?"?is_from_iframe=true":""));return{screenMetaList:u,projectUpper:f,projectMetaList:x}},Ds=async e=>{let{projectUpperCid:n}=e;const{reviewable_project:p,screen_aligns:u,project_metas:f,screen_glues:x,screen_metas:P}=await fetchGetJSON("/api/community/v1/reviewable_project/"+n);console.log("[fdRP] pm#"+f.length+" sg#"+x.length+" sm#"+P.length+" | sa#"+u.length);const S=await Dt({projectMetaList:f,screenMetaList:P});return{projectUpper:p,screenAlignList:u,projectMetaList:f,screenGlueList:x,screenMetaList:P,projectScreenObjectList:S}},As=async e=>{let{projectUpperCid:n}=e;const{reviewable_project:p,screen_aligns:u,project_metas:f}=await fetchGetJSON("/api/community/v1/reviewable_project/"+n);return{projectUpper:p,projectMetaList:f,screenAlignList:u}},Is=async e=>{let{projectUpperCid:n}=e;const{product:p,screen_aligns:u,project_metas:f,screen_glues:x,screen_metas:P}=await fetchGetJSON("/api/upper/web_v1/product/"+n);console.log("[fdCP] pm#"+f.length+" sg#"+x.length+" sm#"+P.length+" | sa#"+u.length);const S=await Dt({projectMetaList:f,screenMetaList:P});return{projectUpper:p,screenAlignList:u,projectMetaList:f,screenGlueList:x,screenMetaList:P,projectScreenObjectList:S}},Bs=async(e,n)=>{let{teamCid:p,userLocale:u}=e;const{name:f,type:x,attr:P={},device:S,model:j,width:K,height:fe,subProject:pe,zboardTag:Ce,visibility:Ie}=n,We=UPPER_META_PROJECT_BASIC,{userId:Ve,upperCid:it,zboardTabs:dt,projectMetaCid:gt}=await fetchPostJSON("/project-buffer/"+x+"/check-init/project-upper?upperType="+We,{presetOption:{locale:u,name:f,type:x,device:S,model:j,width:K,height:fe},railsExtra:{team_cid:p,visibility:Ie,name:f,type:x,attr:P,device:S,model:j,width:K,height:fe,subProject:pe,zboardTag:Ce}});return{userId:Ve,upperCid:it,upperType:We,zboardTabs:dt,projectMetaCid:gt}},Rs=async e=>{let{projectBasicCid:n,projectBasicType:p,teamCid:u}=e;const f=UPPER_META_PROJECT_BASIC,{userId:x,upperCid:P,projectMetaCid:S}=await fetchPostJSON("/project-buffer/"+p+"/check-duplicate/project-upper?upperAction=duplicate-project-basic&upperCid="+n,{railsExtra:{team_cid:u}});return{userId:x,upperCid:P,upperType:f,projectMetaCid:S}},Ls=async e=>{let{upperCid:n,projectMetaCid:p,projectMetaType:u,screenGlueCid:f,screenMetaCidList:x,screenGlueCidList:P=[],nextUpperCid:S,nextProjectMetaCid:j,nextScreenGlueCid:K}=e;const{userId:fe}=await fetchPostJSON("/project-buffer/"+u+"/check-transfer/screen-meta?upperCid="+n,{projectMetaCid:p,screenGlueCid:f,screenMetaCidList:x,screenGlueCidList:P,nextUpperCid:S,nextProjectMetaCid:j,nextScreenGlueCid:K});return{userId:fe,upperCid:n,nextUpperCid:S}},js=async e=>{let{encryptedPassword:n,accessToken:p}=e;const{urlHtmlZip:u}=await fetchPostJSON("/nodekiq/build-html-zip",{encryptedPassword:n,accessToken:p});return{urlHtmlZip:u}},Ns=async e=>{let{encryptedPassword:n,accessToken:p}=e;const{urlApk:u}=await fetchPostJSON("/nodekiq/build-apk",{encryptedPassword:n,accessToken:p});return{urlApk:u}};var Gn=t(73752);const Fs=e=>{let{isVersions:n}=e;return{requestPreviewSetting:gi,requestPreviewInitialData:fi,requestProjectFullDataByAccessToken:yi,updateProjectBasicsInfo:Lo,requestPreviewInitialData4ReadOnlyV2:Bo}},fi=async e=>{let{projectAccessToken:n,projectEncryptedPassword:p}=e;const u=p?"&password="+p:"";return(0,Gn.EE)("/api/upper/web_v1/design/readonly_initial?access_token="+n+u)},Bo=async e=>{let{projectAccessToken:n,view_mode:p}=e;return fetchGetJSON("/api/flat/web_v1/preview/initial?access_token="+n+"&view_mode="+p)},gi=e=>{let{projectAccessToken:n,password:p}=e;return(0,Gn.EE)("/api/upper/web_v1/preview/setting?access_token="+n+"&password="+(p||""))},Ro=e=>{let{projectAccessToken:n,password:p}=e;return(0,Gn.EE)("/api/flat/web_v1/preview/setting?access_token="+n+"&password="+(p||""))},yi=async e=>{let{projectAccessToken:n,projectEncryptedPassword:p,userLocale:u,projectVersion:f}=e;const x=await Io({projectBasicAccessToken:n,projectBasicEncryptedPassword:p,userLocale:u,projectVersion:f});if(!x)return;const{projectMetaList:[P],screenGlueList:S,screenMetaList:j,projectScreenObjectList:K,projectBasic:fe,screenAlignList:pe}=x;return{projectMeta:P,screenGlueList:S,screenMetaList:j,projectScreenObjectList:K,projectBasic:fe,screenAlignList:pe}},Lo=(e,n)=>fetchPutJSON("/api/upper/web_v1/basics/"+e,{...n}),Us=(e,n)=>fetchGetJSON("/api/upper/web_v1/basics/auth/"+e+"?password="+n),Gs={requestPreviewSetting:gi,requestPreviewSettingV2:Ro,requestPreviewInitialData:fi,requestProjectFullDataByAccessToken:yi};var jo=t(70103),Ei=t(37780),No=t(23895),Fo=t(47719),mt=t(35269);const Uo={canUploadToSquare:!1},bi=function(e){e===void 0&&(e="POPUP-HELPER-ROOT");const n=document.createElement("div");n.id=e,document.body.appendChild(n);const p=(0,jo.MT)(No.Z);d.render((0,mt.jsx)(Ei.zt,{store:p,children:(0,mt.jsx)(Fo.Z,{})}),n);const{confirmAsync:u,alertAsync:f,alertAsyncWide:x,alertAsyncBlocked:P,promptGetPasswordAsync:S,loginAsync:j,teamSelectModalAsync:K,sharingAsync:fe,chargeAsync:pe,upgradeChatGPTAsync:Ce}=Go(p.dispatch);return{confirmAsync:u,alertAsync:f,alertAsyncWide:x,alertAsyncBlocked:P,promptGetPasswordAsync:S,loginAsync:j,teamSelectModalAsync:K,sharingAsync:fe,chargeAsync:pe,upgradeChatGPTAsync:Ce,destroy:()=>{d.unmountComponentAtNode(n),n.remove()}}},Go=e=>({confirmAsync:pe=>{let{className:Ce,title:Ie,desc:We,isHTML:Ve,confirmText:it,cancelText:dt,isClose:gt,theme:ht}=pe;return new Promise(vt=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,className:Ce,title:Ie,desc:We,isHTML:Ve,type:"alert",alertType:"confirm",canClose:gt!==!1,canCancel:!0,canConfirm:!0,cancelText:dt,confirmText:it,theme:ht,onCancel:()=>vt(!1),onConfirm:()=>vt(!0)}}}))},alertAsync:pe=>{let{title:Ce,desc:Ie,isHTML:We,confirmText:Ve}=pe;return new Promise(it=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:Ce,desc:Ie,isHTML:We,type:"alert",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:Ve,onConfirm:()=>it()}}}))},alertAsyncWide:pe=>{let{title:Ce,desc:Ie,isHTML:We,confirmText:Ve}=pe;return new Promise(it=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:Ce,desc:Ie,isHTML:We,type:"functional",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:Ve,onConfirm:()=>it()}}}))},alertAsyncBlocked:pe=>{let{title:Ce,desc:Ie,isHTML:We,confirmText:Ve}=pe;return new Promise(it=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:Ce,desc:Ie,isHTML:We,type:"alert",alertType:"alert",canClose:!1,canCancel:!1,canConfirm:!0,confirmText:Ve,onConfirm:()=>it()}}}))},promptGetPasswordAsync:(pe,Ce)=>new Promise(Ie=>e({type:"modal:update:state",payload:{previewAuthModal:{isOpen:pe,isWrongPwd:Ce,onConfirm:We=>We&&Ie(We)}}})),loginAsync:pe=>{let{onCancel:Ce=Gt,onConfirm:Ie=Gt,type:We="signin",source:Ve}=pe;return e({type:"modal:update:state",payload:{loginModal:{source:Ve,isOpen:!0,type:We,onCancel:Ce,onConfirm:Ie}}})},teamSelectModalAsync:pe=>{let{projectCid:Ce="",onCancel:Ie=Gt,onConfirm:We=Gt}=pe;return e({type:"modal:update:state",payload:{teamSelectModal:{isOpen:!0,projectCid:Ce,onCancel:Ie,onConfirm:We}}})},sharingAsync:pe=>{let{project:Ce,theme:Ie,isGuestMode:We,screenMetaList:Ve=[],onUpdateProject:it=Gt,extraInfo:dt=Uo,screenMetaCidToVisit:gt,user:ht}=pe;return e({type:"modal:update:state",payload:{sharingModal:{isOpen:!0,project:Ce,theme:Ie,extraInfo:dt,isGuestMode:We,screenMetaList:Ve,onUpdateProject:it,screenMetaCidToVisit:gt,user:ht}}})},chargeAsync:pe=>e({type:"modal:update:state",payload:{chargeOverlay:{isOpen:!0,...pe}}}),upgradeChatGPTAsync:pe=>e({type:"modal:update:state",payload:{upgradeChatGPTModal:{isOpen:!0,...pe}}})}),Gt=()=>{},zs=e=>localStorageGetItem(e+"_pwd"),Ws=(e,n)=>localStorageSetItem(e+"_pwd",n),Mi=async(e,n)=>{let p;try{p=await checkAuthorization(e,n)}catch(u){p=u}return p},Ks=async e=>{const n=createPopupHelper();let p=!1,u=md5(await n.promptGetPasswordAsync(!0,!1));for((await Mi(e,u)).status===403&&(p=!0);p;)u=md5(await n.promptGetPasswordAsync(!0,p)),(await Mi(e,u)).status===403?p=!0:p=!1;return n.promptGetPasswordAsync(!1),u},Hs=(e,n,p)=>{if(!e)return!0;if(n){var u;return(p==null||(u=p.permissions.find(x=>x.user_id===e.id))==null?void 0:u.role)===void 0}else return!(e.id===p.owner_id)},zo={api:{}},Wo=e=>{Object.assign(zo,e)};var Ci=t(86185),on=t(85322),ki=t(24011),zn=t(95485);const Pi=async e=>{let{projectMetaCid:n}=e;await(0,zn.By)({userId:void 0,flpakKey:n,onTransferError:zn.$p,onReadOnlyError:zn.Yo,isDummyCmt:!0,__fetchFlpakAsync:y.Ev},void 0)};var Vs=t(35517);const Ko=async e=>{let{projectBasicCid:n,accessToken:p,password:u}=e;try{const{userId:f,flatKey:x}=await fetchGetJSON("/api/flat/web_v1/proj2-preview-info?prj2Cid="+n+"&access_token="+p+"&password="+u);return{userId:f,flatKey:x}}catch(f){await apiErrorModals(f)}},Js=async e=>{let{projectBasic:n,password:p,accessToken:u}=e;{const f=u||n.access_token,{userId:x,flatKey:P}=await Ko({projectBasicCid:n.cid,accessToken:f,password:p});console.log("[p2edit] uId="+x+" key="+P+" pbCid="+n.cid);const S=!!x,j=S&&!getIsInPreviewViewMode();await initRootSdk({userId:x,flpakKey:P,onTransferError,onReadOnlyError,isAllowDat:S?"RO":!1,isAllowCmt:S,isAllowCur:j,token:f,passwd:p},n)}};var Ho=t(63167);const wi=function(e,n,p){const u=n.getGuidesData()||"[]",f=new Set(JSON.parse(u)),x=new Set,P=new Map;return{checkGuideHasShown:S=>f.has(S),checkGuideToBeShown:S=>x.has(S),getState:()=>({commonGuidesHasShown:Array.from(f),commonGuidesToBeShown:Array.from(x),mountGuidesMap:P}),tryToShowGuide:S=>{var j;if(f.has(S)||!((j=MB)!=null&&(j=j.user)!=null&&j.id))return;const K=document.getElementById("MD_"+S);if(K){K.style.display="block";return}x.add(S),(0,Ho.k)(S,e,p)},markGuideAsRead:S=>{f.add(S),n.setGuidesData(JSON.stringify(Array.from(f)))},batchMarkGuideAsRead:S=>{S.forEach(j=>f.add(j)),n.setGuidesData(JSON.stringify(Array.from(f)))},closeGuide:S=>{const j=document.getElementById("MD_"+S);j&&j.parentNode&&j.parentNode.removeChild(j)},closeAllGuide:()=>{const S=document.getElementById("GUIDES");S&&S.parentNode&&S.parentNode.removeChild(S)},removeGuide:S=>{f.delete(S),n.setGuidesData(JSON.stringify(Array.from(f)))},tryToContinueMountGuide:(S,j)=>{const K=P.get(S);K&&typeof(K==null?void 0:K.handleContinue)=="function"&&K.handleContinue(j)},tryToResizeMountGuide:S=>{const j=P.get(S);j&&typeof(j==null?void 0:j.handleResize)=="function"&&j.handleResize()},tryToCloseMountGuide:S=>{const j=P.get(S);j&&typeof(j==null?void 0:j.handleClose)=="function"&&j.handleClose()},registerMountGuideCallback:(S,j)=>{const K=P.get(S)||{};P.set(S,{...K,...j})},removeMountGuideCallback:(S,j)=>{if(!j){P.delete(S);return}const K=P.get(S)||{};P.set(S,{...K,[j]:void 0})}}},Zs=e=>{let{store:n,commonGuidesData:p,isDesign:u,isPreview:f}=e;MB.commonGuideHelper=wi(n,{getGuidesData:()=>p,setGuidesData:updateUserCommonGuidesData},{isDesign:u,isPreview:f})},Vo=e=>{let{store:n,isDesign:p,isPreview:u}=e;const f={guide:{dashboard_guides:"",workspace_guides:"",square_guides:null,workspace_guides_version:"",default_team_cid:"",root_project_team_cid:"",workspace_guides_2203:"",workspace_guides_2203_version:"",aboard_guides:""},guide_project_template_cid:"",guide_project_template_2203_cid:"",guide_flow_template_cid:"",guide_design_template_cid:"",guide_prototype_template_cid:""},{guide:{workspace_guides:x}}=f;MB.commonGuideHelper=wi(n,{getGuidesData:()=>x,setGuidesData:()=>{}},{isDesign:p,isPreview:u})};var Ti=t(68035);const{MB:lt}=window;lt.f.inSharing=!0;const Ys=e=>{let{initialData:n,designOptions:p,previewOptions:u,sharing:f,password:x,api:{updateProjectBasicsInfo:P}}=e;const{runnerController:S,messageBucket:j,webpackInterface:K,PreviewApp:fe}=createPreviewRelated(getPreviewComponentByOptions(u));return setExternal({api:{updateProjectBasicsInfo:P}}),Object.assign(lt,{runnerController:S,messageBucket:j,webpackInterface:K,global:{popupHelper:createPopupHelper(),designOptions:p}}),lt.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:u}}),{requestData:async pe=>{let{projectAccessToken:Ce,isPasswordRequired:Ie,projectBasicCid:We}=pe;const{user:Ve,org:it,preference:dt,canEditByCurrentUser:gt,project_basic:ht,project_meta:vt,space:xi}=n,kr=getIsNeedInputPassword(Ve,xi,ht);let cn=loadProjectEncryptedPassword(Ce);const Pr=await tryCheckAuthorization(Ce,cn);if(Ie&&kr&&Pr.status===403){var Di;lt==null||(Di=lt.messageBucket)==null||Di.send("ready"),cn=await checkAuthorizationWithPrompt(Ce),saveProjectEncryptedPassword(Ce,cn)}try{await requestProjectFullDataFlat4ReadOnly({projectBasic:ht,password:cn||x,accessToken:Ce})}catch(Wt){return setTimeout(()=>{var Ii,Bi;return lt==null||(Ii=lt.messageBucket)==null?void 0:Ii.send("mobileLoadProjectError",{errMsg:"\u4EC5\u4F01\u4E1A\u6210\u5458\u53EF\u89C1-"+(lt!=null&&(Bi=lt.user)!=null&&Bi.id?"\u5DF2\u767B\u5F55\u4F46\u975E\u4F01\u4E1A\u6210\u5458":"\u672A\u767B\u5F55")})},1e3),crashedPageWithUser(Wt)}lt.webpackInterface.store.dispatch({type:"entry:preview:update:current:sharing",payload:{sharing:f}}),lt.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:dt||{}}});const wr=gt&&(vt.is_org_project?!(ht!=null&&ht.expired):!(ht!=null&&ht.expired)||Ve.apps.length<=Ve.free_projects_count);Object.assign(lt,{user:Ve||{},canEditByCurrentUser:wr,org:it||void 0}),lt.webpackInterface.store.dispatch({type:"entry:state:init"}),hideLoading();let Ai="[]";try{const{guide:Wt}=await requestUserCommonGuidesData();Ai=(Wt==null?void 0:Wt.workspace_guides)||"[]"}catch(Wt){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}return initCommonGuide({store:lt.webpackInterface.store,commonGuidesData:Ai,isDesign:!1,isPreview:!0}),{projectAlike:ht,projectMeta:vt,projectShare:f}},renderPreview:(pe,Ce,Ie,We)=>{const Ve=sharingVisibleCrashEffect(We);if(Ve)return Ve;const it=new KeyboardManager;return _jsx(KeyboardManagerContext.Provider,{value:it,children:_jsx(TooltipsManagerProvider,{children:_jsx(fe,{store:K.store,projectAlike:pe,projectMeta:Ce,projectShare:We})})})}}},Jo=e=>{let{initialData:n,designOptions:p,previewOptions:u,sharing:f,api:{updateProjectBasicsInfo:x}}=e;const{isMobile:P,isIOSClient:S,isStandAlone:j}=u;(j||S)&&(document.documentElement.style.height="100vh");const{runnerController:K,messageBucket:fe,webpackInterface:pe,PreviewApp:Ce}=(0,r.o)(_(u));return Wo({api:{updateProjectBasicsInfo:x}}),Object.assign(lt,{runnerController:K,messageBucket:fe,webpackInterface:pe,global:{popupHelper:bi(),designOptions:p}}),lt.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:u}}),{requestData:async Ie=>{let{projectAccessToken:We,projectBasicCid:Ve}=Ie;const{user:it,org:dt,preference:gt,project_basic:ht,project_meta:vt}=n;return await Pi({projectMetaCid:vt.cid}),lt.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:f}}),lt.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:gt||{}}}),Object.assign(lt,{user:it||{},canEditByCurrentUser:!1,org:dt||void 0}),lt.webpackInterface.store.dispatch({type:"entry:state:init"}),(0,Ci.Z)(),{projectAlike:ht,projectMeta:vt}},renderPreview:(Ie,We,Ve,it)=>{(0,Ti.K)(it);const dt=new on.Sm,gt=new URLSearchParams(location.search),ht=P?"preview":gt.has("inspect")?"inspect":gt.has("comment")?"comment":"preview";return(0,mt.jsx)(on.XC.Provider,{value:dt,children:(0,mt.jsx)(ki.Z,{children:(0,mt.jsx)(Ce,{store:pe.store,previewMode:ht,projectAlike:Ie,projectMeta:We,projectShare:it})})})}}},Xs=async e=>{let{initialData:n,previewOptions:p,api:u,projectAccessToken:f,projectEncryptedPassword:x,isPasswordRequired:P,$root:S,projectBasicCid:j,sharing:K,password:fe}=e;const pe={isDesign:!0,isExperience:!1,isLoggedExperience:!1},{requestData:Ce,renderPreview:Ie}=initPreview({api:u,initialData:n,previewOptions:p,designOptions:pe,sharing:K,password:fe}),{projectAlike:We,projectMeta:Ve,projectShare:it}=await Ce({projectAccessToken:f,projectEncryptedPassword:x,isPasswordRequired:P,projectBasicCid:j}),dt=location.hash||"",gt=dt&&dt.startsWith("#screen=")&&dt.substr(8);ReactDOM.render(Ie(We,Ve,gt,it),S)},Zo=async e=>{let{initialData:n,previewOptions:p,api:u,projectAccessToken:f,projectEncryptedPassword:x,isPasswordRequired:P,$root:S,projectBasicCid:j,sharing:K}=e;const fe={isDesign:!0,isExperience:!1,isLoggedExperience:!1},{requestData:pe,renderPreview:Ce}=Jo({api:u,initialData:n,previewOptions:p,designOptions:fe,sharing:K}),{projectAlike:Ie,projectMeta:We}=await pe({projectAccessToken:f,projectEncryptedPassword:x,isPasswordRequired:P,projectBasicCid:j}),Ve=location.hash||"",it=Ve&&Ve.startsWith("#screen=")&&Ve.substr(8);d.render(Ce(Ie,We,it),S)};var rn=t(49650),Yo=t(29402),Xo=t(21258),$o=t(99368),Qo=t(7966),vi=t(444);class qo extends b.PureComponent{constructor(n){super(n);const{store:p,projectBasic:u,projectMeta:f,isHtmlZip:x}=n,{screenKey:P,canvasKey:S}=(0,vi.Qw)();this.state={visibleIsEmpty:!1};try{const j=(0,vi.FZ)(P);p.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:u,projectMeta:f,screenCid:j,canvasCid:S,isHtmlZip:x}})}catch(j){this.state={visibleIsEmpty:!0}}}componentDidMount(){this.props.onComponentDidMount()}render(){const{store:n}=this.props;return this.state.visibleIsEmpty?(0,Ti.L)():(0,mt.jsx)(Ei.zt,{store:n,children:(0,mt.jsx)(Qo.Z,{children:(0,mt.jsx)($o.Z,{})})})}}var er=t(32380),$s=t(16426),tr=t(53092),nr=function(e){return e[e.Design=0]="Design",e[e.Experience=1]="Experience",e[e.ReadOnly=2]="ReadOnly",e[e.Version=3]="Version",e[e.HTMLZip=4]="HTMLZip",e[e.Community=5]="Community",e}(nr||{}),ir=t(29184);const or=e=>{let{initialData:n,designOptions:p,onUpdateAiState:u,global:f,onUpdateSharing:x}=e;const{user:P,org:S,team:j,preference:K,MBServer:fe,orgList:pe,user_fcg:Ce,org_fcg:Ie,space:We,canEditByCurrentUser:Ve}=n;(0,tr.PX)((0,ir.F)()),Object.assign(MB,{user:P||{},currentOrg:S,canEditByCurrentUser:Ve,global:{...f,popupHelper:bi(),experienceLoginModalHelper:er.m}}),Object.assign(window,{MBServer:fe}),MB.action("current:update:state",{currentOrg:S,currentTeam:j,currentUser:P,orgList:pe,user_fcg:Ce,org_fcg:Ie,currentSpace:We}),MB.action("update:design:options",{designOptions:p}),P!=null&&P.id&&MB.action("entry:init:preference",{preference:K}),MB.action("entry:init:community:params"),u&&u({user:P,org:S}),x&&x()},Qs=async e=>{let{designStore:n}=e,p="[]";try{const{guide:u}=await requestUserCommonGuidesData();p=u==null?void 0:u.workspace_guides}catch(u){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}await initCommonGuide({store:n,commonGuidesData:p,isDesign:!0,isPreview:!1})},qs=async e=>{let{type:n,projectBasicCid:p}=e;switch(n){case DesignType.Design:return requestProjectFullDataFlat(p);case DesignType.Experience:return requestExperienceFullDataFlat(p);default:throw new Error(n+" not found in known design types for "+p)}},rr=e=>{let{designOptions:n,initialData:p,onComponentDidMount:u}=e,f=!1;const x=(0,Xo.t)(MB);return or({initialData:p,designOptions:n,global:{designOptions:n},onUpdateSharing:()=>{}}),{requestData:async()=>{const{project_basic:P,project_meta:S}=p;return Vo({store:x,isDesign:!0,isPreview:!1}),await Pi({projectMetaCid:S.cid}),Object.assign(MB,{tag:P==null?void 0:P.version}),MB.action("update:design:options",{designOptions:MB.global.designOptions}),f=!0,{projectAlike:P,projectMeta:S}},renderDesign:P=>{let{projectAlike:S,projectMeta:j}=P;return f?(0,mt.jsx)(qo,{store:x,projectBasic:S,projectMeta:j,onComponentDidMount:u,isHtmlZip:!0}):null}}};var sr=t(6725),cr=t(34788),lr=t.n(cr);class _r extends b.PureComponent{constructor(){super(...arguments),(0,rn.Z)(this,"handleTransitionEnd",n=>{n.target===this.$element&&MB.action("entry:update:screen-rect-map")})}render(){const{isCollapse:n,renderDesign:p,projectAlike:u,projectMeta:f}=this.props;return(0,mt.jsx)("div",{ref:x=>this.$element=x,className:lr()("mb-design-page",{"is-collapse":n}),onTransitionEnd:this.handleTransitionEnd,children:p({projectAlike:u,projectMeta:f})})}}var ar=t(46187);class ur extends b.PureComponent{constructor(n){super(n),(0,rn.Z)(this,"handleWheelChanged",P=>{if(P.deltaX===0)return;const S=document.getElementById("workspace"),j=S.scrollLeft+S.offsetWidth===S.scrollWidth&&P.deltaX>0,K=S.scrollLeft===0&&P.deltaX<0;(j||K)&&P.preventDefault()}),(0,rn.Z)(this,"handleDesignDidMount",()=>{MB.reduxEntry.setEntryMap(ar.T),this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,rn.Z)(this,"keyboardManager",new on.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,projectAlike:null,projectMeta:null};const{designOptions:p,initialData:u}=n,{requestData:f,renderDesign:x}=rr({initialData:u,designOptions:p,onComponentDidMount:this.handleDesignDidMount});this.requestData=f,this.renderDesign=x}componentDidMount(){const{projectUpperCid:n}=this.props;Promise.all([this.requestData(n)]).then(p=>{let[{projectAlike:u,projectMeta:f}]=p;this.setState({projectAlike:u,projectMeta:f},()=>{this.setState({isDataLoaded:!0})});const x=document.getElementById("workspace");x&&x.addEventListener("wheel",this.handleWheelChanged)}).catch(p=>{})}componentWillUnmount(){const n=document.getElementById("workspace");n&&n.removeEventListener("wheel",this.handleWheelChanged,{capture:!0})}render(){const{isLoading:n,isDataLoaded:p,isDesignCollapse:u,projectAlike:f,projectMeta:x}=this.state,{renderDesign:P}=this;return(0,mt.jsx)(on.XC.Provider,{value:this.keyboardManager,children:(0,mt.jsx)(ki.Z,{children:(0,mt.jsxs)(sr.X,{className:"example-app",children:[p&&(0,mt.jsx)(_r,{isCollapse:u,projectAlike:f,projectMeta:x,renderDesign:P}),n&&(0,mt.jsx)(Yo.S6,{className:"mb-loading"})]})})})}}var mr=t(92029);const sn="hzv3",pr="pid",dr="pbj",hr="psol",ec="psv2am",tc=()=>isBasicObject(window[TAG_HTML_ZIP_V3]),zt=()=>(0,mr.hK)(window[sn],"missing htmlZipV3 data"),fr=async()=>(zt(),window[sn][pr]),Oi=async()=>{zt();const{project_basic:e,screen_aligns:n,project_metas:p,screen_glues:u,screen_metas:f}=window[sn][dr],x=window[sn][hr];return{projectBasic:e,screenAlignList:n,projectMetaList:p,screenGlueList:u,screenMetaList:f,projectScreenObjectList:x}},nc=async()=>(zt(),{artboards:Object.values(window[TAG_HTML_ZIP_V3][TAG_PROJECT_SKETCH_V2_ARTBOARD_MAP]).map(e=>{let{artboard:n}=e;return n})}),ic=async e=>(zt(),window[TAG_HTML_ZIP_V3][TAG_PROJECT_SKETCH_V2_ARTBOARD_MAP][e]),oc=async()=>{zt();const{project_share:e}=window[TAG_HTML_ZIP_V3][TAG_PROJECT_BASIC_JSON];return{projectShare:e}},Si={requestPreviewInitialData:fr,requestProjectFullDataByAccessToken:async e=>{let{projectEncryptedPassword:n}=e;const{projectMetaList:[p],screenGlueList:u,screenMetaList:f,projectScreenObjectList:x,projectBasic:P,screenAlignList:S}=await Oi(),{password:j}=P;if(j&&n!==j)throw new Error("error password");return{projectMeta:p,screenGlueList:u,screenMetaList:f,projectScreenObjectList:x,projectBasic:P,screenAlignList:S}},fetchDataProjectBasic:Oi};var gr=t(62059),yr=t(67246),Er=t(89719),br=t(89500);t.p="./mb-proto2/";const Mr=document.getElementById("workspace"),Cr=async()=>{var e,n;const p=o({isHTMLZip:!0});(0,c.tq)()&&((e=document.querySelector("body"))==null||e.classList.add("mobile"));let u=await(0,y.vn)();const{projectUpper:f,projectMeta:x}=u;u={...u,projectName:f.name,project_basic:f,project_meta:x};const{sharing:P}=await(0,Er.ec)({project:f}),{projectName:S}=u,{generateLang:j}=await br.Ar.loadLLG();await j(),document.title=""+(0,yr.FQ)(f.name||f.title),!ENV.IS_ON_PREMISES&&(0,gr.wb)();const{projectAccessToken:K,projectEncryptedPassword:fe,isPasswordRequired:pe}=u,Ce=(n=new URLSearchParams(location.search))==null?void 0:n.get("view_mode"),Ie=window.HZv5_PREVIEW_MODE||"";if(Ce?Ce==="device":Ie==="device")(0,Ci.v)(S),await Zo({initialData:u,previewOptions:p,api:Si,projectAccessToken:K,projectEncryptedPassword:fe,isPasswordRequired:pe,sharing:P,$root:document.getElementById("workspace")});else{const Ve={isDesign:!0,isExperience:!1,isLoggedExperience:!1};d.render((0,mt.jsx)(ur,{initialData:u,designOptions:Ve,api:Si,projectAccessToken:K,projectEncryptedPassword:fe,isPasswordRequired:pe,sharing:P,isHtmlZip:!0}),Mr)}};document.addEventListener("DOMContentLoaded",async()=>{await Cr()})},23555:(B,L,t)=>{"use strict";t.d(L,{Z:()=>h});var d=t(37780),y=t(77200),b=t(24767);const h=(0,d.$j)(i=>{const l=(0,y.kc)(i),w=(0,y.GP)(i),m=(0,y.Ds)(i),E=(0,y.ts)(i),c=(0,y.Nu)(i),o=(0,y.yT)(i);return{user:E,mode:m,theme:c,previewOptions:w,previewSetting:l,isHiddenToolBar:(0,y.qe)(i),isPanelPreviewMode:o}})(b.Z)},46807:(B,L,t)=>{"use strict";t.d(L,{Z:()=>h});var d=t(37780),y=t(77200),b=t(8795);const h=(0,d.$j)(i=>{const l=(0,y.kc)(i),w=(0,y.GP)(i),m=(0,y.S7)(i),E=(0,y.EB)(i);return{previewOptions:w,previewSetting:l,isCommunityComboPreview:m,isPreviewCombo:E}})(b.Z)},30388:(B,L,t)=>{"use strict";t.d(L,{H:()=>l,n8:()=>h});const{Blob:d,FileReader:y}=window,b=w=>m=>new Promise((E,c)=>{const o=new y;o.addEventListener("error",c),o.addEventListener("load",()=>E(o.result)),o[w](m)}),h=b("readAsText"),i=b("readAsDataURL"),l=b("readAsArrayBuffer")},27444:(B,L,t)=>{"use strict";t.d(L,{Up:()=>M,Uv:()=>o,Zv:()=>b,eO:()=>I,z6:()=>y});const d=(a,C,D)=>{if(a[C]===D)return a;const O=[...a];return O[C]=D,O},y=(a,C)=>C>=0&&C<=a.length-1?[...a.slice(0,C),...a.slice(C+1)]:a,b=(a,C,D)=>[...a.slice(0,C),D,...a.slice(C)],h=(a,C,D)=>D===C?a:D<C?[...a.slice(0,D),...a.slice(D+1,C+1),a[D],...a.slice(C+1)]:[...a.slice(0,C),a[D],...a.slice(C,D),...a.slice(D+1)],i=(a,C)=>[...a,C],l=(a,C)=>[C,...a],w=a=>{if(a.length===0)return a;const C=[...a];return C.pop(),C},m=a=>{if(a.length===0)return a;const C=[...a];return C.shift(),C},E=(a,C)=>C&&C.length?[...a,...C]:a,c=(a,C)=>a.includes(C)?a:[...a,C],o=(a,C)=>{const D=a.indexOf(C);return~D?[...a.slice(0,D),...a.slice(D+1)]:a},_=(a,C,D)=>{const O=a.indexOf(D);return~O?h(a,C,O):a},r=(a,C)=>{const D=a.findIndex(C);return~D?[...a.slice(0,D),...a.slice(D+1)]:a},s=(a,C,D)=>{const O=a.findIndex(C);return~O?h(a,D,O):a},M=(a,C,D)=>{const O=a.findIndex(C);if(!~O||a[O]===D)return a;const A=[...a];return A[O]=D,A},v=(a,C,D)=>{const O=a.findIndex(C);if(!~O)return[...a,D];if(a[O]===D)return a;const A=[...a];return A[O]=D,A},F=(a,C,D)=>a.find(C)===void 0?[...a,D]:a,I=(a,C)=>{const D=[];for(let O=0,A=a.length;O<A;O+=C)D.push(a.slice(O,O+C));return D}},92029:(B,L,t)=>{"use strict";t.d(L,{AY:()=>F,Bk:()=>v,M0:()=>J,Z_:()=>i,_L:()=>E,hK:()=>r});var d=t(53705),y=t(11972);const b=(W,Y,re)=>{throw new Error("[verify|"+W+"]"+(Y?" "+Y+";":"")+" "+(re||""))},h=(W,Y)=>(re,Le)=>{Y(re)||b(W,Le,"get: "+(0,y.yY)(re))},i=h("String",d.HD),l=h("Boolean",d.jn),w=h("Truthy",d.fQ),m=h("Number",d.hj),E=h("Integer",d.U),c=h("RegExp",d.Kj),o=h("ArrayBuffer",d.eP),_=h("ObjectAlike",d.$N),r=h("BasicObject",d.i3),s=(W,Y,re)=>{isObjectKey(W,Y)||b("ObjectKey",re,"expect to have key: "+Y)},M=(W,Y,re)=>{isObjectContain(W,Y)||b("ObjectContain",re,"expect to contain: "+describe(Y))},v=h("Array",d.PH),F=(W,Y,re)=>{(0,d._e)(W,Y)||b("ArrayLength",re,"expect length: "+Y+", get: "+((0,d.PH)(W)?W.length:(0,y.yY)(W)))},I=h("Function",d.BV),a=h("PromiseAlike",d.om),C=(W,Y,re)=>{isOneOf(W,Y)||b("OneOf",re,"expect one of: ["+Y+"], get: "+describe(W))},D=(W,Y)=>{isFunctionThrow(W)||b("DoThrow",Y)},O=(W,Y)=>{isFunctionThrow(W)&&b("DoNotThrow",Y)},A=async(W,Y)=>{await isFunctionThrowAsync(W)||b("DoThrowAsync",Y)},X=async(W,Y)=>{await isFunctionThrowAsync(W)&&b("DoNotThrowAsync",Y)},le=(W,Y)=>"\nactual: "+(0,y.yY)(W)+"\nexpect: "+(0,y.yY)(Y),_e=(W,Y,re)=>{isStrictEqual(W,Y)||b("StrictEqual",re,le(W,Y))},oe=(W,Y,re)=>{isStrictEqual(W,Y)&&b("NotStrictEqual",re,le(W,Y))},J=function(W,Y,re){re===void 0&&(re="should stringify equal"),(0,d.LP)(W,Y)||b("StringifyEqual",re,le(W,Y))},Ee=function(W,Y,re){re===void 0&&(re="should not stringify equal"),isStringifyEqual(W,Y)&&b("NotStringifyEqual",re,le(W,Y))},de=(W,Y,re)=>{W&&W.includes&&W.includes(Y)||b("Includes",re,"expect "+describe(W)+" to include "+Y)},Ue=(W,Y,re)=>{W&&W.includes&&!W.includes(Y)||b("NotIncludes",re,"expect "+describe(W)+" to not include "+Y)}},40042:B=>{"use strict";var L="-",t={encode:function(y,b,h){return y+L+b+L+h},decode:function(y){var b=y.split(L).reverse(),h=b[0],i=b[1],l=b.slice(2);return{blockKey:l.reverse().join(L),decoratorKey:parseInt(i,10),leafKey:parseInt(h,10)}}};B.exports=t},54501:(B,L,t)=>{B.exports=t(40042)},47345:(B,L,t)=>{var d=t(26720),y=1,b=4;function h(i){return d(i,y|b)}B.exports=h},75985:(B,L,t)=>{(function(){var d=t(55983),y=t(97279).utf8,b=t(85884),h=t(97279).bin,i=function(l,w){l.constructor==String?w&&w.encoding==="binary"?l=h.stringToBytes(l):l=y.stringToBytes(l):b(l)?l=Array.prototype.slice.call(l,0):!Array.isArray(l)&&l.constructor!==Uint8Array&&(l=l.toString());for(var m=d.bytesToWords(l),E=l.length*8,c=1732584193,o=-271733879,_=-1732584194,r=271733878,s=0;s<m.length;s++)m[s]=(m[s]<<8|m[s]>>>24)&16711935|(m[s]<<24|m[s]>>>8)&4278255360;m[E>>>5]|=128<<E%32,m[(E+64>>>9<<4)+14]=E;for(var M=i._ff,v=i._gg,F=i._hh,I=i._ii,s=0;s<m.length;s+=16){var a=c,C=o,D=_,O=r;c=M(c,o,_,r,m[s+0],7,-680876936),r=M(r,c,o,_,m[s+1],12,-389564586),_=M(_,r,c,o,m[s+2],17,606105819),o=M(o,_,r,c,m[s+3],22,-1044525330),c=M(c,o,_,r,m[s+4],7,-176418897),r=M(r,c,o,_,m[s+5],12,1200080426),_=M(_,r,c,o,m[s+6],17,-1473231341),o=M(o,_,r,c,m[s+7],22,-45705983),c=M(c,o,_,r,m[s+8],7,1770035416),r=M(r,c,o,_,m[s+9],12,-1958414417),_=M(_,r,c,o,m[s+10],17,-42063),o=M(o,_,r,c,m[s+11],22,-1990404162),c=M(c,o,_,r,m[s+12],7,1804603682),r=M(r,c,o,_,m[s+13],12,-40341101),_=M(_,r,c,o,m[s+14],17,-1502002290),o=M(o,_,r,c,m[s+15],22,1236535329),c=v(c,o,_,r,m[s+1],5,-165796510),r=v(r,c,o,_,m[s+6],9,-1069501632),_=v(_,r,c,o,m[s+11],14,643717713),o=v(o,_,r,c,m[s+0],20,-373897302),c=v(c,o,_,r,m[s+5],5,-701558691),r=v(r,c,o,_,m[s+10],9,38016083),_=v(_,r,c,o,m[s+15],14,-660478335),o=v(o,_,r,c,m[s+4],20,-405537848),c=v(c,o,_,r,m[s+9],5,568446438),r=v(r,c,o,_,m[s+14],9,-1019803690),_=v(_,r,c,o,m[s+3],14,-187363961),o=v(o,_,r,c,m[s+8],20,1163531501),c=v(c,o,_,r,m[s+13],5,-1444681467),r=v(r,c,o,_,m[s+2],9,-51403784),_=v(_,r,c,o,m[s+7],14,1735328473),o=v(o,_,r,c,m[s+12],20,-1926607734),c=F(c,o,_,r,m[s+5],4,-378558),r=F(r,c,o,_,m[s+8],11,-2022574463),_=F(_,r,c,o,m[s+11],16,1839030562),o=F(o,_,r,c,m[s+14],23,-35309556),c=F(c,o,_,r,m[s+1],4,-1530992060),r=F(r,c,o,_,m[s+4],11,1272893353),_=F(_,r,c,o,m[s+7],16,-155497632),o=F(o,_,r,c,m[s+10],23,-1094730640),c=F(c,o,_,r,m[s+13],4,681279174),r=F(r,c,o,_,m[s+0],11,-358537222),_=F(_,r,c,o,m[s+3],16,-722521979),o=F(o,_,r,c,m[s+6],23,76029189),c=F(c,o,_,r,m[s+9],4,-640364487),r=F(r,c,o,_,m[s+12],11,-421815835),_=F(_,r,c,o,m[s+15],16,530742520),o=F(o,_,r,c,m[s+2],23,-995338651),c=I(c,o,_,r,m[s+0],6,-198630844),r=I(r,c,o,_,m[s+7],10,1126891415),_=I(_,r,c,o,m[s+14],15,-1416354905),o=I(o,_,r,c,m[s+5],21,-57434055),c=I(c,o,_,r,m[s+12],6,1700485571),r=I(r,c,o,_,m[s+3],10,-1894986606),_=I(_,r,c,o,m[s+10],15,-1051523),o=I(o,_,r,c,m[s+1],21,-2054922799),c=I(c,o,_,r,m[s+8],6,1873313359),r=I(r,c,o,_,m[s+15],10,-30611744),_=I(_,r,c,o,m[s+6],15,-1560198380),o=I(o,_,r,c,m[s+13],21,1309151649),c=I(c,o,_,r,m[s+4],6,-145523070),r=I(r,c,o,_,m[s+11],10,-1120210379),_=I(_,r,c,o,m[s+2],15,718787259),o=I(o,_,r,c,m[s+9],21,-343485551),c=c+a>>>0,o=o+C>>>0,_=_+D>>>0,r=r+O>>>0}return d.endian([c,o,_,r])};i._ff=function(l,w,m,E,c,o,_){var r=l+(w&m|~w&E)+(c>>>0)+_;return(r<<o|r>>>32-o)+w},i._gg=function(l,w,m,E,c,o,_){var r=l+(w&E|m&~E)+(c>>>0)+_;return(r<<o|r>>>32-o)+w},i._hh=function(l,w,m,E,c,o,_){var r=l+(w^m^E)+(c>>>0)+_;return(r<<o|r>>>32-o)+w},i._ii=function(l,w,m,E,c,o,_){var r=l+(m^(w|~E))+(c>>>0)+_;return(r<<o|r>>>32-o)+w},i._blocksize=16,i._digestsize=16,B.exports=function(l,w){if(l==null)throw new Error("Illegal argument "+l);var m=d.wordsToBytes(i(l,w));return w&&w.asBytes?m:w&&w.asString?h.bytesToString(m):d.bytesToHex(m)}})()},46198:(B,L,t)=>{"use strict";function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(y){console.error(y)}}d(),B.exports=t(23801)},93168:(B,L,t)=>{"use strict";t.d(L,{Z:()=>l});var d=t(7485),y=t(79929),b=t(79573),h=t(14207);function i(w){var m=w.store,E=w.context,c=w.children,o=(0,d.useMemo)(function(){var s=(0,b.X)(m);return{store:m,subscription:s}},[m]),_=(0,d.useMemo)(function(){return m.getState()},[m]);(0,h.L)(function(){var s=o.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),_!==m.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[o,_]);var r=E||y.E;return d.createElement(r.Provider,{value:o},c)}const l=i},7485:(B,L,t)=>{"use strict";B.exports=t(67887)},84515:B=>{"use strict";B.exports=canvg},29750:B=>{"use strict";B.exports=dompurify},75177:B=>{"use strict";B.exports=html2canvas}},Kn={};function ve(B){var L=Kn[B];if(L!==void 0)return L.exports;var t=Kn[B]={id:B,loaded:!1,exports:{}};return Wn[B].call(t.exports,t,t.exports,ve),t.loaded=!0,t.exports}ve.m=Wn,ve.amdO={},(()=>{var B=[];ve.O=(L,t,d,y)=>{if(t){y=y||0;for(var b=B.length;b>0&&B[b-1][2]>y;b--)B[b]=B[b-1];B[b]=[t,d,y];return}for(var h=1/0,b=0;b<B.length;b++){for(var[t,d,y]=B[b],i=!0,l=0;l<t.length;l++)(y&!1||h>=y)&&Object.keys(ve.O).every(_=>ve.O[_](t[l]))?t.splice(l--,1):(i=!1,y<h&&(h=y));if(i){B.splice(b--,1);var w=d();w!==void 0&&(L=w)}}return L}})(),ve.n=B=>{var L=B&&B.__esModule?()=>B.default:()=>B;return ve.d(L,{a:L}),L},(()=>{var B=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,L;ve.t=function(t,d){if(d&1&&(t=this(t)),d&8||typeof t=="object"&&t&&(d&4&&t.__esModule||d&16&&typeof t.then=="function"))return t;var y=Object.create(null);ve.r(y);var b={};L=L||[null,B({}),B([]),B(B)];for(var h=d&2&&t;typeof h=="object"&&!~L.indexOf(h);h=B(h))Object.getOwnPropertyNames(h).forEach(i=>b[i]=()=>t[i]);return b.default=()=>t,ve.d(y,b),y}})(),ve.d=(B,L)=>{for(var t in L)ve.o(L,t)&&!ve.o(B,t)&&Object.defineProperty(B,t,{enumerable:!0,get:L[t]})},ve.f={},ve.e=B=>Promise.all(Object.keys(ve.f).reduce((L,t)=>(ve.f[t](B,L),L),[])),ve.u=B=>""+{126:"lazy-lib-i18n",147:"lazy-lib-rehype",972:"lazy-lib-dl"}[B]+"-"+{126:"87a900a602f0ca6eb367",147:"a4a20ba7d3c91c47ec4a",972:"58e8123e2490e2e9db9a"}[B]+".js",ve.miniCssF=B=>{},ve.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(B){if(typeof window=="object")return window}}(),ve.hmd=B=>(B=Object.create(B),B.children||(B.children=[]),Object.defineProperty(B,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+B.id)}}),B),ve.o=(B,L)=>Object.prototype.hasOwnProperty.call(B,L),(()=>{var B={},L="@mb2023/mb-proto:";ve.l=(t,d,y,b)=>{if(B[t]){B[t].push(d);return}var h,i;if(y!==void 0)for(var l=document.getElementsByTagName("script"),w=0;w<l.length;w++){var m=l[w];if(m.getAttribute("src")==t||m.getAttribute("data-webpack")==L+y){h=m;break}}h||(i=!0,h=document.createElement("script"),h.charset="utf-8",h.timeout=120,ve.nc&&h.setAttribute("nonce",ve.nc),h.setAttribute("data-webpack",L+y),h.src=t),B[t]=[d];var E=(o,_)=>{h.onerror=h.onload=null,clearTimeout(c);var r=B[t];if(delete B[t],h.parentNode&&h.parentNode.removeChild(h),r&&r.forEach(s=>s(_)),o)return o(_)},c=setTimeout(E.bind(null,void 0,{type:"timeout",target:h}),12e4);h.onerror=E.bind(null,h.onerror),h.onload=E.bind(null,h.onload),i&&document.head.appendChild(h)}})(),ve.r=B=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})},ve.nmd=B=>(B.paths=[],B.children||(B.children=[]),B),ve.j=96,ve.p="/mb-proto2/",(()=>{var B={96:0};ve.f.j=(d,y)=>{var b=ve.o(B,d)?B[d]:void 0;if(b!==0)if(b)y.push(b[2]);else{var h=new Promise((m,E)=>b=B[d]=[m,E]);y.push(b[2]=h);var i=ve.p+ve.u(d),l=new Error,w=m=>{if(ve.o(B,d)&&(b=B[d],b!==0&&(B[d]=void 0),b)){var E=m&&(m.type==="load"?"missing":m.type),c=m&&m.target&&m.target.src;l.message="Loading chunk "+d+" failed.\n("+E+": "+c+")",l.name="ChunkLoadError",l.type=E,l.request=c,b[1](l)}};ve.l(i,w,"chunk-"+d,d)}},ve.O.j=d=>B[d]===0;var L=(d,y)=>{var[b,h,i]=y,l,w,m=0;if(b.some(c=>B[c]!==0)){for(l in h)ve.o(h,l)&&(ve.m[l]=h[l]);if(i)var E=i(ve)}for(d&&d(y);m<b.length;m++)w=b[m],ve.o(B,w)&&B[w]&&B[w][0](),B[w]=0;return ve.O(E)},t=self.webpackChunk_mb2023_mb_proto=self.webpackChunk_mb2023_mb_proto||[];t.forEach(L.bind(null,0)),t.push=L.bind(null,t.push.bind(t))})(),ve.nc=void 0,ve.O(void 0,[736],()=>ve(76557)),ve.O(void 0,[736],()=>ve(61936));var Hn=ve.O(void 0,[736],()=>ve(2470));Hn=ve.O(Hn)})();

//# sourceMappingURL=preview-html-zip-57bd004c33e13f86164a.js.map